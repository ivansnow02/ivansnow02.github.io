<!DOCTYPE html><html lang="zh-CN"><head>
  <link rel="manifest" href="/manifest.json">
  <link rel="stylesheet" href="/css/custom.css">
  <link href="https://fastly.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css" rel="stylesheet">
  <link href="/css/custom.css" rel="stylesheet">
  <link rel="preconnect" href="https://fonts.loli.net">
  <link rel="preconnect" href="https://gstatic.loli.net" crossorigin="">
  <link href="https://fonts.loli.net/css2?family=JetBrains+Mono:ital,wght@0,100..800;1,100..800&amp;display=swap" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet">
<meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta http-equiv="X-UA-COMPATIBLE" content="IE=edge,chrome=1"><meta name="renderer" content="webkit"><link rel="icon" type="image/ico" sizes="32x32" href="/img/favicon.ico"><link rel="apple-touch-icon" sizes="180x180" href="/img/apple-touch-icon.png"><meta name="msvalidate.01" content="5C885BB4F08198773FCB9D68FB7EFF0C"><meta name="google-site-verification" content="SU_V4YfQlQkkbm4IQUajehIwRUPbvIwErs1WJRMD0NQ"><link rel="alternate" href="/rss.xml" title="Snow's Blog" type="application/rss+xml"><link rel="alternate" href="/atom.xml" title="Snow's Blog" type="application/atom+xml"><link rel="alternate" type="application/json" title="Snow's Blog" href="https://blog.ivansnow02.xyz/feed.json"><link rel="preconnect" href="https://s4.zstatic.net"><link rel="preconnect" href="https://at.alicdn.com"><link rel="preconnect" href="https://lf9-cdn-tos.bytecdntp.com"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://unpkg.com"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Mulish:400,400italic,700,700italic%7CJuliamo:400,400italic,700,700italic%7CNoto%20Serif%20SC:400,400italic,700,700italic%7CJetBrains%20Mono:400,400italic,700,700italic&amp;display=swap&amp;subset=latin,latin-ext" media="none" onload="this.media='all'"><link rel="stylesheet" href="/css/app.css?v=0.4.14"><link rel="modulepreload" href="/js/chunk-2FUZD5TY.js"><link rel="modulepreload" href="/js/chunk-ARAOOFSL.js"><link rel="modulepreload" href="/js/chunk-E3UZYSYJ.js"><link rel="modulepreload" href="/js/chunk-NQYVAKVO.js"><link rel="modulepreload" href="/js/chunk-QFYDMXPZ.js"><link rel="modulepreload" href="/js/copy-tex-PJE4SH5D.js"><link rel="modulepreload" href="/js/index.esm-Y7XZFAGL.js"><link rel="modulepreload" href="/js/post-MBX4MI4K.js"><link rel="modulepreload" href="/js/quicklink-BBD3FDVT.js"><link rel="modulepreload" href="/js/search-JEV3TAG4.js"><link rel="modulepreload" href="/js/siteInit.js"><link rel="modulepreload" href="/js/tcomments-UURMOCFH.js"><link rel="preload" href="https://s2.loli.net/2024/06/16/vN51cCT6pUtjnK7.png" as="image" fetchpriority="high"><meta name="keywords" content="computer science,"><meta name="description" content="some notes about computer science"><link rel="canonical" href="https://blog.ivansnow02.xyz/computer-network/"><title>计算机网络</title><meta name="generator" content="Hexo 7.3.0"></head><body itemscope="" itemtype="http://schema.org/WebPage"><div id="loading"><div class="cat"><div class="body"></div><div class="head"><div class="face"></div></div><div class="foot"><div class="tummy-end"></div><div class="bottom"></div><div class="legs left"></div><div class="legs right"></div></div><div class="paw"><div class="hands left"></div><div class="hands right"></div></div></div></div><div id="container"><header id="header" itemscope="" itemtype="http://schema.org/WPHeader"><div class="inner"><div id="brand"><div class="pjax"><h1 itemprop="name headline">计算机网络</h1><div class="meta"><span class="item" title="创建时间：2024-06-28 16:30:19"><span class="icon"><i class="ic i-calendar"></i></span><span class="text">发表于</span><time itemprop="dateCreated datePublished" datetime="2024-06-28T16:30:19+08:00">2024-06-28</time></span><span class="item" title="本文字数"><span class="icon"><i class="ic i-pen"></i></span><span class="text">本文字数</span><span>39k</span><span class="text">字</span></span><span class="item" title="阅读时长"><span class="icon"><i class="ic i-clock"></i></span><span class="text">阅读时长</span><span>35 分钟</span></span></div></div></div><nav id="nav"><div class="inner"><div class="toggle"><div class="lines" aria-label="切换导航栏"><span class="line"></span><span class="line"></span><span class="line"></span></div></div><ul class="menu"><li class="item title"><a href="/" rel="start">Code Blog</a></li></ul><ul class="right" id="rightNav"><li class="item theme"><i class="ic i-sun"></i></li><li class="item search"><i class="ic i-search"></i></li></ul></div></nav></div><div class="pjax" id="imgs"><img src="https://s2.loli.net/2024/06/16/vN51cCT6pUtjnK7.png" loading="eager" decoding="async" fetchpriority="high" alt="Snow's Blog"></div></header><div id="waves"><svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"></path></defs><g class="parallax"><use xlink:href="#gentle-wave" x="48" y="0"></use><use xlink:href="#gentle-wave" x="48" y="3"></use><use xlink:href="#gentle-wave" x="48" y="5"></use><use xlink:href="#gentle-wave" x="48" y="7"></use></g></svg></div><main><div class="inner"><div class="pjax" id="main"><div class="article wrap"><div class="breadcrumb" itemlistelement="" itemscope="" itemtype="https://schema.org/BreadcrumbList"><i class="ic i-home"></i><span><a href="/">首页</a></span><i class="ic i-angle-right"></i><span class="current" itemprop="itemListElement" itemscope="itemscope" itemtype="https://schema.org/ListItem"><a href="/categories/computer-science/" itemprop="item" rel="index" title="分类于computer science"><span itemprop="name">computer science<meta itemprop="position" content="0"></span></a></span></div><article class="post block" itemscope="itemscope" itemtype="http://schema.org/Article" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://blog.ivansnow02.xyz/computer-network/"><span hidden="hidden" itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="image" content="/img/avatar.png"><meta itemprop="name" content="Ivan Snow"><meta itemprop="description" content="Just a Note., some notes about computer science"></span><span hidden="hidden" itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="Snow's Blog"></span><div class="body md" itemprop="articleBody"><h2 id="绪论"><a class="anchor" href="#绪论">#</a> 绪论</h2>
<h3 id="计算机网络定义"><a class="anchor" href="#计算机网络定义">#</a> 计算机网络定义</h3>
<p>计算机网络是互连的、自治的计算机集合。<br>
计算机网络向用户可以提供<strong>连通性</strong>和<strong>共享</strong>服务</p>
<h3 id="互联网的组成"><a class="anchor" href="#互联网的组成">#</a> 互联网的组成</h3>
<h4 id="边缘部分"><a class="anchor" href="#边缘部分">#</a> 边缘部分</h4>
<p>由各主机构成，用户直接进行信息处理和信息共享；低速连入核心网。</p>
<h5 id="客户服务器模式"><a class="anchor" href="#客户服务器模式">#</a> 客户 / 服务器模式</h5>
<ul>
<li>客户：被用户调用后运行，在打算通信时主动向远地服务器发起通信，必须知道服务器的地址；不需要很特殊的硬件和很复杂的操作系统</li>
<li>服务器：一种专门用来提供某种服务的程序，可以同时处理多个客户的请求；系统启动后即自动调用并一直不断地运行着，被动地等待着来自各地的客户端的请求，不需要知道客户端的地址；一般需要强大的硬件和高级的操作系统</li>
</ul>
<h5 id="对等连接"><a class="anchor" href="#对等连接">#</a> 对等连接</h5>
<ul>
<li>对等连接：两个对等的进程之间的通信，两个进程在通信时既可以是客户也可以是服务器，两个进程之间的关系是对等的，没有主从之分</li>
</ul>
<h4 id="核心部分"><a class="anchor" href="#核心部分">#</a> 核心部分</h4>
<p>在网络核心部分其特殊作用的是路由器。路由器是实现分组交换的关键构件。由各路由器连网，负责为边缘部分提供高速远程分组交换。</p>
<h5 id="电路交换的特点"><a class="anchor" href="#电路交换的特点">#</a> 电路交换的特点</h5>
<ul>
<li>电路交换：在通信开始前，通信的两端要先建立一条专用的物理通路，通信结束后再撤销这条通路</li>
<li>面向连接的</li>
<li>电路交换的三个阶段：建立连接、通信、释放连接</li>
<li>优点：端对端通信质量因约定了通信资源获得可靠保障，对连续传送大量数据效率高</li>
<li>缺点：电路交换传输计算机数据效率低。</li>
</ul>
<h5 id="报文交换的特点"><a class="anchor" href="#报文交换的特点">#</a> 报文交换的特点</h5>
<ul>
<li>报文交换：通信的两端不需要先建立专用的物理通路，而是直接向网络发送报文，报文中包含目的地址，网络根据目的地址选择合适的路径传送报文、</li>
<li>优点：无须预约传输带宽，动态逐段利用传输带宽对突发式数据通信效率高，通信迅速。</li>
<li>缺点：时延较长</li>
</ul>
<h5 id="分组交换的特点"><a class="anchor" href="#分组交换的特点">#</a> 分组交换的特点</h5>
<ul>
<li>分组交换：报文交换的基础上，将报文划分为固定长度的数据块，称为分组，每个分组都携带有目的地址，网络根据目的地址选择合适的路径传送分组</li>
<li>（1）报文分组，加首部（2）经路由器储存转发（3）在目的地合并</li>
<li>优点：
<ul>
<li>高效：动态分配传输带宽，对通信链路是逐段占用</li>
<li>灵活：以分组为传送单位和查找路由</li>
<li>迅速：不必先建立连接就能向其他主机发送分组</li>
<li>可靠：保证可靠性的网络协议；分布式的路由选择协议使网络具有很好的生存性</li>
</ul>
</li>
<li>问题：
<ul>
<li>分组在各节点存储转发，需要缓存和排队，增加了时延</li>
<li>分组必须携带的首部也造成了一定开销</li>
</ul>
</li>
</ul>
<h3 id="计算机网络的分类"><a class="anchor" href="#计算机网络的分类">#</a> 计算机网络的分类</h3>
<h4 id="按网络的作用范围分类"><a class="anchor" href="#按网络的作用范围分类">#</a> 按网络的作用范围分类</h4>
<ul>
<li>广域网（WAN）：覆盖范围广，跨越城市、国家、甚至全球</li>
<li>城域网（MAN）：覆盖范围小，跨越一个城市</li>
<li>局域网（LAN）：覆盖范围更小，跨越一个建筑物或者一个校园</li>
<li>个人区域网（PAN）：覆盖范围更小，跨越个人工作空间</li>
</ul>
<h4 id="按网络的使用者分类"><a class="anchor" href="#按网络的使用者分类">#</a> 按网络的使用者分类</h4>
<ul>
<li>公用网：为大众提供服务，如电话网、互联网</li>
<li>专用网：为某个组织或个人提供服务，如企业网、家庭网</li>
</ul>
<h3 id="计算机网络的性能"><a class="anchor" href="#计算机网络的性能">#</a> 计算机网络的性能</h3>
<h4 id="速率"><a class="anchor" href="#速率">#</a> 速率</h4>
<ul>
<li>速率：数据传输速率，指单位时间内传输的数据量</li>
</ul>
<h4 id="带宽"><a class="anchor" href="#带宽">#</a> 带宽</h4>
<ul>
<li>带宽：信道的传输能力，指单位时间内通过信道的最高数据率</li>
</ul>
<h4 id="吞吐量"><a class="anchor" href="#吞吐量">#</a> 吞吐量</h4>
<ul>
<li>吞吐量：单位时间内通过网络的实际数据量</li>
</ul>
<h4 id="时延"><a class="anchor" href="#时延">#</a> 时延</h4>
<ul>
<li>时延：数据从网络的一端传输到另一端所需的时间</li>
<li>发送时延：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>发送时延</mtext><mo>=</mo><mfrac><mtext>数据长度</mtext><mtext>发送速率</mtext></mfrac></mrow><annotation encoding="application/x-tex">发送时延=\frac{数据长度}{发送速率}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord cjk_fallback">发送时延</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.2173em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8723em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord cjk_fallback mtight">发送速率</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord cjk_fallback mtight">数据长度</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></li>
<li>传播时延：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>传播时延</mtext><mo>=</mo><mfrac><mtext>传播距离</mtext><mtext>传播速率</mtext></mfrac></mrow><annotation encoding="application/x-tex">传播时延=\frac{传播距离}{传播速率}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord cjk_fallback">传播时延</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.2173em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8723em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord cjk_fallback mtight">传播速率</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord cjk_fallback mtight">传播距离</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></li>
<li>处理时延：数据包在路由器中排队、检错、转发所需的时间</li>
<li>排队时延：数据包在路由器的输出队列中等待传输所需的时间</li>
<li>总时延：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>总时延</mtext><mo>=</mo><mtext>发送时延</mtext><mo>+</mo><mtext>传播时延</mtext><mo>+</mo><mtext>处理时延</mtext><mo>+</mo><mtext>排队时延</mtext></mrow><annotation encoding="application/x-tex">总时延=发送时延+传播时延+处理时延+排队时延</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord cjk_fallback">总时延</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7667em;vertical-align:-0.0833em;"></span><span class="mord cjk_fallback">发送时延</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7667em;vertical-align:-0.0833em;"></span><span class="mord cjk_fallback">传播时延</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7667em;vertical-align:-0.0833em;"></span><span class="mord cjk_fallback">处理时延</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord cjk_fallback">排队时延</span></span></span></span></li>
</ul>
<h4 id="时延带宽积"><a class="anchor" href="#时延带宽积">#</a> 时延带宽积</h4>
<ul>
<li>时延带宽积：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>时延带宽积</mtext><mo>=</mo><mtext>传播时延</mtext><mo>∗</mo><mtext>带宽</mtext></mrow><annotation encoding="application/x-tex">时延带宽积=传播时延*带宽</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord cjk_fallback">时延带宽积</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord cjk_fallback">传播时延</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord cjk_fallback">带宽</span></span></span></span></li>
<li>时延带宽积反映了网络中的数据量</li>
</ul>
<h4 id="往返时间rtt"><a class="anchor" href="#往返时间rtt">#</a> 往返时间 RTT</h4>
<ul>
<li>往返时间 RTT：数据从发送端发送到接收端，再返回发送端所需的时间</li>
</ul>
<h4 id="利用率"><a class="anchor" href="#利用率">#</a> 利用率</h4>
<ul>
<li>利用率：信道的利用率，指信道被占用的时间比例</li>
<li>网络利用率：全网络信道利用率的加权平均值</li>
<li>时延<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>D</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">D_0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 与网络利用率<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>U</mi></mrow><annotation encoding="application/x-tex">U</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">U</span></span></span></span> 的关系：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>D</mi><mo>=</mo><mfrac><msub><mi>D</mi><mn>0</mn></msub><mrow><mn>1</mn><mo>−</mo><mi>U</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex">D=\frac{D_0}{1-U}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.2918em;vertical-align:-0.4033em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8884em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mbin mtight">−</span><span class="mord mathnormal mtight" style="margin-right:0.10903em;">U</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.4101em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3173em;"><span style="top:-2.357em;margin-left:-0.0278em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.4033em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span>，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>U</mi></mrow><annotation encoding="application/x-tex">U</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">U</span></span></span></span> 是网络利用率，数值在 0-1 之间</li>
</ul>
<h4 id="计算机网络的非性能指标"><a class="anchor" href="#计算机网络的非性能指标">#</a> 计算机网络的非性能指标</h4>
<ul>
<li>费用</li>
<li>质量</li>
<li>标准化</li>
<li>可靠性</li>
<li>可扩展性和可升级性</li>
<li>易于管理和维护</li>
</ul>
<h3 id="计算机网络的体系结构"><a class="anchor" href="#计算机网络的体系结构">#</a> 计算机网络的体系结构</h3>
<h4 id="协议与划分层次"><a class="anchor" href="#协议与划分层次">#</a> 协议与划分层次</h4>
<ul>
<li>协议是<strong>进行网络中的数据交换而建立的规则、标准或约定</strong>，是控制两个对等实体进行通信的规则的集合。在协议的控制下，两个对等实体间的通信使得本层能够向<strong>上一层提供服务</strong>，而要实现本层协议，还需要<strong>使用下面一层提供服务</strong>。</li>
<li><strong>实体</strong>（entity）表示任何可发送或接收信息的硬件或软件进程</li>
<li><strong>协议栈</strong>：指计算机网络体系结构采用分层模型后，每层的主要功能由对等层协议的运行来实现，因而每层可用一些主要协议来表征，几个层次画在一起很像一个栈的结构.</li>
<li><strong>对等层</strong>：在网络体系结构中，通信双方实现同样功能的层</li>
<li><strong>协议数据单元</strong>：对等层实体进行信息交换的数据单位</li>
<li><strong>服务访问点</strong>：在同一系统中相邻两层的实体进行交互（即交换信息）的地方</li>
<li><strong>服务访问点 SAP</strong> 是一个抽象的概念，它实体上就是一个<strong>逻辑接口</strong></li>
</ul>
<div class="note warning">
<p>协议和服务的概念的区分</p>
<ul>
<li>协议的实现保证了能够向上一层提供服务。本层的服务用户只能看见服务而无法看见下面的协议。<strong>下面的协议对上面的服务用户是透明的</strong>。</li>
<li>协议是 “水平的”，即协议是控制两个对等实体进行通信的规则。但服务是 “垂直的”，即<strong>服务是由下层通过层间接口向上层提供的</strong>。上层使用所提供的服务必须与下层交换一些命令，这些命令在 OSI 中称为<strong>服务原语</strong>。</li>
</ul>
</div>
<h5 id="网络协议的组成要素"><a class="anchor" href="#网络协议的组成要素">#</a> 网络协议的组成要素</h5>
<ul>
<li>语法：数据与控制信息的结构或格式</li>
<li>语义：需要发出何种控制信息，完成何种动作以及做出何种响应。</li>
<li>同步：即事件实现顺序的详细说明。</li>
</ul>
<h4 id="接口"><a class="anchor" href="#接口">#</a> 接口</h4>
<p>接口：同一结点相邻两层间交换信息的连接点，系统内部规定，同一结点相邻两层的实体通过服务访问点 SAP 进行交互，是抽象概念</p>
<h4 id="osi参考模型和tcpip参考模型"><a class="anchor" href="#osi参考模型和tcpip参考模型">#</a> OSI 参考模型和 TCP/IP 参考模型</h4>
<table>
<thead>
<tr>
<th>OSI</th>
<th>TCP/IP</th>
<th>信息格式</th>
</tr>
</thead>
<tbody>
<tr>
<td>应用层</td>
<td rowspan="3">应用层</td>
<td rowspan="3">报文流</td>
</tr>
<tr>
<td>表示层</td>
</tr>
<tr>
<td>会话层</td>
</tr>
<tr>
<td>传输层</td>
<td>传输层（TCP、UDP）</td>
<td>分组</td>
</tr>
<tr>
<td>网络层</td>
<td>网络互联层（IP）</td>
<td>IP 数据报</td>
</tr>
<tr>
<td>数据链路层</td>
<td rowspan="2">网络接口层</td>
<td rowspan="2">帧比特流</td>
</tr>
<tr>
<td>物理层</td>
</tr>
</tbody>
</table>
<h4 id="分层的好处"><a class="anchor" href="#分层的好处">#</a> 分层的好处</h4>
<ul>
<li>各层之间是独立的</li>
<li>灵活性好</li>
<li>结构上可分割开</li>
<li>易于实现和维护</li>
<li>能促进标准化工作</li>
</ul>
<h2 id="物理层"><a class="anchor" href="#物理层">#</a> 物理层</h2>
<h3 id="物理层的基本概念"><a class="anchor" href="#物理层的基本概念">#</a> 物理层的基本概念</h3>
<h4 id="物理层要解决哪些问题"><a class="anchor" href="#物理层要解决哪些问题">#</a> 物理层要解决哪些问题</h4>
<ol>
<li>物理层要尽可能地<strong>屏蔽掉物理设备和传输媒体</strong>，通信手段的不同，使数据链路层感觉不到这些差异，只考虑完成本层的协议和服务。</li>
<li>给其服务用户（数据链路层）在一条物理的传输媒体上传送和接收比特流（一般为串行按顺序传输的比特流）的能力，为此，物理层应该<strong>解决物理连接的建立、维持和释放问题</strong>。</li>
<li>在两个相邻系统之间<strong>唯一地标识数据电路</strong></li>
</ol>
<h4 id="物理层的主要特点"><a class="anchor" href="#物理层的主要特点">#</a> 物理层的主要特点</h4>
<ol>
<li>由于在 OSI 之前，许多物理规程或协议已经制定出来了，而且在数据通信领域中，这些物理规程已被许多商品化的设备所采用，加之，物理层协议涉及的范围广泛，所以至今没有按 OSI 的抽象模型制定一套新的物理层协议，而是沿用已存在的物理规程，将物理层确定为描述与传输媒体接口的<strong>机械</strong>，<strong>电气</strong>，<strong>功能</strong>和<strong>规程</strong>特性。</li>
<li>由于物理连接的方式很多，传输媒体的种类也很多，因此，具体的物理协议相当复杂。</li>
</ol>
<h4 id="物理层的主要任务"><a class="anchor" href="#物理层的主要任务">#</a> 物理层的主要任务</h4>
<p>主要任务：确定与传输媒体的接口的一些特性</p>
<ol>
<li>机械特性：接口的几何形状、引脚数目、引脚位置等</li>
<li>电气特性：指明在接口电缆的各条线上出现的电压的范围</li>
<li>功能特性：指明某条线上出现的某一电平的电压表示何意。</li>
<li>归程特性：指明对于不同功能的各种可能事件的出现顺序</li>
</ol>
<h3 id="数据通信的基础知识"><a class="anchor" href="#数据通信的基础知识">#</a> 数据通信的基础知识</h3>
<h4 id="数据通信系统的模型"><a class="anchor" href="#数据通信系统的模型">#</a> 数据通信系统的模型</h4>
<p>一个数据通信系统包括三大部分：原系统、传输系统和目的系统</p>
<h4 id="常用术语"><a class="anchor" href="#常用术语">#</a> 常用术语</h4>
<ul>
<li>数据：运送信息的实体</li>
<li>信号：数据的电气或电磁的表现</li>
<li>码元：在一定时间间隔内的信号的离散数值</li>
<li>模拟信号：代表消息的参数的取值是连续的</li>
<li>数字信号：代表消息的参数的取值是离散的</li>
</ul>
<div class="note warning">
<p>目前主流：数字信道通信<br>
优点：抗干扰能力强，传输差错可控制、便于处理、便于加密、可以综合传递各种信息<br>
数字通信可以传递数字信号，也可以传递经过数字化处理的模拟信号</p>
</div>
<h4 id="信道的基本概念"><a class="anchor" href="#信道的基本概念">#</a> 信道的基本概念</h4>
<p>信道：一般用来表示像某一个方向传送信息的媒体，与通信电路不同</p>
<h5 id="通信双方的交互方式"><a class="anchor" href="#通信双方的交互方式">#</a> 通信双方的交互方式</h5>
<ul>
<li>单工通信（单向通信）：只能有一个方向的通信</li>
<li>半双工通信（双向交替通信）：通信的双方都可以发送和接收信息，但不能同时进行</li>
<li>全双工通信（双向同时通信）：通信的双方可以同时发送和接收信息</li>
</ul>
<h5 id="基带信号的调制"><a class="anchor" href="#基带信号的调制">#</a> 基带信号的调制</h5>
<p>基带信号（即基本频带的信号）：来自信源的型号信号，一般是低频信号，不能直接用于传输，需要调制</p>
<h6 id="基带调制编码"><a class="anchor" href="#基带调制编码">#</a> 基带调制（编码）</h6>
<ul>
<li>仅对波形进行变换，使他能与信道的基本特性相适应，仍是数字信号</li>
<li>信息传输之前编码：传输编码
<ul>
<li>提高抗干扰能力；</li>
<li>携带同步信息实现同步；</li>
<li>可实现纠错检偏；</li>
<li>降低传输损耗；</li>
<li>简化传输设备；</li>
</ul>
</li>
</ul>
<p><img loading="lazy" data-src="https://blog.ivansnow02.xyz/blog-img/images/computer-network/cbf26b4aa9b9c053a37e2d0a2eb9fd971d4c00565b35992c44c21dfb6a66a80e.png" alt="常用编码方式"></p>
<div class="note warning">
<ul>
<li>不归零制：正电平表示 1，负电平表示 0</li>
<li>归零制：正脉冲表示 1，负脉冲表示 0</li>
<li>曼彻斯特编码：位周期中心向上跳变表示 0，中心向下跳变表示 1，但也可以反过来</li>
<li>差分曼彻斯特编码：位开始边界有跳变表示 0，无跳变表示 1</li>
</ul>
<p>曼彻斯特编码和差分曼彻斯特编码具有自同步性</p>
</div>
<h6 id="带通调制"><a class="anchor" href="#带通调制">#</a> 带通调制</h6>
<ul>
<li>带通信号：需要载波</li>
<li>把型号的频率范围搬移到较高的频段，并转换为模拟信号，以便在模拟信道上传输</li>
<li>仅在一段频率范围内能够通过信道</li>
</ul>
<p><img loading="lazy" data-src="https://blog.ivansnow02.xyz/blog-img/images/computer-network/3be6136c96cc6314af8af1911782f6027946e0a185b3073947847ef271861d09.png" alt="图 1"></p>
<div class="note warning">
<ul>
<li>调幅（AM）：调制信号的幅度随基带信号的变化而变化</li>
<li>调频（FM）：调制信号的频率随基带信号的变化而变化</li>
<li>调相（PM）：调制信号的初始相位随基带信号的变化而变化</li>
</ul>
</div>
<h4 id="信道的极限容量"><a class="anchor" href="#信道的极限容量">#</a> 信道的极限容量</h4>
<h5 id="影响因素"><a class="anchor" href="#影响因素">#</a> 影响因素</h5>
<ul>
<li>信道能够通过的频率范围</li>
<li>信道的信噪比</li>
</ul>
<h5 id="信道的极限容量带宽"><a class="anchor" href="#信道的极限容量带宽">#</a> 信道的极限容量 —— 带宽</h5>
<ul>
<li>信道的带宽：物理信道能过允许顺利通过的最大的连续频率范围</li>
<li>带宽是传输介质的一种物理特征，通常取决于介质的材料构成、厚度和长度</li>
<li>信道的带宽越宽，能够通过的信号高频分量越多，可以用更高的速率传送码元而不出现码间串扰</li>
<li>码间串扰：如果高频分量在传输时受到衰减，码元之间的界限就会变得模糊，这种现象称为码间串扰</li>
</ul>
<h5 id="奈氏准则"><a class="anchor" href="#奈氏准则">#</a> 奈氏准则</h5>
<p>在带宽为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>W</mi></mrow><annotation encoding="application/x-tex">W</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">W</span></span></span></span>（ Hz）的低通信道中，极限<strong>码元传输速率</strong><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn><mi>W</mi></mrow><annotation encoding="application/x-tex">2W</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord">2</span><span class="mord mathnormal" style="margin-right:0.13889em;">W</span></span></span></span> 波特，极限<strong>信息传输速率</strong><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>C</mi></mrow><annotation encoding="application/x-tex">C</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span></span></span></span>（bps）满足：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>C</mi><mo>=</mo><mn>2</mn><mi>W</mi><msub><mrow><mi>log</mi><mo>⁡</mo></mrow><mn>2</mn></msub><mi>V</mi></mrow><annotation encoding="application/x-tex">C=2W\log_2V</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.9386em;vertical-align:-0.2441em;"></span><span class="mord">2</span><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop"><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.207em;"><span style="top:-2.4559em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2441em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span></span></span></span>，其中<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>V</mi></mrow><annotation encoding="application/x-tex">V</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span></span></span></span> 代表不同的码元数</p>
<h5 id="信道的极限容量信噪比"><a class="anchor" href="#信道的极限容量信噪比">#</a> 信道的极限容量 —— 信噪比</h5>
<ul>
<li>信噪比：信号功率与噪声功率之比，常记为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mi mathvariant="normal">/</mi><mi>N</mi></mrow><annotation encoding="application/x-tex">S/N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mord">/</span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span></span></span></span>，单位为分贝，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mi>N</mi><mi>R</mi><mo>=</mo><mn>10</mn><msub><mrow><mi>log</mi><mo>⁡</mo></mrow><mn>10</mn></msub><mfrac><mi>S</mi><mi>N</mi></mfrac></mrow><annotation encoding="application/x-tex">SNR=10\log_{10}\frac{S}{N}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">SNR</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.2173em;vertical-align:-0.345em;"></span><span class="mord">10</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop"><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.207em;"><span style="top:-2.4559em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">10</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2441em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8723em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05764em;">S</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></li>
</ul>
<h5 id="香农定理"><a class="anchor" href="#香农定理">#</a> 香农定理</h5>
<ul>
<li>香农定理：在有高斯白噪声的信道中，极限<strong>信息传输速率</strong><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>C</mi></mrow><annotation encoding="application/x-tex">C</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span></span></span></span>（bps）满足：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>C</mi><mo>=</mo><mi>W</mi><msub><mrow><mi>log</mi><mo>⁡</mo></mrow><mn>2</mn></msub><mo stretchy="false">(</mo><mn>1</mn><mo>+</mo><mfrac><mi>S</mi><mi>N</mi></mfrac><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">C=W\log_2(1+\frac{S}{N})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop"><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.207em;"><span style="top:-2.4559em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2441em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.2173em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8723em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05764em;">S</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose">)</span></span></span></span>，其中<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>W</mi></mrow><annotation encoding="application/x-tex">W</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">W</span></span></span></span> 为信道的带宽，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi></mrow><annotation encoding="application/x-tex">S</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span></span></span></span> 为信号功率，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi></mrow><annotation encoding="application/x-tex">N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span></span></span></span> 为噪声功率</li>
</ul>
<div class="note warning">
<p>码元传输速率受奈氏准则的限制，信息传输速率受香农公式的限制<br>
香农公式在数据通信中的意义是：只要信息传输速率低于信道的极限传信率，就可实现无差传输。<br>
bit/s（bps）是<strong>信息传输速率</strong>的单位<br>
<strong>码元传输速率</strong>，单位波特（Baud），也称为调制速率、波形速率或符号速率。<br>
<strong>一个码元不一定对应于一个比特</strong></p>
</div>
<h3 id="物理层下面的传输媒体"><a class="anchor" href="#物理层下面的传输媒体">#</a> 物理层下面的传输媒体</h3>
<h4 id="导引型传输媒体"><a class="anchor" href="#导引型传输媒体">#</a> 导引型传输媒体</h4>
<table>
<thead>
<tr>
<th>传输媒体</th>
<th>分类</th>
<th>优点</th>
<th>缺点</th>
</tr>
</thead>
<tbody>
<tr>
<td rowspan="2">双绞线</td>
<td>屏蔽双绞线（STP）</td>
<td rowspan="2">价格低、安装方便、易于维护</td>
<td rowspan="2">传输距离短（几到十几公里）、传输速率低、易受干扰、传输误码率高</td>
</tr>
<tr>
<td>非屏蔽双绞线（UTP）</td>
</tr>
<tr>
<td rowspan="2">同轴电缆</td>
<td>50Ω 同轴电缆：LAN / 数字传输</td>
<td rowspan="2">传输距离远、传输速率高、抗干扰能力强</td>
<td rowspan="2">安装维护困难、价格高</td>
</tr>
<tr>
<td>75Ω 同轴电缆：有线电视 / 模拟传输</td>
</tr>
<tr>
<td rowspan="2">光纤</td>
<td>多模光纤（近距离）</td>
<td rowspan="2">电磁绝缘性能好、信号衰减小、频带较宽、传输距离较大（100km 以上）、传输误码率低、保密性好</td>
<td rowspan="2">断裂连接非常困难、技术要求高、成本高</td>
</tr>
<tr>
<td>单模光纤（远距离）</td>
</tr>
</tbody>
</table>
<h4 id="非导引型传输媒体"><a class="anchor" href="#非导引型传输媒体">#</a> 非导引型传输媒体</h4>
<ul>
<li>短波通信：通信质量差，传输速度低</li>
<li>微波在空间直线传播，分为地面微波接力通信和卫星通信</li>
</ul>
<h3 id="信道复用技术"><a class="anchor" href="#信道复用技术">#</a> 信道复用技术</h3>
<h4 id="常用的信道复用技术"><a class="anchor" href="#常用的信道复用技术">#</a> 常用的信道复用技术</h4>
<h5 id="频分复用fdm"><a class="anchor" href="#频分复用fdm">#</a> 频分复用（FDM）</h5>
<p>频分复用的所有用户同时占用不同的频带资源并行通信<br>
<img loading="lazy" data-src="https://blog.ivansnow02.xyz/blog-img/images/computer-network/68737f124081ab9da8c06252bd51ac46ce727efd24be47c0954c688338d327e1.png" alt="图 3"></p>
<h5 id="时分复用tdm"><a class="anchor" href="#时分复用tdm">#</a> 时分复用（TDM）</h5>
<p>时分复用的所有用户在不同的时间占用同样的频带<br>
<img loading="lazy" data-src="https://blog.ivansnow02.xyz/blog-img/images/computer-network/b37ae8b287f22369e4eec45ed7e1c12f7a7db1c5ebcbd928c3f44c67c0a135e8.png" alt="图 4"></p>
<h5 id="波分复用wdm"><a class="anchor" href="#波分复用wdm">#</a> 波分复用（WDM）</h5>
<p>根据频分复用的设计思想，可在一根光纤上同时传输多个频率（波长）相近的光载波信号，实现基于光纤的频分复用技术。<br>
<img loading="lazy" data-src="https://blog.ivansnow02.xyz/blog-img/images/computer-network/c7a28bb723b47aad1b36ee116da8f63b1e80fde9526d1cbb4baec06fde173190.png" alt="图 5"></p>
<h5 id="码分复用cdm"><a class="anchor" href="#码分复用cdm">#</a> 码分复用（CDM）</h5>
<p>与 FDM 和 TDM 不同，CDMA 的每个用户可以在相同的时间使用相同的频带进行通信。</p>
<ul>
<li>CDMA 将每个比特时间划分为 m 个更短的时间片，称为码片（Chip）。m 的取值通常为 64 或 128。为了简单起见，在后续的举例中，我们假设 m 的取值为 8。</li>
<li>CDMA 中的每个站点都被指派一个唯一的 m 比特码片序列（Chip Sequence）。
<ul>
<li>某个站要发送比特 1，则发送它自己的 m 比特码片序列；</li>
<li>某个站要发送比特 0，则发送它自己的 m 比特码片序列的反码。</li>
</ul>
</li>
<li>如果有两个或多个站同时发送数据，则信道中的信号就是这些站各自所发送一系列码片序列或码片序列反码的叠加。为了从信道中分离出每个站的信号，给每个站指派码片序列时，必须遵循以下规则：
<ul>
<li>分配给每个站的码片序列必须各不相同，实际常采用伪随机码序列。</li>
<li>分配给每个站的码片序列必须相互正交，即各码片序列相应的码片向量之间的规格化內积为 0。</li>
</ul>
</li>
</ul>
<p>令向量 A 表示站 A 的码片向量，向量 B 表示站 B 的码片向量。两个不同站 A 和 B 的码片序列相互正交，就是向量 A 与向量 B 的规格化內积为 0，如下式所示。</p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>A</mi><mo>⋅</mo><mi>B</mi><mo>=</mo><mfrac><mn>1</mn><mi>m</mi></mfrac><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>m</mi></munderover><msub><mi>A</mi><mi>i</mi></msub><mo>⋅</mo><msub><mi>B</mi><mi>i</mi></msub><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">A \cdot B = \frac{1}{m} \sum_{i=1}^{m} A_i \cdot B_i = 0
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">A</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.9291em;vertical-align:-1.2777em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3214em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">m</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.6514em;"><span style="top:-1.8723em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-4.3em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.2777em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0502em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span></span></p>
<h2 id="数据链路层"><a class="anchor" href="#数据链路层">#</a> 数据链路层</h2>
<h3 id="三个基本问题"><a class="anchor" href="#三个基本问题">#</a> 三个基本问题</h3>
<h4 id="封装成帧"><a class="anchor" href="#封装成帧">#</a> 封装成帧</h4>
<p>封装成帧 (framing) 就是在一段数据的前后分别添加首部和尾部，这样就构成了一个帧。接收端在收到物理层上交的比特流后，就能根据首部和尾部的标记，从收到的比特流中识别帧的开始和结束。</p>
<p>首部和尾部的一个重要作用就是进行帧定界 (即确定帧的界限)。此外，首部和尾部还包括许多必要的控制信息。在发送帧时，是从帧首部开始发送的。</p>
<p>每一种链路层协议都规定了所能传送的帧的数据部分长度上限 - 最大传送单元 MTU (Maximum Transfer Unit)</p>
<h4 id="透明传输"><a class="anchor" href="#透明传输">#</a> 透明传输</h4>
<p>透明传输是指在数据链路层传输数据时，不对数据进行任何修改，即不对数据进行加字节、删字节、改字节等操作。这样，接收端收到的数据与发送端发送的数据完全一样。</p>
<h4 id="差错检测"><a class="anchor" href="#差错检测">#</a> 差错检测</h4>
<p>差错检测是指在数据链路层传输数据时，对数据进行差错检测，以保证数据的正确传输。差错检测的方法有很多种，常用的有循环冗余检测 CRC (Cyclic Redundancy Check) 和纵向奇偶校验 VRC (Vertical Redundancy Check)。</p>
<h5 id="循环冗余检测-crc"><a class="anchor" href="#循环冗余检测-crc">#</a> 循环冗余检测 CRC</h5>
<p>CRC 是一种差错检测方法，它是通过对数据进行除法运算来检测数据中的差错。CRC 的基本思想是：在发送端，将数据 D 与一个固定的除数 G 进行除法运算，得到余数 R，然后将 R 附加到数据 D 的后面一起发送出去；在接收端，将接收到的数据与除数 G 进行除法运算，如果余数为 0，则说明数据传输正确，否则说明数据传输错误。</p>
<p><img loading="lazy" data-src="https://blog.ivansnow02.xyz/blog-img/images/computer-network/ba9c033d87fe2bcfa0749f977531ac1eb42179b6d25f45b4ca2ce3d2ce324e3e.png" alt="图 2"></p>
<ol>
<li>构造 “被除数”: 待发送数据后面添加生成多项式最高次数个 0</li>
<li>构造 “除数”: 生成多项式各项系数构成的比特串作为除数</li>
<li>做 “二进制模 2 除法”: 相当于对应位进行逻辑异或运算</li>
<li>检查 “余数”: 余数的位数应与生成多项式最高次数相同， 如果位数不够，则在余数前补 0 来凑足位数。</li>
</ol>
<p>在接收端对收到的每一帧经过 CRC 检验后，有以下两种情况:</p>
<ol>
<li>若得出的余数 R=O, 则判定这个帧没有差错，就接受 (accept)。</li>
<li>若余数 R!=O, 则判定这个帧有差错 (但无法确定究竟是哪一位或哪几位出现了差<br>
错)，就丢弃。</li>
</ol>
<p>一种较方便的方法是用多项式来表示循环冗余检验过程。在上面的例子中，用多项式 P (X) = X<sup>3</sup> + X<sup>2</sup> + 1 表示上面的除数 P = 1101 (最高位对应于 X<sup>3</sup>，最低位对应于 X<sup>0</sup>)。多项式 P (X) 称为生成多项式。</p>
<p>最后再强调一下，在数据链路层若仅仅使用循环冗余检验 CRC 差错检测技术，则只能做到对帧的无差错接受，即:“凡是接收端数据链路层接受的帧，我们都能以非常接近于 1 的概率认为这些帧在传输过程中没有产生差错 "。接收端丢弃的帧虽然曾收到了，但最终还是因为有差错被丢弃，即没有被接受。以上所述的可以近似地表述为 (通常都是这样认为):“凡是接收端数据链路层接受的帧均无差错”。</p>
<h3 id="点对点协议-ppp"><a class="anchor" href="#点对点协议-ppp">#</a> 点对点协议 PPP</h3>
<h4 id="ppp帧的格式"><a class="anchor" href="#ppp帧的格式">#</a> PPP 帧的格式</h4>
<p><img loading="lazy" data-src="https://blog.ivansnow02.xyz/blog-img/images/computer-network/7f97ac02ba6066b17353b0cd4d693403b4a1491b72a4626ed7e4c2efb0194325.png" alt="图 6"></p>
<p>PPP 帧的格式如上图所示，它由 7 个部分组成，各部分的含义如下:</p>
<ol>
<li>帧起始标志 (Flag)：一个字节，固定为 01111110（7E），表示一个帧的开始。</li>
<li>地址 (Address)：一个字节，固定为 11111111（FF）</li>
<li>控制 (Control)：一个字节，固定为 00000011（03）</li>
<li>协议 (Protocol)：两个字节，表示上层协议的类型，如 IP 协议的类型为 0x0021。</li>
<li>信息 (Information)：0 到多个字节，表示上层协议的数据。</li>
<li>帧校验序列 (FCS)：两个字节，表示帧校验序列，用于差错检测。</li>
<li>帧结束标志 (Flag)：一个字节，固定为 01111110（7E），表示一个帧的结束。</li>
</ol>
<h4 id="ppp帧的透明传输"><a class="anchor" href="#ppp帧的透明传输">#</a> PPP 帧的透明传输</h4>
<h5 id="字节填充异步传输"><a class="anchor" href="#字节填充异步传输">#</a> 字节填充（异步传输）</h5>
<ul>
<li><code>7E</code>  -&gt;  <code>7D 5E</code></li>
<li><code>7D</code>  -&gt;  <code>7D 5D</code></li>
<li>若信息字段中出现 ASCII 码的控制字符 (即数值小于  <code>Ox20</code>  的字符)，则在该字符前面要加入一个  <code>Ox7D</code>  字节，同时将该字符的编码加以改变。例如，出现 <code>Ox03</code>  (在控制字符中 是 “传输结束 “ <code>ETX</code> ) 就要把它转变为 2 字节序列 ( <code>7D 23</code> )</li>
</ul>
<h5 id="零比特填充同步传输"><a class="anchor" href="#零比特填充同步传输">#</a> 零比特填充（同步传输）</h5>
<p>如果数据中出现了连续的 5 个  <code>1</code> ，则在这 5 个  <code>1</code>  之后插入一个  <code>0</code> 。</p>
<h4 id="ppp帧的工作状态"><a class="anchor" href="#ppp帧的工作状态">#</a> PPP 帧的工作状态</h4>
<p><img loading="lazy" data-src="https://blog.ivansnow02.xyz/blog-img/images/computer-network/7eec2e4a84f535dbd7a73549f493d55c8437ce4499693e20da83f67e01ac851d.png" alt="图 7"></p>
<h3 id="csmacd协议"><a class="anchor" href="#csmacd协议">#</a> CSMA/CD 协议</h3>
<p>CSMA/CD 协议是一种多路访问协议，它的全称是 Carrier Sense Multiple Access with Collision Detection，即带冲突检测的载波监听多路访问协议。CSMA/CD 协议的工作原理如下:</p>
<ul>
<li>多址接入：多个站点共享一个信道</li>
<li>载波监听：在发送数据之前，先监听信道，如果信道空闲，则发送数据；如果信道忙，则等待
<ul>
<li>若检测到总线空闲 96 比特时间（发送 96 比特所耗费的时间，也称为帧间最小间隔），则发送这个帧；</li>
<li>若检测到总线忙，则继续检测并等待总线转为空闲 96 比特时间，然后发送这个帧。</li>
</ul>
</li>
<li>碰撞检测：如果发送数据的同时，检测到信道上有其他数据，说明发生了碰撞，立即停止发送数据，并发送一个特殊的信号，以通知其他站点发生了碰撞，然后等待一段时间后再次发送数据</li>
<li>强化碰撞： 发送帧的站点一旦检测到碰撞，除了立即停止发送帧外，还要再继续发送 32 比特或 48 比特的人为干扰信号（Jamming Signal），以便有足够多的碰撞信号使所有站点都能检测出碰撞。</li>
</ul>
<p><img loading="lazy" data-src="https://blog.ivansnow02.xyz/blog-img/images/computer-network/a7ea9e133cdff6a20b0460fedcdd9649266b7d4e992e8e015978a02faa1785a9.png" alt="图 8"></p>
<p>显然，在使用 CSMA/CD 协议时，一个站不可能同时进行发送和接收 (但必须边发送边监听信道)。因此使用 CSMA/CD 协议的以太网不可能进行全双工通信而只能进行双向交替通信 (半双工通信)。</p>
<h4 id="争用期"><a class="anchor" href="#争用期">#</a> 争用期</h4>
<p>站点从发送帧开始，最多经过时长<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn><mi>τ</mi></mrow><annotation encoding="application/x-tex">2\tau</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">2</span><span class="mord mathnormal" style="margin-right:0.1132em;">τ</span></span></span></span>（即<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>δ</mi><mo>→</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">\delta \rightarrow 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03785em;">δ</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span>）就可检测出所发送的帧是否遭遇了碰撞。<br>
因此，共享总线以太网的端到端往返时间<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn><mi>τ</mi></mrow><annotation encoding="application/x-tex">2\tau</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">2</span><span class="mord mathnormal" style="margin-right:0.1132em;">τ</span></span></span></span> 被称为争用期（Contention Period）或碰撞窗口（Collision Window），它是一个非常重要的参数。</p>
<p><img loading="lazy" data-src="https://blog.ivansnow02.xyz/blog-img/images/computer-network/97ca7cdebf114f5b02695f62b704583f1747f4a289bcd4822541a62c3296eabb.png" alt="图 9"></p>
<p>10Mb/s 共享总线以太网（传统以太网）规定：争用期<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn><mi>τ</mi></mrow><annotation encoding="application/x-tex">2\tau</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">2</span><span class="mord mathnormal" style="margin-right:0.1132em;">τ</span></span></span></span> 的值为 512 比特的发送时间，即<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>51.2</mn><mi>μ</mi><mi>s</mi></mrow><annotation encoding="application/x-tex">51.2\mu s</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8389em;vertical-align:-0.1944em;"></span><span class="mord">51.2</span><span class="mord mathnormal">μ</span><span class="mord mathnormal">s</span></span></span></span>。</p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mn>2</mn><mi>τ</mi><mo>=</mo><mfrac><mrow><mn>512</mn><mi>b</mi></mrow><mrow><mn>10</mn><mi>M</mi><mi>b</mi><mi mathvariant="normal">/</mi><mi>s</mi></mrow></mfrac><mo>=</mo><mn>51.2</mn><mi>μ</mi><mi>s</mi></mrow><annotation encoding="application/x-tex">2\tau = \frac{512b}{10Mb/s} = 51.2\mu s
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">2</span><span class="mord mathnormal" style="margin-right:0.1132em;">τ</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.3074em;vertical-align:-0.936em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3714em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">10</span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="mord mathnormal">b</span><span class="mord">/</span><span class="mord mathnormal">s</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">512</span><span class="mord mathnormal">b</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.936em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8389em;vertical-align:-0.1944em;"></span><span class="mord">51.2</span><span class="mord mathnormal">μ</span><span class="mord mathnormal">s</span></span></span></span></span></p>
<h4 id="二进制指数退避算法"><a class="anchor" href="#二进制指数退避算法">#</a> 二进制指数退避算法</h4>
<p>退避时间 = 争用期 * 随机数</p>
<ul>
<li>争用期：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn><mi>τ</mi></mrow><annotation encoding="application/x-tex">2\tau</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">2</span><span class="mord mathnormal" style="margin-right:0.1132em;">τ</span></span></span></span></li>
<li>随机数：0-2<sup>k-1</sup>，k=min (n,10)，n 为重传次数，若重传次数达到 16 次，则放弃发送并向上层报告</li>
</ul>
<h4 id="信道利用率"><a class="anchor" href="#信道利用率">#</a> 信道利用率</h4>
<p><img loading="lazy" data-src="https://blog.ivansnow02.xyz/blog-img/images/computer-network/57d5293a1c325863921788701c4249826799909db8385e9f4266a681bbb337d0.png" alt="图 10"></p>
<p>极限信道利用率：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>S</mi><mrow><mi>m</mi><mi>a</mi><mi>x</mi></mrow></msub><mo>=</mo><mfrac><mn>1</mn><mrow><mn>1</mn><mo>+</mo><mi>a</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex">S_{max} = \frac{1}{1+a}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">ma</span><span class="mord mathnormal mtight">x</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.2484em;vertical-align:-0.4033em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8451em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mbin mtight">+</span><span class="mord mathnormal mtight">a</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.4033em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span>，其中<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mo>=</mo><mfrac><mi>τ</mi><msub><mi>T</mi><mn>0</mn></msub></mfrac></mrow><annotation encoding="application/x-tex">a=\frac{\tau}{T_{0}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.1405em;vertical-align:-0.4451em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6954em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3173em;"><span style="top:-2.357em;margin-left:-0.1389em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">0</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.1132em;">τ</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.4451em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span>，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>T</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">T_{0}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">0</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 为信道传播时延</p>
<h3 id="使用集线器的星形拓扑"><a class="anchor" href="#使用集线器的星形拓扑">#</a> 使用集线器的星形拓扑</h3>
<h4 id="星形以太网-10base-t"><a class="anchor" href="#星形以太网-10base-t">#</a> 星形以太网 10Base-T</h4>
<ul>
<li>10：传输速率为 10Mb/s</li>
<li>Base：基带传输</li>
<li>T：双绞线</li>
</ul>
<h4 id="集线器的特点"><a class="anchor" href="#集线器的特点">#</a> 集线器的特点</h4>
<ol>
<li>集线器是使用电子器件来模拟实际电缆线的工作，因此整个系统仍然像一个传统的以太网那样运行。</li>
<li>使用集线器的以太网在逻辑上仍是一个总线网，各工作站使用的还是 CSMA/CD 协议，并共享逻辑上的总线。</li>
<li>集线器很像一个多接口的转发器，工作在物理层。</li>
<li>集线器采用了专门的芯片，进行自适应串音回波抵消，减少了近端串音。</li>
</ol>
<h3 id="以太网的mac层"><a class="anchor" href="#以太网的mac层">#</a> 以太网的 MAC 层</h3>
<h4 id="mac层的硬件地址"><a class="anchor" href="#mac层的硬件地址">#</a> MAC 层的硬件地址</h4>
<ul>
<li>前 24 位：厂商编号</li>
<li>后 24 位：序列号</li>
</ul>
<h5 id="ig位"><a class="anchor" href="#ig位">#</a> I/G 位</h5>
<ul>
<li>I/G 位：第一个字节的最低位，指示地址是单播地址还是组播地址
<ul>
<li>I=0：单播地址（单站地址）</li>
<li>I=1：组播地址（组地址）</li>
<li>I=1，G=1：广播地址（全 48 位为 1）</li>
</ul>
</li>
</ul>
<h5 id="gl位"><a class="anchor" href="#gl位">#</a> G/L 位</h5>
<ul>
<li>G/L 位：第一个字节的次低位，指示地址是全局地址还是本地地址
<ul>
<li>G=0：全局地址</li>
<li>G=1：本地地址</li>
</ul>
</li>
</ul>
<h5 id="适配器检查"><a class="anchor" href="#适配器检查">#</a> 适配器检查</h5>
<ul>
<li>适配器检查：接收到的帧的目的地址与适配器的地址进行比较，如果不匹配，则丢弃
<ul>
<li>单播帧（一对一）：目的地址与适配器地址匹配</li>
<li>广播帧（一对所有）：目的地址为全 1</li>
<li>多播帧（一对多）：目的地址为多播地址</li>
</ul>
</li>
<li>混杂模式：适配器接收所有帧，不进行适配器检查，适用于网络分析（嗅探器）</li>
</ul>
<h4 id="mac层的帧格式"><a class="anchor" href="#mac层的帧格式">#</a> MAC 层的帧格式</h4>
<h5 id="以太网v2帧格式"><a class="anchor" href="#以太网v2帧格式">#</a> 以太网 v2 帧格式</h5>
<table>
<thead>
<tr>
<th>目的地址</th>
<th>源地址</th>
<th>类型</th>
<th>数据</th>
<th>FCS</th>
</tr>
</thead>
<tbody>
<tr>
<td>6 字节</td>
<td>6 字节</td>
<td>2 字节</td>
<td>46-1500 字节</td>
<td>4 字节</td>
</tr>
</tbody>
</table>
<ul>
<li>目的地址：6 字节，接收方的 MAC 地址</li>
<li>源地址：6 字节，发送方的 MAC 地址</li>
<li>类型：2 字节，表示上层协议的类型，如 IP 协议的类型为 0x0800</li>
<li>数据：46-1500 字节，表示上层协议的数据</li>
<li>FCS：4 字节，帧校验序列，用于差错检测</li>
<li>以太网 v2 帧格式中的数据部分长度上限为 1500 字节，即 MTU 为 1500 字节</li>
<li>以太网 v2 帧格式中的数据部分长度下限为 46 字节，即数据部分长度不足 46 字节时，要用填充字节进行填充</li>
<li>还需要在前面插入 8 个字节，第 — 个字段是 7 个字节的前同步码 (1 和 0 交替码)，它的作用是 使接收端的适配器在接收 MAC 帧时能够迅速调整其时钟频率，使它和发送端的时钟同步， 也就是 “实现位同步”(位同步就是比特同步的意思)。第二个字段是帧开始定界符，定义为 10101011。它的前六位的作用和前同步码一样，MAC 帧的 FCS 字段的检验范围不包 括前同步码和帧开始定界符</li>
</ul>
<h5 id="无效帧"><a class="anchor" href="#无效帧">#</a> 无效帧</h5>
<ol>
<li>帧的长度不是整数个字节:</li>
<li>用收到的帧检验序列 FCS 查出有差错；</li>
<li>收到的帧的 MAC 客户数据字段的长度不在 46~1500 字节之间。考虑到 MAC 帧首部和尾部的长度共有 18 字节，可以得出有效的 MAC 帧长度为 64~1518 字节之间。</li>
</ol>
<p>对于检查出的无效 MAC 帧就简单地丢弃。<strong>以太网不负责重传丢弃的</strong>帧。</p>
<h4 id="ieee-8023-和以太网v2的区别"><a class="anchor" href="#ieee-8023-和以太网v2的区别">#</a> IEEE 802.3 和以太网 v2 的区别</h4>
<ol>
<li>IEEE 802.3 规定的 MAC 帧的第三个字段是 “长度 / 类型”。</li>
<li>当 “长度 / 类型” 字段值小于 Ox0600 时，数据字段必须装入上面的逻辑链路控制 LLC 子层的 LLC 帧。</li>
<li>在 802.3 标准的文档中，MAC 帧的帧格式包括了 8 字节的前同步码和帧开始定界符。</li>
</ol>
<h3 id="拓展的以太网"><a class="anchor" href="#拓展的以太网">#</a> 拓展的以太网</h3>
<h4 id="在物理层拓展以太网"><a class="anchor" href="#在物理层拓展以太网">#</a> 在物理层拓展以太网</h4>
<ul>
<li>光纤</li>
<li>集线器
<ul>
<li>优点：使原来属于不同碰撞域的以太网上的计算机能够进行跨碰撞域的通信；扩大了以太网覆盖的地理范围。</li>
<li>缺点：一个系的和连起来三个系的总的吞吐量一样；不能连接不同数据率的碰撞域。</li>
</ul>
</li>
</ul>
<h4 id="在数据链路层拓展以太网"><a class="anchor" href="#在数据链路层拓展以太网">#</a> 在数据链路层拓展以太网</h4>
<h5 id="网桥"><a class="anchor" href="#网桥">#</a> 网桥</h5>
<p>网桥对收到的帧根据其 MAC 帧的目的地址进行转发和过滤。 当网桥收到一个帧时，并不是向所有的端口转发此帧，而是根据此帧的目的 MAC 地址，查找网桥中的地址表，然后确定将该帧转发到哪一个端口，或者是把它丢弃 (即过滤)。</p>
<h5 id="交换机"><a class="anchor" href="#交换机">#</a> 交换机</h5>
<p>以太网交换机实质上就是一个多端口的网桥，通常都有十几个或更多的端口，和工作在物理层的转发器、集线器有很大的差别。以太网交换机的每个端口都直接与一个单台主机或另一个以太网交换机相连，并且一般都工作在全双工方式。以太网交换机还具有并行性，即能同时连通多对端口，使多对主机能同时通信 (而网桥只能一次分析和转发一个帧)。相互通信的主机都独占传输媒体，无碰撞地传输数据。换句话说，每一个端口和连接到端口的 主机构成了一个碰撞域，具有 N 个端口的以太网交换机的碰撞域共有 N 个。</p>
<h5 id="以太网交换机的自学习机制"><a class="anchor" href="#以太网交换机的自学习机制">#</a> 以太网交换机的自学习机制</h5>
<p>以太网交换机的自学习机制是指以太网交换机在工作过程中，能够自动学习网络中各个主机的 MAC 地址，并根据学习到的 MAC 地址建立地址表，以便在转发帧时能够快速地查找目的地址。</p>
<p>以太网交换机的自学习机制的基本原理如下:</p>
<ol>
<li>当以太网交换机收到一个帧时，它首先检查帧的源 MAC 地址，然后查找地址表，看看这个源 MAC 地址是否已经在地址表中。</li>
<li>如果源 MAC 地址不在地址表中，则将源 MAC 地址和接收到这个帧的端口号添加到地址表中。</li>
<li>如果源 MAC 地址已经在地址表中，则更新源 MAC 地址的时间戳。</li>
<li>然后，以太网交换机检查帧的目的 MAC 地址，查找地址表，看看这个目的 MAC 地址是否在地址表中。</li>
<li>如果目的 MAC 地址在地址表中，则查找目的 MAC 地址对应的端口号，并将这个帧转发到这个端口。</li>
<li>如果目的 MAC 地址不在地址表中，则将这个帧转发到除接收到这个帧的端口外的所有端口。</li>
<li>以太网交换机还会定期地检查地址表中的条目，如果某个条目的时间戳超过了一定的时间，则将这个条目从地址表中删除。</li>
</ol>
<h3 id="虚拟局域网-vlan"><a class="anchor" href="#虚拟局域网-vlan">#</a> 虚拟局域网 VLAN</h3>
<h4 id="dot1q协议"><a class="anchor" href="#dot1q协议">#</a> Dot1q 协议</h4>
<table>
<thead>
<tr>
<th>目的地址</th>
<th>源地址</th>
<th>VLAN 标识</th>
<th>类型</th>
<th>数据</th>
<th>FCS</th>
</tr>
</thead>
<tbody>
<tr>
<td>6 字节</td>
<td>6 字节</td>
<td>4 字节</td>
<td>2 字节</td>
<td>46-1500 字节</td>
<td>4 字节</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>TPID</th>
<th>PRI</th>
<th>CFI</th>
<th>VLAN ID</th>
</tr>
</thead>
<tbody>
<tr>
<td>2 字节（16 位）</td>
<td>3 位</td>
<td>1 位</td>
<td>12 位</td>
</tr>
</tbody>
</table>
<ul>
<li>VLAN 标识：4 字节，表示 VLAN 的标识
<ul>
<li>TPID：2 字节，固定为 0x8100</li>
<li>PRI：3 位，优先级</li>
<li>CFI：1 位，规范位</li>
<li>VLAN ID：12 位，VLAN 的标识，0 和 4095 保留</li>
</ul>
</li>
</ul>
<h2 id="网络层"><a class="anchor" href="#网络层">#</a> 网络层</h2>
<h3 id="网际协议-ip"><a class="anchor" href="#网际协议-ip">#</a> 网际协议 IP</h3>
<h4 id="ipv4-地址"><a class="anchor" href="#ipv4-地址">#</a> IPv4 地址</h4>
<h5 id="ipv4-地址的分类编址"><a class="anchor" href="#ipv4-地址的分类编址">#</a> IPv4 地址的分类编址</h5>
<p><img loading="lazy" data-src="https://blog.ivansnow02.xyz/blog-img/images/computer-network/9eea8912cc44dee9cdcc28c112e18dcebe43636d2258c6b2a62b8f484decfdf6.png" alt="图 11"></p>
<table>
<thead>
<tr>
<th>类别</th>
<th>最小可指派网络号</th>
<th>最大可指派网络号</th>
<th>可指派网络数量</th>
<th>每个网络最大可分配地址数量</th>
<th>不能指派的网络号</th>
</tr>
</thead>
<tbody>
<tr>
<td>A</td>
<td>1</td>
<td>126</td>
<td>2<sup>8-1</sup>-2</td>
<td>2<sup>24</sup>-2</td>
<td>0 和 127</td>
</tr>
<tr>
<td>B</td>
<td>128.0</td>
<td>191.255</td>
<td>2<sup>16-2</sup></td>
<td>2<sup>16</sup>-2</td>
<td>无</td>
</tr>
<tr>
<td>C</td>
<td>192.0.0</td>
<td>223.255.255</td>
<td>2<sup>24-3</sup></td>
<td>2<sup>8</sup>-2</td>
<td>无</td>
</tr>
</tbody>
</table>
<h5 id="子网划分"><a class="anchor" href="#子网划分">#</a> 子网划分</h5>
<p>子网掩码可以表明分类 IPv4 地址的主机号部分被借用了几个比特作为子网号。</p>
<ul>
<li>用左起多个连续的比特 1 对应 IPv4 地址中的网络号和子网号；</li>
<li>之后的多个连续的比特 0 对应 IPv4 地址中的主机号。</li>
<li>将划分子网的 IPv4 地址与相应的子网掩码进行逐比特的<strong>逻辑与运算</strong>，就可得到该 IPv4 地址所在子网的网络地址。</li>
</ul>
<h5 id="无分类编址cidr"><a class="anchor" href="#无分类编址cidr">#</a> 无分类编址 CIDR</h5>
<p>无分类的两级编址的记法是：  <code>IP地址/前缀长度</code> 或 <code>{&lt;网络前缀&gt;,&lt;主机号&gt;}</code></p>
<h4 id="地址解析协议-arp"><a class="anchor" href="#地址解析协议-arp">#</a> 地址解析协议 ARP</h4>
<p>ARP 协议是一种地址解析协议，它的作用是将网络层的 IP 地址解析为数据链路层的 MAC 地址。</p>
<p>ARP 协议的工作原理如下:</p>
<ol>
<li>主机 A 发送一个 ARP 请求分组，该分组内容为 “我是主机 A，我的 IP 地址是 xxx，我的 MAC 地址是 yyy，我要找到 IP 地址为 zzz 的主机的 MAC 地址”。</li>
<li>所有的主机都接收到这个 ARP 请求分组、</li>
<li>主机 B 收到 ARP 请求分组后，发现自己的 IP 地址与 ARP 请求分组中的 IP 地址相同，就收下这个 ARP 请求分组，并向主机 A 发送一个 ARP 响应分组，同时在这个 ARP 响应分组中包含自己的 MAC 地址，即 “我的 IP 地址是 zzz，我的 MAC 地址是 www”。</li>
<li>主机 A 收到 ARP 响应分组后，就在自己的 ARP 缓存表中添加一条主机 B 的 IP 地址和 MAC 地址的映射。</li>
</ol>
<p>当主机 A 向 B 发送数据报时，很可能以后不久主机 B 还要向 A 发送数据报，因而主机 B 也可能要向 A 发送 ARP 请求分组。为了减少网络上的通信量，主机 A 在发送其 ARP 请求分组时，就把自己的 IP 地址到 MAC 地址的映射写入 ARP 请求分组。<strong>当主机 B 收到 A 的 ARP 请求分组时，就把主机 A 的这一地址映射写入主机 B 自己的 ARP 高速缓存中</strong>。以后 主机 B 向 A 发送数据报时就很方便了。</p>
<ul>
<li>ARP 请求分组的目的地址是广播地址，即全 1，路由器不转发广播分组，因此 ARP 请求分组只能在一个局域网中传播。</li>
<li>如果所要找的主机和源主机不在同一个局域网上，那么就要通过 ARP 找到一个位于本局域网上的某个路由器的硬件地址，然后把分组发送给这个路由器，让这个路由器把分组转发给下一个网络。剩下的工作就由下一个网络来做。</li>
</ul>
<h5 id="arp-的四种典型情况"><a class="anchor" href="#arp-的四种典型情况">#</a> ARP 的四种典型情况</h5>
<ul>
<li>发送方是<strong>主机</strong>，要把 IP 数据报发送到<strong>本网络</strong>上的另一个主机。这时用 ARP 找到目的主机的硬件地址。</li>
<li>发送方是<strong>主机</strong>，要把 IP 数据报发送到<strong>另一个网络</strong>上的一个主机。这时用 ARP 找到本网络上的一个路由器的硬件地址。剩下的工作由这个路由器来完成。</li>
<li>发送方是<strong>路由器</strong>，要把 IP 数据报转发到<strong>本网络上</strong>的一个主机。这时用 ARP 找到目的主机的硬件地址。</li>
<li>发送方是<strong>路由器</strong>，要把 IP 数据报转发到<strong>另一个网络</strong>上的一个主机。这时用 ARP 找到本网络上另一个路由器的硬件地址。剩下的工作由这个路由器来完成。</li>
</ul>
<h4 id="ip-数据报的格式"><a class="anchor" href="#ip-数据报的格式">#</a> IP 数据报的格式</h4>
<p><img loading="lazy" data-src="https://blog.ivansnow02.xyz/blog-img/images/computer-network/bd36565d148b45c1b2c460ca97015bc84dbaf4e14d39bf980dd2d8eff4aff7d6.png" alt="图 12"></p>
<ul>
<li>版本：4 位，IPv4</li>
<li>首部长度：4 位，单位为 4 字节，最小值为 5，最大值为 15</li>
<li>区分服务：8 位，用于指定数据报的优先级和服务质量</li>
<li>总长度：16 位，指定整个 IP 数据报的长度，单位为字节</li>
<li>标识：16 位，用于标识数据报的分片。IP 软件在存储器中维持一个计数器，每产生一个数据报，计数器就加 1, 并将此值赋给标识字段。</li>
<li>标志：3 位，用于指定数据报的分片情况
<ul>
<li>位 0：保留位，必须为 0</li>
<li>位 1：DF（Don't Fragment），禁止分片，DF=1 时，数据报不能分片</li>
<li>位 2：MF（More Fragment），更多分片，MF=1 时，表示后面还有分片</li>
</ul>
</li>
<li>片偏移：13 位，指定数据报片的相对位置，单位为 8 字节</li>
<li>生存时间：8 位，指定数据报在网络中的生存时间，单位为跳数</li>
<li>协议：8 位，指定上层协议的类型，如 TCP 协议的类型为 0x06</li>
<li>首部校验和：16 位，用于检验 IP <strong>首部</strong>的正确性</li>
<li>源地址：32 位，指定数据报的源 IP 地址</li>
<li>目的地址：32 位，指定数据报的目的 IP 地址</li>
<li>可选字段：可选，用于指定 IP 数据报的选项</li>
</ul>
<h5 id="首部检验和计算"><a class="anchor" href="#首部检验和计算">#</a> 首部检验和计算</h5>
<ul>
<li>首部检验和：16 位，用于检验 IP <strong>首部</strong>的正确性</li>
<li>首部检验和的计算方法是：将 IP 首部中的所有 16 位字相加，如果有溢出，则将溢出部分回卷到低位，然后取反，得到的结果就是首部检验和。</li>
</ul>
<h3 id="默认路由"><a class="anchor" href="#默认路由">#</a> 默认路由</h3>
<p>静态路由配置是指用户或网络运维人员使用路由器的相关命令给路由器人工配置路由表。</p>
<h3 id="互联网的路由选择协议"><a class="anchor" href="#互联网的路由选择协议">#</a> 互联网的路由选择协议</h3>
<h4 id="路由选择协议的特点"><a class="anchor" href="#路由选择协议的特点">#</a> 路由选择协议的特点</h4>
<ul>
<li>自适应性：路由选择协议能够根据网络的拓扑结构和链路状态的变化，自动调整路由表，以适应网络的变化。</li>
<li>分布式：路由选择协议是分布式的，即每个路由器只知道与自己直接相连的路由器的信息，而不知道整个网络的拓扑结构。</li>
<li>分层次：路由选择协议是分层次的，即路由选择协议分为内部网关协议和外部网关协议两个层次。</li>
</ul>
<h4 id="自治系统-as"><a class="anchor" href="#自治系统-as">#</a> 自治系统 AS</h4>
<p>在单一的技术管理下的一组路由器，而这些路由器使用一种 AS 内部的路由选择协议和共同的度量以确定分组在该 AS 内的路由。</p>
<h4 id="路由信息协议-rip"><a class="anchor" href="#路由信息协议-rip">#</a> 路由信息协议 RIP</h4>
<h5 id="rip-基本概念"><a class="anchor" href="#rip-基本概念">#</a> RIP 基本概念</h5>
<ul>
<li>RIP 使用跳数（Hop Count）作为度量（Metric）来衡量到达目的网络的距离。
<ul>
<li>路由器到直连网络的距离定义为 1</li>
<li>路由器到非直连网络的距离定义为所经过的路由器数加 1。</li>
<li>允许一条路径最多只能包含 15 个路由器，距离等于 16 时相当于不可达。因此 RIP 只适用于小型互联网。</li>
<li>当到达同一目的网络有多条 RIP 距离相等的路由时，可以进行等价负载均衡，也就是将通信量均衡地分布到多条等价的路径上。</li>
</ul>
</li>
</ul>
<h5 id="rip-特点"><a class="anchor" href="#rip-特点">#</a> RIP 特点</h5>
<ul>
<li>仅和相邻路由器交换信息。</li>
<li>交换路由器自己的路由表。</li>
<li>周期性交换（例如，每个约 30 秒）。</li>
<li>为了加快 RIP 的收敛速度，当网络拓扑发生变化时，路由器要及时向相邻路由器通告拓扑变化后的路由信息，这称为<strong>触发更新</strong>。</li>
</ul>
<h5 id="rip-基本工作过程"><a class="anchor" href="#rip-基本工作过程">#</a> RIP 基本工作过程</h5>
<ol>
<li>路由器刚开始工作时，只知道自己到直连网络的 RIP 距离为 1。</li>
<li>每个路由器仅和相邻路由器周期性地交换并更新路由信息。</li>
<li>若干次交换和更新后，每个路由器都知道到达本自治系统 AS 内各网络的最短距离和下一跳路由器，称为<strong>收敛</strong>。</li>
</ol>
<div class="note warning">
<p>更新算法</p>
<ol>
<li>到达目的网络，<strong>相同的下一跳</strong>，<strong>最新消息</strong>，要更新</li>
<li>发现了<strong>新的网络</strong>，添加</li>
<li>到达目的网络，<strong>不同的下一跳</strong>，<strong>新路由优势</strong>，要更新</li>
<li>到达目的网络，<strong>不同的下一跳</strong>，<strong>RIP 距离相等</strong>，可以<strong>等价负载均衡</strong>，添加</li>
<li>到达目的网络，<strong>不同的下一跳</strong>，<strong>新路由劣势</strong>，<strong>不</strong>更新</li>
</ol>
</div>
<h5 id="rip-的优缺点"><a class="anchor" href="#rip-的优缺点">#</a> RIP 的优缺点</h5>
<ul>
<li>优点：简单、好消息传得快</li>
<li>缺点：限制了网络的规模、交换完整的路由表，开销大、坏消息传得慢</li>
</ul>
<h5 id="rip-报文格式"><a class="anchor" href="#rip-报文格式">#</a> RIP 报文格式</h5>
<p><img loading="lazy" data-src="https://blog.ivansnow02.xyz/blog-img/images/computer-network/03186be6380870d6788f925aa26a5b4eaa33c530dc593da931bfeccccbf122c3.png" alt="图 13"></p>
<h4 id="开放最短路径优先协议-ospf"><a class="anchor" href="#开放最短路径优先协议-ospf">#</a> 开放最短路径优先协议 OSPF</h4>
<h5 id="ospf-基本概念"><a class="anchor" href="#ospf-基本概念">#</a> OSPF 基本概念</h5>
<ul>
<li>链路状态（Link State，LS）是指本路由器都和哪些路由器相邻，以及相应链路的 “代价（cost）”。</li>
<li>OSPF 相邻路由器之间通过交互问候（Hello）分组来建立和维护邻居关系。问候（Hello）分组封装在 IP 数据报中，发往组播地址 224.0.0.5。IP 数据报首部中的协议号字段的取值为 89，表明 IP 数据报的数据载荷为 OSPF 分组。</li>
<li>运行 OSPF 协议的路由器有 3 张表，邻居表、链路状态表和路由表。</li>
</ul>
<h5 id="ospf-划分区域"><a class="anchor" href="#ospf-划分区域">#</a> OSPF 划分区域</h5>
<ul>
<li>为了使 OSPF 能够用于规模很大的网络，OSPF 将一个自治系统再划分为若干个更小的范围，叫作区域。</li>
<li>每一个区域都有一个 32 位的区域标识符（用<strong>点分十进制</strong>表示）。</li>
<li>区域也不能太大，在一个区域内的路由器最好不超过 200 个。</li>
</ul>
<h5 id="ospf-分组"><a class="anchor" href="#ospf-分组">#</a> OSPF 分组</h5>
<p><img loading="lazy" data-src="https://blog.ivansnow02.xyz/blog-img/images/computer-network/310c2c3bc38e04d9bd22d9d6ff5dbcd89227036ca2626368c0a4f44435136b8f.png" alt="图 14"></p>
<h5 id="ospf-的优缺点"><a class="anchor" href="#ospf-的优缺点">#</a> OSPF 的优缺点</h5>
<ul>
<li>当互联网规模很大时，OSPF  协议要比距离向量协议 RIP 好得多。</li>
<li>OSPF 没有 “坏消息传播得慢” 的问题</li>
</ul>
<h4 id="边界网关协议-bgp"><a class="anchor" href="#边界网关协议-bgp">#</a> 边界网关协议 BGP</h4>
<h5 id="bgp-协议的特点"><a class="anchor" href="#bgp-协议的特点">#</a> BGP 协议的特点</h5>
<ul>
<li>使用 TCP 协议</li>
<li>交换路由信息的结点数量级是自治系统数的量级：少。</li>
<li>每一个自治系统中 BGP 发言人的数目是很少的：自治系统之间的路由选择不致过分复杂。</li>
<li>BGP 支持 CIDR，：路由表包括目的网络前缀、下一跳路由器，以及到达该目的网络所要经过的各个自治系统序列。</li>
<li>在 BGP 刚刚运行时，BGP 的邻站是交换整个的 BGP 路由表。但以后只需要在发生变化时更新有变化的部分：节省网络带宽和路由器的处理开销</li>
</ul>
<h3 id="网际控制报文协议-icmp"><a class="anchor" href="#网际控制报文协议-icmp">#</a> 网际控制报文协议 ICMP</h3>
<h4 id="icmp-的基本概念"><a class="anchor" href="#icmp-的基本概念">#</a> ICMP 的基本概念</h4>
<ul>
<li>为了更有效地转发 IP 数据报以及提高 IP 数据报交付成功的机会，TCP/IP 体系结构的网际层使用了网际控制报文协议（Internet Control Message Protocol，ICMP）[RFC 792]。</li>
<li>主机或路由器使用 ICMP 来发送差错报告报文和询问报文。</li>
<li>ICMP 报文被封装在<strong> IP 数据报</strong>中发送。</li>
</ul>
<h4 id="icmp-报文格式"><a class="anchor" href="#icmp-报文格式">#</a> ICMP 报文格式</h4>
<p><img loading="lazy" data-src="https://blog.ivansnow02.xyz/blog-img/images/computer-network/a605e63a0a67d7a4569303e68c83996d8bc10e7de48cb8366038dbfe763db6ee.png" alt="图 15"></p>
<h4 id="icmp-报文种类"><a class="anchor" href="#icmp-报文种类">#</a> ICMP 报文种类</h4>
<ul>
<li>差错报告报文
<ul>
<li>终点不可达</li>
<li>源点抑制：网络拥塞，控制流量。</li>
<li>时间超过 ：类型字段值为 11，代码字段值为 0 表示传输超时，代码字段值为 1 表示分段重组超时。</li>
<li>参数问题：参数不正确，丢弃此数据报，同时发送此报文给源点。</li>
<li>改变路由（重定向）: 通知主机下次发送数据报到别的路由器。</li>
</ul>
</li>
<li>询问报文
<ul>
<li>回显请求和回显应答：用于测试网络连接。</li>
<li>时间戳请求和时间戳应答：用于测试网络连接。</li>
</ul>
</li>
</ul>
<div class="note info">
<p>不应发送 ICMP 差错报告报文的几种情况</p>
<ul>
<li>ICMP 差错报告报文</li>
<li>第一个分片的数据报片的所有后续数据报片</li>
<li>具有多播地址的数据报</li>
<li>具有特殊地址（如 127.0.0.0 或 0.0.0.0）的数据报</li>
</ul>
</div>
<h3 id="虚拟专用网-vpn和网络地址转换-nat"><a class="anchor" href="#虚拟专用网-vpn和网络地址转换-nat">#</a> 虚拟专用网 VPN 和网络地址转换 NAT</h3>
<h4 id="vpn"><a class="anchor" href="#vpn">#</a> VPN</h4>
<h5 id="本地地址与全球地址"><a class="anchor" href="#本地地址与全球地址">#</a> 本地地址与全球地址</h5>
<ul>
<li>本地地址 —— 仅在机构内部使用的 IP 地址，可以由本机构自行分配，而不需要向互联网的管理机构申请。</li>
<li>全球地址 —— 全球唯一的 IP 地址，必须向互联网的管理机构申请。</li>
</ul>
<h5 id="vpn-的基本概念"><a class="anchor" href="#vpn-的基本概念">#</a> VPN 的基本概念</h5>
<ul>
<li>专用地址块：
<ul>
<li>A 类：10.0.0.0 ~ 10.255.255.255</li>
<li>B 类：172.16.0.0 ~ 172.31.255.255</li>
<li>C 类：192.168.0.0 ~ 192.168.255.255</li>
</ul>
</li>
<li>采用这样的专用 IP 地址的互连网络称为专用互联网或本地互联网，或更简单些，就叫作专用网。</li>
<li>因为这些专用地址仅在本机构内部使用。专用 IP 地址也叫作可重用地址 (reusable address)。</li>
<li>利用公用的互联网作为本机构各专用网之间的通信载体：虚拟专用网 VPN (Virtual Private Network)。</li>
<li>为本机构的主机用于机构内部的通信</li>
<li>并没有真正使用通信专线</li>
<li>由部门 A 和 B 的内部网络所构成的虚拟专用网 VPN 又称为<strong>内联网</strong> (intranet)，表示部门 A 和 B 都是在同一个机构的内部。</li>
<li>一个机构和某些外部机构共同建立的虚拟专用网 VPN 又称为<strong>外联网</strong> (extranet)</li>
</ul>
<h4 id="nat"><a class="anchor" href="#nat">#</a> NAT</h4>
<h5 id="nat-的基本概念"><a class="anchor" href="#nat-的基本概念">#</a> NAT 的基本概念</h5>
<ul>
<li>需要在专用网连接到互联网的路由器上安装 NAT 软件。装有 NAT 软件的路由器叫作 NAT 路由器，它<strong>至少有一个有效的外部全球 IP 地址</strong>。</li>
<li>所有使用本地地址的主机在和外界通信时，都要在 NAT 路由器上<strong>将其本地地址转换成全球 IP 地址</strong>，才能和互联网连接。</li>
</ul>
<h5 id="网络地址转换的过程"><a class="anchor" href="#网络地址转换的过程">#</a> 网络地址转换的过程</h5>
<ul>
<li>内部主机 A 用本地地址 IPA 和互联网上主机 B 通信所发送的数据报必须经过 NAT 路由器。</li>
<li>NAT 路由器将数据报的源地址 IPA 转换成全球地址 IPG，并把转换结果记录到 NAT 地址转换表中，目的地址 IPB 保持不变，然后发送到互联网。</li>
<li>NAT 路由器收到主机 B 发回的数据报时，知道数据报中的源地址是 IPB 而目的地址是 IPG。</li>
<li>根据 NAT 转换表，NAT 路由器将目的地址 IPG 转换为 IPA，转发给最终的内部主机 A。</li>
</ul>
<p><img loading="lazy" data-src="https://blog.ivansnow02.xyz/blog-img/images/computer-network/5ad7bb95543d11dda3bd23113dc2756e24dfcd001791ef88295f6312d27bb4c7.png" alt="图 16"></p>
<div class="note info">
<p>可以看出，在内部主机与外部主机通信时，在 NAT 路由器上发生了两次地址转换：</p>
<ol>
<li>离开专用网时：替换源地址，将内部地址替换为全球地址；</li>
<li>进入专用网时：替换目的地址，将全球地址替换为内部地址；</li>
</ol>
</div>
<h5 id="nat-的特点"><a class="anchor" href="#nat-的特点">#</a> NAT 的特点</h5>
<ul>
<li>当 NAT 路由器具有 n 个全球 IP 地址时，专用网内最多可以同时有 n 台主机接入到互联网。</li>
<li>通过 NAT 路由器的通信必须由专用网内的主机发起。专用网内部的主机不能充当服务器用</li>
</ul>
<h5 id="网络地址与端口转换-napt"><a class="anchor" href="#网络地址与端口转换-napt">#</a> 网络地址与端口转换 NAPT</h5>
<p>使多个拥有本地地址的主机，共用一个 NAT 路由器上的全球 IP 地址</p>
<h3 id="ipv6"><a class="anchor" href="#ipv6">#</a> IPv6</h3>
<h4 id="ipv6-的首部"><a class="anchor" href="#ipv6-的首部">#</a> IPv6 的首部</h4>
<h5 id="ipv6-基本首部"><a class="anchor" href="#ipv6-基本首部">#</a> IPv6 基本首部</h5>
<p><img loading="lazy" data-src="https://blog.ivansnow02.xyz/blog-img/images/computer-network/138590c91a97fadc5f82aff40c58917ddd84bda0e54933f073cdc299614378c2.png" alt="图 17"></p>
<ul>
<li>版本 (version)—— 4 位。它指明了协议的版本，对 IPv6 该字段总是 6。</li>
<li>通信量类 (traffic class)—— 8 位。这是为了区分不同的 IPv6 数据报的类别或优先级。目前正在进行不同的通信量类性能的实验。</li>
<li>流标号 (flow label)—— 20 位。 “流” 是互联网络上从特定源点到特定终点的一系列数据报， “流” 所经过的路径上的路由器都保证指明的服务质量。所有属于同一个流的数据报都具有同样的流标号。</li>
<li>有效载荷长度 (payload length)—— 16 位。它指明 IPv6 数据报除基本首部以外的字节数（所有扩展首部都算在有效载荷之内），其最大值是 64 KB。</li>
<li>下一个首部 (next header)—— 8 位。它相当于 IPv4 的协议字段或可选字段。</li>
<li>跳数限制 (hop limit)—— 8 位。源站在数据报发出时即设定跳数限制。路由器在转发数据报时将跳数限制字段中的值减 1。<br>
当跳数限制的值为零时，就要将此数据报丢弃。</li>
</ul>
<div class="note info">
<ul>
<li>IPv6 将首部长度变为固定的 40 字节，称为基本首部。</li>
<li>把首部中不必要的功能取消了，使得 IPv6 首部的字段数减少到只有 8 个。</li>
<li>IPv6 对首部中的某些字段进行了如下的更改：
<ul>
<li>取消了首部长度字段，因为首部长度是固定的 40 字节；</li>
<li>取消了服务类型字段；</li>
<li>取消了总长度字段，改用有效载荷长度字段；</li>
<li>把 TTL 字段改称为跳数限制字段；</li>
<li>取消了协议字段，改用下一个首部字段；</li>
<li>取消了检验和字段；</li>
<li>取消了选项字段，而用扩展首部来实现选项功能。</li>
</ul>
</li>
</ul>
</div>
<h5 id="ipv6-的扩展首部"><a class="anchor" href="#ipv6-的扩展首部">#</a> IPv6 的扩展首部</h5>
<p>IPv6 把原来 IPv4 首部中选项的功能都放在扩展首部中，并将扩展首部留给路径两端的源站和目的站的主机来处理。</p>
<p>数据报途中经过的路由器都不处理这些扩展首部（只有一个首部例外，即逐跳选项扩展首部）。</p>
<p>这样就大大<strong>提高了路由器的处理效率</strong>。</p>
<h4 id="ipv6-的地址"><a class="anchor" href="#ipv6-的地址">#</a> IPv6 的地址</h4>
<h5 id="ipv6-地址的分类"><a class="anchor" href="#ipv6-地址的分类">#</a> IPv6 地址的分类</h5>
<ul>
<li>单播 (unicast)：传统的点对点通信。</li>
<li>多播 (multicast)：一点对多点的通信。</li>
<li>任播 (anycast)：这是 IPv6 增加的一种类型。任播的目的站是一组计算机，但数据报在交付时只交付其中的一个，通常是距离最近的一个。</li>
</ul>
<h5 id="ipv6-地址的表示"><a class="anchor" href="#ipv6-地址的表示">#</a> IPv6 地址的表示</h5>
<ul>
<li>地址长度：IPv6 地址的长度是 128 位，是 IPv4 地址长度的 4 倍。</li>
<li>在十六进制记法中，允许把数字前面的 0 省略。例如把 0000 中的前三个 0 省略，写成 1 个 0。</li>
<li>冒号十六进制记法可以允许零压缩 (zero compression)，即一连串连续的零可以为一对冒号所取代。<strong>在任一地址中只能使用一次零压缩。</strong></li>
</ul>
<h5 id="ipv6-地址的类型"><a class="anchor" href="#ipv6-地址的类型">#</a> IPv6 地址的类型</h5>
<table>
<thead>
<tr>
<th>地址类型</th>
<th>前缀</th>
</tr>
</thead>
<tbody>
<tr>
<td>未指明地址</td>
<td>::/128</td>
</tr>
<tr>
<td>回环地址</td>
<td>::1/128</td>
</tr>
<tr>
<td>链路本地地址</td>
<td>FE80::/10</td>
</tr>
<tr>
<td>多播地址</td>
<td>FF00::/8</td>
</tr>
<tr>
<td>全球单播地址</td>
<td>其他</td>
</tr>
</tbody>
</table>
<h4 id="从-ipv4-到-ipv6"><a class="anchor" href="#从-ipv4-到-ipv6">#</a> 从 IPv4 到 IPv6</h4>
<h5 id="双协议栈"><a class="anchor" href="#双协议栈">#</a> 双协议栈</h5>
<p>在完全过渡到 IPv6 之前，使一部分主机（或路由器）装有两个协议栈，一个 IPv4 和一个 IPv6。<br>
双协议栈的主机（或路由器）记为 IPv6/IPv4，同时具有两种 IP 地址：一个 IPv6 地址和一个 IPv4 地址。<br>
根据 DNS 返回的地址类型可以确定使用 IPv4 地址还是 IPv6 地址。</p>
<h5 id="隧道技术"><a class="anchor" href="#隧道技术">#</a> 隧道技术</h5>
<p>在 IPv6 数据报要进入 IPv4 网络时，<br>
把 IPv6 数据报封装成为 IPv4 数据报，整个的 IPv6 数据报变成了 IPv4 数据报的数据部分。<br>
当 IPv4 数据报离开 IPv4 网络中的隧道时，<br>
再把数据部分（即原来的 IPv6 数据报）交给主机的 IPv6 协议栈。</p>
<h2 id="传输层"><a class="anchor" href="#传输层">#</a> 传输层</h2>
<h3 id="传输层的基本概念"><a class="anchor" href="#传输层的基本概念">#</a> 传输层的基本概念</h3>
<h4 id="传输层的主要功能"><a class="anchor" href="#传输层的主要功能">#</a> 传输层的主要功能</h4>
<ul>
<li>运输层为应用进程之间提供端到端的逻辑通信（但网络层是为主机之间提供逻辑通信）：端口的复用和分用。</li>
<li>运输层还要对收到的报文进行差错检测。</li>
<li>运输层提供面向连接和无连接的服务。</li>
</ul>
<h4 id="传输层的两个主要协议"><a class="anchor" href="#传输层的两个主要协议">#</a> 传输层的两个主要协议</h4>
<h5 id="tcp"><a class="anchor" href="#tcp">#</a> TCP</h5>
<p>传输控制协议（Transmission Control Protocol，TCP）为其上层提供的是面向连接的可靠的数据传输服务<br>
使用 TCP 通信的双方，在传送数据之前必须首先建立 TCP 连接（逻辑连接，而非物理连接）。数据传输结束后必须要释放 TCP 连接。<br>
TCP 为了实现可靠传输，就必须使用很多措施，例如 TCP 连接管理、确认机制、超时重传、流量控制以及拥塞控制等。<br>
TCP 的实现复杂，TCP 报文段的首部比较大，占用处理机资源比较多。</p>
<h5 id="udp"><a class="anchor" href="#udp">#</a> UDP</h5>
<p>用户数据报协议（User Datagram Protocol，UDP）为其上层提供的是无连接的不可靠的数据传输服务。<br>
使用 UDP 通信的双方，在传送数据之前不需要建立连接。<br>
UDP 不需要实现可靠传输，因此不需要使用实现可靠传输的各种机制。<br>
UDP 的实现简单，UDP 用户数据报的首部比较小。</p>
<h4 id="传输层的端口"><a class="anchor" href="#传输层的端口">#</a> 传输层的端口</h4>
<p>TCP/IP 体系结构的运输层使用端口号来标识和区分应用层的不同应用进程。端口号的长度为 16 比特，取值范围是 0~65535。<br>
端口就是运输层服务访问点 TSAP。<br>
软件端口：TCPIP 协议中的端口，它是一种抽象的软件结构，包括一些数据结构和 I/O 缓冲区。<br>
端口的<strong>作用</strong>就是让应用层的各种应用进程都能将其数据通过端口向下交付给运输层，以及让运输层知道应当将其报文段中的数据向上通过端口交付给应用层相应的进程。</p>
<div class="note warning">
<p>软件端口与硬件端口</p>
<ul>
<li>在协议栈层间的抽象的协议端口是软件端口。</li>
<li>路由器或交换机上的端口是硬件端口。</li>
<li>硬件端口是不同硬件设备进行交互的接口，而软件端口是应用层的<strong>各种协议进程与运输实体进行层间交互的一种地址</strong>。</li>
</ul>
</div>
<h5 id="端口分类"><a class="anchor" href="#端口分类">#</a> 端口分类</h5>
<ul>
<li>熟知端口：0~1023，是系统端口，由 IANA（互联网数字分配机构）指定，用于知名服务。</li>
<li>登记端口：1024~49151，是用户端口，用于一些注册的服务。</li>
<li>短暂端口：49152~65535，是私有端口，用于动态分配。</li>
</ul>
<h5 id="服务和端口的关系"><a class="anchor" href="#服务和端口的关系">#</a> 服务和端口的关系</h5>
<p>客户端通过 IP 地址定位服务器，通过协议和端口号定位服务器上的服务。<br>
客户端软件可以同时访问多个服务器上的服务，客户端会为每个出去的流量分配一个唯一的原端口</p>
<h4 id="发送方的复用和接收方的分用"><a class="anchor" href="#发送方的复用和接收方的分用">#</a> 发送方的复用和接收方的分用</h4>
<p><img loading="lazy" data-src="https://blog.ivansnow02.xyz/blog-img/images/computer-network/0775d83fcec54ea32a684c27739009b57f116946c76ac4b5d77ad517e1fb1bf3.png" alt="图 18"></p>
<h3 id="用户数据报协议-udp"><a class="anchor" href="#用户数据报协议-udp">#</a> 用户数据报协议 UDP</h3>
<h4 id="udp-概述"><a class="anchor" href="#udp-概述">#</a> UDP 概述</h4>
<ul>
<li>UDP 只在 IP 的数据报服务之上增加了很少一点的功能：
<ul>
<li>复用和分用的功能</li>
<li>差错检测的功能</li>
</ul>
</li>
</ul>
<h4 id="udp-的特点"><a class="anchor" href="#udp-的特点">#</a> UDP 的特点</h4>
<ul>
<li>UDP 是无连接的，即发送数据之前不需要建立连接。</li>
<li>UDP 是不可靠的，即不保证数据传输的可靠性。</li>
<li>UDP 是面向报文的，即应用程序交给 UDP 多长的报文，UDP 就照样发送，<strong>不合并，也不拆分</strong>。</li>
<li>UDP 没有拥塞控制，因此网络出现拥塞时，UDP 的性能会急剧下降。</li>
<li>UDP 支持一对一、一对多、多对一和多对多的交互通信。</li>
<li>UDP 的首部开销小，只有 8 个字节，比 TCP 的首部开销要小很多。<br>
<img loading="lazy" data-src="https://blog.ivansnow02.xyz/blog-img/images/computer-network/56a3374048ac401cf60d81fd379a569ac5013b9223874f870d584d620f81ed2d.png" alt="图 19"></li>
</ul>
<h4 id="udp-的首部格式"><a class="anchor" href="#udp-的首部格式">#</a> UDP 的首部格式</h4>
<p><img loading="lazy" data-src="https://blog.ivansnow02.xyz/blog-img/images/computer-network/c1c8c84a4ec283407417bd90a735d638cd6b09483dd08fbad5d7c885f020b49a.png" alt="图 20"></p>
<h3 id="传输控制协议-tcp"><a class="anchor" href="#传输控制协议-tcp">#</a> 传输控制协议 TCP</h3>
<h4 id="tcp-的特点"><a class="anchor" href="#tcp-的特点">#</a> TCP 的特点</h4>
<ul>
<li>TCP 是面向连接的运输层协议，提供可靠交付的服务。</li>
<li>TCP 提供<strong>全双工</strong>通信。</li>
<li>面向字节流
<ul>
<li>TCP 中的 “流”（stream）指的是流入或流出进程的字节序列。</li>
<li>“面向字节流” 的含义是：虽然应用程序和 TCP 的交互是一次一个数据块，但 TCP 把应用程序交下来的数据看成仅仅是一连串无结构的字节流。</li>
<li>TCP 不保证接收方应用程序所收到的数据块和发送方应用程序所发出的数据块具有对应大小的关系。</li>
</ul>
</li>
</ul>
<p><img loading="lazy" data-src="https://blog.ivansnow02.xyz/blog-img/images/computer-network/ebcb60802b5a0dcb3eddf046ef4e6f17bedf5aa6fc0e9d4242bd41399b253a7e.png" alt="图 21"></p>
<div class="note info">
<p>TCP 的数据编号与确认</p>
<ul>
<li>TCP 协议是面向字节的。TCP 将所要传送的报文看成是字节组成的数据流，并使每一个字节对应于一个序号。</li>
<li>在连接建立时，双方要商定初始序号。<strong>序号字段</strong>：该报文段中的数据部分的第一个字节的序号。</li>
<li>TCP 的确认是对接收到的数据的最高序号表示确认。<strong>确认号</strong>：已收到的数据的最高序号加 1。<strong>接收端期望下次收到的数据中的第一个数据字节的序号</strong>。</li>
</ul>
</div>
<div class="note info">
<p>解决重复帧的问题<br>
使每一个数据帧带上不同的发送序号。每发送一个新的数据帧就把它的发送序号加 1。若结点 B 收到发送序号相同的数据帧，就表明出现了重复帧。但此时结点  B 还必须向 A 发送确认帧 ACK，因为 B 已经知道 A 还没有收到上一次发过去的确认帧<br>
 ACK。</p>
</div>
<h4 id="tcp-的连接"><a class="anchor" href="#tcp-的连接">#</a> TCP 的连接</h4>
<p>每一条 TCP 连接有两个端点<br>
 TCP 连接的端点叫做套接字（socket）。<br>
套接字：端口号拼接到 IP 地址， <code>socket = (IP地址:端口号)</code> 。</p>
<h5 id="tcp-的首部格式"><a class="anchor" href="#tcp-的首部格式">#</a> TCP 的首部格式</h5>
<p><img loading="lazy" data-src="https://blog.ivansnow02.xyz/blog-img/images/computer-network/60f63e135127e9ec102239cd5b054244153e06bd4ea6faf7f71312399a2ab2b2.png" alt="图 22"></p>
<ul>
<li>源端口号和目的端口号：用于标识发送端和接收端的应用进程。</li>
<li>序号：占 32 比特，取值范围 0~2<sup>32</sup>-1。当序号增加到最后一个时，下一个序号又回到 0。用来指出本 TCP 报文段数据载荷的第一个字节的序号。</li>
<li>确认号：占 32 比特，取值范围 0~2<sup>32</sup>-1。只有当  <code>ACK=1</code>  时，确认号字段才有效。确认号表示期望收到对方下一个报文段的第一个数据字节的序号。</li>
<li><code>ACK</code> ：占 1 比特，表示确认号字段有效。当  <code>ACK=1</code>  时，确认号字段有效，当  <code>ACK=0</code>  时，确认号无效，不能用来确认报文段。<strong>在 TCP 连接建立后，所有传送的 TCP 报文段都必须把 <code>ACK</code>  置 1</strong></li>
<li>数据偏移：占 4 比特，指出 TCP 报文段的数据起始位置距离 TCP 报文段的起始位置有多远，实际上指出了 TCP 报文段的<strong>首部长度</strong></li>
<li>保留：占 6 比特，保留为将来使用，目前未使用。</li>
<li>窗口：占 16 比特，取值范围 0~2<sup>16</sup>-1。窗口字段用来指出还能接收多少<strong>字节</strong>的数据，指出发送本报文段的一方的接收窗口的大小，即<strong>接收缓存的可用空间</strong>大小，这用来表征<strong>接收方的接收能力</strong>。</li>
<li>校验和：占 16 比特，用来检验 TCP 报文段在传输过程中是否发生了改动或出错。</li>
<li><code>SYN</code> ：占 1 比特，用来建立连接。当  <code>SYN=1</code>  且  <code>ACK=0</code>  时，表明这是一个 TCP 连接请求报文段。对方若同意建立连接，则应在响应的 TCP 报文段的首部中使  <code>SYN=1</code>  且  <code>ACK=1</code>  。综上所述， <code>SYN</code>  为 1 的 TCP 报文段要么是一个连接请求报文段，要么是一个连接响应报文段。</li>
<li><code>FIN</code> ：占 1 比特，用来释放连接。当  <code>FIN=1</code>  时，表明此报文段的发送方的数据已经发送完毕，并要求释放连接。</li>
<li><code>RST</code> ：占 1 比特，用来复位连接。当  <code>RST=1</code>  时，表明 TCP 连接出现严重问题，要求对方重新建立连接，还用来拒绝一个非法的 TCP 报文段或拒绝打开一个 TCP 连接</li>
<li><code>PSH</code> ：占 1 比特，发送方 TCP 把 <code>PSH</code>  置 1，并立即创建一个 TCP 报文段发送出去，而不需要积累到足够多的数据再发送。接收方 TCP 收到 <code>PSH</code>  为 1 的 TCP 报文段，就尽快地交付给应用进程，而不再等到接收到足够多的数据才向上交付。</li>
<li><code>URG</code> ：占 1 比特，表示紧急指针字段有效。当  <code>URG=1</code>  时，表明紧急指针字段有效，紧急指针指出的是紧急数据的最后一个字节的序号。</li>
<li>紧急指针：占 16 比特，只有当  <code>URG=1</code>  时，紧急指针才有效。紧急指针指出的是紧急数据的最后一个字节的序号。紧急数据是指在正常数据传送过程中，突然出现的一些重要数据，这些数据要优先传送，而不受前面数据的影响。</li>
<li>选项：占 0~320 比特（40 字节），可选字段，用来对 TCP 报文段进行扩充，如时间戳、最大报文段长度等。
<ul>
<li>最大报文段长度 MSS 选项：指出 TCP 报文段数据载荷部分的最大长度，而不是整个 TCP 报文段的长度。</li>
<li>窗口扩大选项：用来扩大窗口，提高吞吐率。</li>
<li>时间戳选项：
<ul>
<li>用于计算往返时间 RTT</li>
<li>用于处理序号超范围的情况，又称为防止序号绕回 PAWS。</li>
</ul>
</li>
<li>选择确认选项：用来实现选择确认功能。</li>
</ul>
</li>
<li>填充：用来填充 TCP 报文段，使 TCP 报文段的数据部分的长度为 4 字节的整数倍。</li>
</ul>
<h3 id="可靠传输"><a class="anchor" href="#可靠传输">#</a> 可靠传输</h3>
<h4 id="停止等待协议"><a class="anchor" href="#停止等待协议">#</a> 停止等待协议</h4>
<p><img loading="lazy" data-src="https://blog.ivansnow02.xyz/blog-img/images/computer-network/2b77ac574f869f1e6724e9ac415e5bb8a477b207bf4ad716d0c534c4fb3f1ce8.png" alt="图 23"></p>
<ul>
<li>接收方收不到数据分组，就不会发送相应的 ACK 或 NAK。</li>
<li>如果不采取措施，发送方就会一直处于等待接收方 ACK 或 NAK 的状态。</li>
<li>为解决上述问题，发送方可在每发送完一个数据分组时就启动一个超时计时器（Timeout Timer）。一般可将超时重传时间 RTO 设置为<strong>略大于</strong>收发双方的平均往返时间 RTT。</li>
<li>若到了超时计时器所设置的超时重传时间 （Retransmission Time-Out, RTO），但发送方仍未收到</li>
<li>接收方的 ACK 或 NAK，就重传之前已发送过的数据分组。</li>
<li>为了避免分组重复这种传输错误，必须给每个分组带上序号。</li>
<li>对于停止 - 等待协议，由于每发送一个数据分组就停止等待，只要保证每发送一个新的数据分组，其序号与上次发送的数据分组的序号不同就可以了，因此用一个比特来编号就够了，序号有 0 和 1 这两个。</li>
</ul>
<div class="note warning">
<ul>
<li>使用超时重传机制后，就可以不使用否认机制了，这样可使协议实现起来更加简单。但是，如果点对点链路的误码率较高，使用否认机制可以使发送方在超时计时器超时前就尽快重传。</li>
<li>为了让接收方能够判断所收到的数据分组是否是重复的，需要给数据分组编号。由于停止。等待协议的特性，只需 1 个比特编序号即可，即序号 0 和序号 1。</li>
<li>为了让发送方能够判断所收到的确认分组是否是重复的，需要给确认分组编号，所用比特数量与数据分组所用比特数量一样。</li>
<li>给超时计时器设置的超时重传时间 RTO 应当仔细选择，一般将 RTO 设置为略大于收发双方的平均往返时间 RTT。</li>
<li>停止等待协议属于自动请求重传（Automatic Repeat reQuest,ARQ）协议。即重传的请求是发送方自动进行的，而不是接收方请求发送方重传某个误码的数据分组。</li>
</ul>
</div>
<h5 id="停止等待协议的信道利用率"><a class="anchor" href="#停止等待协议的信道利用率">#</a> 停止等待协议的信道利用率</h5>
<p><img loading="lazy" data-src="https://blog.ivansnow02.xyz/blog-img/images/computer-network/27956c05962143ebdc18ab389dc3e39a817f4a28dbc5a0143aa093dcad6bcfb6.png" alt="图 25"></p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext>信道利用率</mtext><mi>U</mi><mo>=</mo><mfrac><msub><mi>T</mi><mi>D</mi></msub><mrow><msub><mi>T</mi><mi>D</mi></msub><mo>+</mo><mi>R</mi><mi>T</mi><mi>T</mi><mo>+</mo><msub><mi>T</mi><mi>A</mi></msub></mrow></mfrac></mrow><annotation encoding="application/x-tex">\text{信道利用率} U = \frac{T_D}{T_D + RTT + T_A}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord text"><span class="mord cjk_fallback">信道利用率</span></span><span class="mord mathnormal" style="margin-right:0.10903em;">U</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.1963em;vertical-align:-0.836em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3603em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">D</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">RTT</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">A</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">D</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.836em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p>
<ul>
<li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>T</mi><mi>D</mi></msub></mrow><annotation encoding="application/x-tex">T_D</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">D</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>：数据分组传输时间</li>
<li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi><mi>T</mi><mi>T</mi></mrow><annotation encoding="application/x-tex">RTT</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">RTT</span></span></span></span>：往返时间</li>
<li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>T</mi><mi>A</mi></msub></mrow><annotation encoding="application/x-tex">T_A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">A</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>：确认分组传输时间</li>
</ul>
<h4 id="回退n帧协议"><a class="anchor" href="#回退n帧协议">#</a> 回退 N 帧协议</h4>
<ul>
<li>回退 N 帧协议是一种滑动窗口协议，它允许发送方连续发送 N 个数据分组，而不必等待接收方的确认。</li>
</ul>
<p><img loading="lazy" data-src="https://blog.ivansnow02.xyz/blog-img/images/computer-network/486946613a38803027b5211034f7f1d5778cef7637b87adf1f6da0be60f2a9b0.png" alt="图 26"></p>
<ul>
<li>发送方需要维护一个发送窗口 W<sub>T</sub> ，在未收到接收方确认分组的情况下，发送方可将序号落入 W<sub>T</sub> 内的所有数据分组连续发送出去，W<sub>T</sub> 的范围是 (0, 2<sup>N</sup>-1]。</li>
<li>接收方需要维护一个接收窗口 W<sub>R</sub> ，只有正确到达接收方（无误码）且序号落入 W<sub>R</sub> 内的数据分组才被接收方接收，W<sub>R</sub> 的值为 1。</li>
<li>接收方每正确收到一个序号落入接收窗口的数据分组，就将接收窗口向前滑动一个位置，这样就有一个新的序号落入接收窗口。与此同时，接收方还要给发送方发送针对该数据分组的确认分组。</li>
<li>发送方每收到一个按序确认的确认分组，就将发送窗口向前滑动一个位置，这样就有一个新的序号落入发送窗口，序号落入发送窗口内的数据分组可继续被发送。</li>
<li>在回退 N 帧协议的工作过程中，发送方的发送窗口和接收方的接收窗口按上述规则不断向前滑动。因此，这类协议又称为滑动窗口协议。</li>
<li>回退 N 帧协议的接收方采用<strong>累积确认方式</strong>
<ul>
<li>接收方不必对收到的每一个数据分组都发送一个确认分组，而是可以在收到几个序号连续的数据分组后，对按序到达的最后一个数据分组发送确认分组</li>
<li>确认分组 ACKn 表明序号为 n 及之前的所有数据分组都已正确接收。</li>
</ul>
</li>
</ul>
<h4 id="选择重传协议"><a class="anchor" href="#选择重传协议">#</a> 选择重传协议</h4>
<p>用 n 个比特来编号数据分组，发送窗口 W<sub>T</sub> 和接收窗口 W<sub>R</sub> 的关系为</p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mrow><mtable rowspacing="0.36em" columnalign="left left" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>1</mn><mo>&lt;</mo><msub><mi>W</mi><mi>R</mi></msub><mo>≤</mo><msub><mi>W</mi><mi>T</mi></msub></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><msub><mi>W</mi><mi>T</mi></msub><mo>+</mo><msub><mi>W</mi><mi>R</mi></msub><mo>≤</mo><msup><mn>2</mn><mi>n</mi></msup></mrow></mstyle></mtd></mtr></mtable><mo fence="true">}</mo></mrow><mn>1</mn><mo>≤</mo><msub><mi>W</mi><mi>R</mi></msub><mo>≤</mo><msup><mn>2</mn><mi>n</mi></msup></mrow><annotation encoding="application/x-tex">\begin{rcases}
1 &lt; W_R \leq W_T \\
W_T + W_R \leq 2^n
\end{rcases} 1 \leq W_R \leq 2^n
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:3em;vertical-align:-1.25em;"></span><span class="minner"><span class="mopen nulldelimiter"></span><span class="mord"><span class="mtable"><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.69em;"><span style="top:-3.69em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord">1</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.00773em;">R</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-2.25em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.00773em;">R</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.19em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size4">}</span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.00773em;">R</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7144em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7144em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span></span></span></span></span></p>
<p>发送方</p>
<ul>
<li>可在未收到接收方确认分组的情况下，将序号落入发送窗口内的多个数据分组全部发送出去。</li>
<li>只有按序收到对已发送数据分组的确认分组时，发送窗口才能向前滑动到相应位置。</li>
<li>如果收到未按序到达的确认分组，应对其进行记录，以防止其相应数据分组的超时重发，但发送窗口不能向前滑动。</li>
</ul>
<p>接收方</p>
<ul>
<li>可接收未按序到达但没有误码并且序号落入接收窗口内的数据分组。</li>
<li>为了使发送方仅重传出现差错的分组，接收方不再采用累积确认，而需要对每一个正确接收到的数据分组进行逐一确认。</li>
<li>只有在按序接收数据分组后，接收窗口才能向前滑动到相应位置。</li>
</ul>
<h3 id="tcp-的连接管理"><a class="anchor" href="#tcp-的连接管理">#</a> TCP 的连接管理</h3>
<p>TCP 的传输连接有三个阶段：</p>
<ol>
<li>通过 “三报文握手” 来建立 TCP 连接。</li>
<li>基于已建立的 TCP 连接进行可靠的数据传输。</li>
<li>在数据传输结束后，还要通过 “四报文挥手” 来释放 TCP 连接。</li>
</ol>
<h4 id="tcp-的连接建立"><a class="anchor" href="#tcp-的连接建立">#</a> TCP 的连接建立</h4>
<p>“三报文握手” 建立 TCP 连接的目的在于解决以下三个主要问题：</p>
<ol>
<li>使 TCP 双方能够确知对方的存在。</li>
<li>使 TCP 双方能够协商一些参数（例如最大报文段长度、最大窗口大小、时间戳选项等）。</li>
<li>使 TCP 双方能够对运输实体资源进行分配和初始化。运输实体资源包括缓存大小、各状态变量、连接表中的项目等。</li>
</ol>
<p><img loading="lazy" data-src="https://blog.ivansnow02.xyz/blog-img/images/computer-network/1f205eea86dbf075505a326fd226ec8d756679919a31d7bac6e4fbbf97eb21a2.png" alt="图 27"></p>
<ul>
<li>第一次握手：客户端发送一个带有 SYN=1、ACK=0、随机序号 X 的数据包到服务器，进入 SYN_SENT 状态。</li>
<li>第二次握手：服务器收到数据包后，返回一个带有 SYN=1、ACK=1、确认号为 X+1、随机序号 Y 的数据包给客户端，进入 SYN_RCVD 状态。</li>
<li>第三次握手：客户端收到数据包后，返回一个带有 SYN=0、ACK=1、确认号为 Y+1 的数据包给服务器，进入 ESTABLISHED 状态。</li>
<li>三次握手完成，TCP 连接建立。</li>
</ul>
<div class="note warning">
<p>采用 “三报文握手” 而不是 “两报文握手” 来建立 TCP 连接，是为了防止已失效的 TCP 连接请求报文段突然又传送到了 TCP 服务器进程，因而导致错误。</p>
</div>
<h4 id="tcp-的连接释放"><a class="anchor" href="#tcp-的连接释放">#</a> TCP 的连接释放</h4>
<p><img loading="lazy" data-src="https://blog.ivansnow02.xyz/blog-img/images/computer-network/55f3550ee1f2ea9cd653f1b783752239c3248115dbbf29438a75bf32cfb01b2e.png" alt="图 28"></p>
<ul>
<li>处于时间等待（TIME-WAIT）状态后要经过 2MSL 时长，可以确保 TCP 服务器进程能够收到最后一个 TCP 确认报文段而进入关闭（CLOSED）状态。</li>
<li>另外，TCP 客户进程在发送完最后一个 TCP 确认报文段后，再经过 2MSL 时长，就可以使本次连接持续时间内所产生的的所有报文段都从网络中消失。这样就可以使下一个新的 TCP 连接中不会出现旧连接中的报文段。</li>
</ul>
<div class="note info">
<p>TCP 保活计时器的作用</p>
<p><img loading="lazy" data-src="https://blog.ivansnow02.xyz/blog-img/images/computer-network/3e804c6935e281a34c1cfd6ccbd71196bd51939e2b463f75387debabca142b19.png" alt="图 29"></p>
</div>
<h3 id="tcp-的流量控制"><a class="anchor" href="#tcp-的流量控制">#</a> TCP 的流量控制</h3>
<h4 id="tcp-的流量控制原理"><a class="anchor" href="#tcp-的流量控制原理">#</a> TCP 的流量控制原理</h4>
<ul>
<li>TCP 的流量控制是通过滑动窗口机制来实现的。</li>
<li>TCP 的接收方在接收到数据分组后，会向发送方发送一个确认分组，其中包含了接收窗口的大小。</li>
<li>发送方根据接收方发送的接收窗口大小来调整发送窗口的大小，以控制发送方发送数据的速率。</li>
</ul>
<div class="note info">
<p><img loading="lazy" data-src="https://blog.ivansnow02.xyz/blog-img/images/computer-network/034c62db5ce824e1fe50a3cc7c086afef5c2a48a3be766c2902021ae6fc4def6.png" alt="图 30"></p>
<p>为了打破由于非零窗口通知报文段丢失而引起的双方互相等待的死锁局面，TCP 为每一个连接都设有一个持续计时器。</p>
<ul>
<li>只要 TCP 连接的一方收到对方的零窗口通知，就启动持续计时器。</li>
<li>当持续计时器超时时，就发送一个零窗口探测报文段，仅携带 1 字节的数据。</li>
<li>对方在确认这个零窗口探测报文段时，给出自己现在的接收窗口值。</li>
<li>如果接收窗口值仍然是 0，那么收到这个报文段的一方就重新启动持续计时器。</li>
<li>如果接收窗口值不是 0，那么死锁的局面就可以被打破了。</li>
</ul>
</div>
<h3 id="tcp-的拥塞控制"><a class="anchor" href="#tcp-的拥塞控制">#</a> TCP 的拥塞控制</h3>
<p>在某段时间，若对网络中某一资源的需求超过了该资源所能提供的可用部分，网络性能就要变坏，这种情况就叫作拥塞（congestion）。</p>
<h4 id="流量控制与拥塞控制的区别"><a class="anchor" href="#流量控制与拥塞控制的区别">#</a> 流量控制与拥塞控制的区别</h4>
<ul>
<li>流量控制是以<strong>接收方的接收能力</strong>控制发送方（源点）的发送速率，只与特定的点对点通信的发送方和接收方之间的流量有关</li>
<li>拥塞控制是源点根据各方面因素，按拥塞控制算法<strong>自行控制发送速率</strong>，全局性问题，涉及网络中<strong>所有的主机、路由器</strong>等</li>
</ul>
<h4 id="tcp-的拥塞控制的基本方法"><a class="anchor" href="#tcp-的拥塞控制的基本方法">#</a> TCP 的拥塞控制的基本方法</h4>
<p><img loading="lazy" data-src="https://blog.ivansnow02.xyz/blog-img/images/computer-network/bb179f3842f01919590c1c63e833da90e81b15caa84be3cb838aaf9e910b4345.png" alt="图 34"></p>
<h5 id="慢开始算法"><a class="anchor" href="#慢开始算法">#</a> 慢开始算法</h5>
<p>由小到大逐渐增大拥塞窗口</p>
<ul>
<li>拥塞窗口 <code>cwnd</code>  的初始值为 1 个 <code>MSS</code></li>
<li>发送窗口 <code>swnd = min(cwnd, rwnd)</code></li>
<li><code>cwnd</code>  每次的增加量为 <code>min(N, MSS)</code> ,  <code>N</code>  为接收方返回确认报文段中确认的字节数</li>
<li>当 <code>cwnd</code>  达到一个阈值 <code>ssthresh</code>  时，进入拥塞避免阶段</li>
</ul>
<p><img loading="lazy" data-src="https://blog.ivansnow02.xyz/blog-img/images/computer-network/0e6fd5d42411a070ef285c6b955b673881e20c50af7f9d82be95b2950ead9219.png" alt="图 31"></p>
<h5 id="拥塞避免算法"><a class="anchor" href="#拥塞避免算法">#</a> 拥塞避免算法</h5>
<p><code>cwnd</code>  每次增加 1 个 <code>MSS</code></p>
<ul>
<li>重传计时器超时，判断网络可能出现了拥塞，进行调整：
<ul>
<li>将 ssthresh 值调整为发生拥塞时 cwnd 值的一半</li>
<li>将 cwnd 的值减小为 1，并重新开始执行慢开始算法。</li>
</ul>
</li>
</ul>
<p><img loading="lazy" data-src="https://blog.ivansnow02.xyz/blog-img/images/computer-network/3111c069d3d827fc3871231e131aa002ea5c449df3016d8ebe9e4aacc8d52cea.png" alt="图 32"></p>
<h5 id="快重传算法"><a class="anchor" href="#快重传算法">#</a> 快重传算法</h5>
<p>“快重传” 是指使发送方尽快（尽早）进行重传，而不是等重传计时器超时再重传。这就要求<strong>接收方</strong>不要等待自己发送数据时才进行捎带确认，而是要立即发送确认，即使收到了<strong>失序的报文段</strong>也要立即发出对已收到的报文段的重复确认。<strong>发送方</strong>一旦收到<strong> 3 个连续的重复确认</strong>，就将相应的报文段<strong>立即重传</strong>，而不是等该报文段的重传计时器超时再重传。</p>
<p><img loading="lazy" data-src="https://blog.ivansnow02.xyz/blog-img/images/computer-network/4eb37a33e11c661cf0f9c38caef54178d1dd7f8998f57f6e5698069950e7ac70.png" alt="图 33"></p>
<h5 id="快恢复算法"><a class="anchor" href="#快恢复算法">#</a> 快恢复算法</h5>
<p>与快重传算法配合使用的是快恢复算法，发送方一旦<strong>收到 3 个重复确认</strong>，就知道现在只是丢失了个别的报文段，于是不启动慢开始算法，而是执行快恢复算法。发送方将慢开始门限 <code>ssthresh</code>  的值和拥塞窗口 <code>cwnd</code>  的值都调整为当前 <code>cwnd</code>  值的<strong>一半</strong>，并开始执行拥塞避免算法。</p>
<p><img loading="lazy" data-src="https://blog.ivansnow02.xyz/blog-img/images/computer-network/17dd3e58c94e6f2b9528b8bb0c3863c275747e8ad405acc4cfb0e4a14adf3772.png" alt="图 35"></p>
<h3 id="tcp-的可靠传输"><a class="anchor" href="#tcp-的可靠传输">#</a> TCP 的可靠传输</h3>
<h4 id="以字节为单位的滑动窗口"><a class="anchor" href="#以字节为单位的滑动窗口">#</a> 以字节为单位的滑动窗口</h4>
<ul>
<li>发送方在没有收到接收方确认的情况下，可以把序号落入发送窗口内的数据依次全部发送出去。</li>
<li>凡是已经发送过的数据，在未收到确认之前都必须暂时保留，以便在超时重传时使用。</li>
<li>发送窗口并不总是和接收窗口一样大（因有一定的时间滞后）。</li>
<li>TCP 标准没有规定对不按序到达的数据应如何处理。通常是先临时存放在接收窗口中，等到字节流中所缺少的字节收到后，再按序交付上层的应用进程。</li>
<li>TCP 要求接收方必须有累积确认的功能，这样可以减小传输开销。</li>
</ul>
<h4 id="tcp-超时重传时间的选择"><a class="anchor" href="#tcp-超时重传时间的选择">#</a> TCP 超时重传时间的选择</h4>
<p>可以利用每次测量得到的 RTT 样本计算加权平均往返时间 RTTs，这样可以得到比较平滑的往返时间。</p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>R</mi><mi>T</mi><msub><mi>T</mi><msub><mi>S</mi><mn>1</mn></msub></msub><mo>=</mo><mi>R</mi><mi>T</mi><msub><mi>T</mi><mn>1</mn></msub><mspace linebreak="newline"></mspace><mi>R</mi><mi>T</mi><msub><mi>T</mi><mrow><mi>S</mi><mtext>&nbsp;new</mtext></mrow></msub><mo>=</mo><mo stretchy="false">(</mo><mn>1</mn><mo>−</mo><mi>α</mi><mo stretchy="false">)</mo><mo>×</mo><mi>R</mi><mi>T</mi><msub><mi>T</mi><mrow><mi>S</mi><mtext>&nbsp;old</mtext></mrow></msub><mo>+</mo><mi>α</mi><mo>×</mo><mi>R</mi><mi>T</mi><msub><mi>T</mi><mtext>&nbsp;sample</mtext></msub><mo separator="true">,</mo><mn>0</mn><mo>≤</mo><mi>α</mi><mo>≤</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">RTT_{S_1}=RTT_1\\
RTT_{S\text{ new}} = (1 - \alpha) \times RTT_{S\text{ old}} + \alpha \times RTT_{\text{ sample}}, 0 \leq \alpha \leq 1
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9334em;vertical-align:-0.2501em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">RT</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3173em;"><span style="top:-2.357em;margin-left:-0.0576em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2501em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">RT</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">RT</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05764em;">S</span><span class="mord text mtight"><span class="mord mtight">&nbsp;new</span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.0037em;">α</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">RT</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05764em;">S</span><span class="mord text mtight"><span class="mord mtight">&nbsp;old</span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal" style="margin-right:0.0037em;">α</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">RT</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">&nbsp;sample</span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">0</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7719em;vertical-align:-0.136em;"></span><span class="mord mathnormal" style="margin-right:0.0037em;">α</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span></span></p>
<ul>
<li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>α</mi></mrow><annotation encoding="application/x-tex">\alpha</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.0037em;">α</span></span></span></span>：加权因子，一般取值 0.125</li>
</ul>
<p>[RFC 6298] 建议使用下式来计算超时重传时间 RTO：</p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>R</mi><mi>T</mi><mi>O</mi><mo>=</mo><mi>R</mi><mi>T</mi><msub><mi>T</mi><mi>S</mi></msub><mo>+</mo><mn>4</mn><mo>×</mo><mi>R</mi><mi>T</mi><msub><mi>T</mi><mi>D</mi></msub><mspace linebreak="newline"></mspace><mi>R</mi><mi>T</mi><msub><mi>T</mi><msub><mi>D</mi><mn>1</mn></msub></msub><mo>=</mo><mi>R</mi><mi>T</mi><msub><mi>T</mi><mn>1</mn></msub><mo>÷</mo><mn>2</mn><mspace linebreak="newline"></mspace><mi>R</mi><mi>T</mi><msub><mi>T</mi><mrow><mi>D</mi><mtext>&nbsp;new</mtext></mrow></msub><mo>=</mo><mo stretchy="false">(</mo><mn>1</mn><mo>−</mo><mi>β</mi><mo stretchy="false">)</mo><mo>×</mo><mi>R</mi><mi>T</mi><msub><mi>T</mi><mrow><mi>D</mi><mtext>&nbsp;old</mtext></mrow></msub><mo>+</mo><mi>β</mi><mo>×</mo><mi mathvariant="normal">∣</mi><mi>R</mi><mi>T</mi><msub><mi>T</mi><mi>S</mi></msub><mo>−</mo><mi>R</mi><mi>T</mi><msub><mi>T</mi><mtext>&nbsp;sample</mtext></msub><mi mathvariant="normal">∣</mi><mo separator="true">,</mo><mn>0</mn><mo>≤</mo><mi>β</mi><mo>≤</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">RTO = RTT_{S} + 4 \times RTT_{D}\\
RTT_{D_1}=RTT_1 \div 2\\
RTT_{D\text{ new}} = (1 - \beta) \times RTT_{D\text{ old}} + \beta \times | RTT_S - RTT_{\text{ sample}} |, 0 \leq \beta \leq 1
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">RTO</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">RT</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05764em;">S</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">4</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">RT</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">D</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.9334em;vertical-align:-0.2501em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">RT</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3173em;"><span style="top:-2.357em;margin-left:-0.0278em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2501em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">RT</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">÷</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">2</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">RT</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">D</span><span class="mord text mtight"><span class="mord mtight">&nbsp;new</span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05278em;">β</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">RT</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">D</span><span class="mord text mtight"><span class="mord mtight">&nbsp;old</span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.05278em;">β</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">∣</span><span class="mord mathnormal" style="margin-right:0.13889em;">RT</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05764em;">S</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.0361em;vertical-align:-0.2861em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">RT</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">&nbsp;sample</span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mord">∣</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">0</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.05278em;">β</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span></span></p>
<ul>
<li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>β</mi></mrow><annotation encoding="application/x-tex">\beta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.05278em;">β</span></span></span></span>：加权因子，一般取值 0.25</li>
</ul>
<div class="note info">
<p>报文段发生重传，就不采用 RTT 样本计算 RTO，而是把 RTO 增大一些。典型的做法是将新 RTO 的值取为旧 RTO 的 2 倍。</p>
</div>
<h4 id="tcp-的选择确认"><a class="anchor" href="#tcp-的选择确认">#</a> TCP 的选择确认</h4>
<p>假设这些字节的序号都在接收窗口内，那么接收方就先收下这些数据，但要把这些信息准确地告诉发送方，使发送方不再重复发送这些数据。</p>
<p><img loading="lazy" data-src="https://blog.ivansnow02.xyz/blog-img/images/computer-network/1bd187d03425c3b2b5fc03d32303321f933dfbbe1698992430cdbd1f1edcb953.png" alt="图 36"></p>
<h2 id="应用层"><a class="anchor" href="#应用层">#</a> 应用层</h2>
<h3 id="客户-服务器和p2p"><a class="anchor" href="#客户-服务器和p2p">#</a> 客户 - 服务器和 P2P</h3>
<ul>
<li>客户 / 服务器（Client/Server，C/S）方式
<ul>
<li>客户和服务器是指通信中所涉及的两个应用进程。</li>
<li>客户 / 服务器方式所描述的是进程之间服务和被服务的关系。</li>
<li>客户是服务请求方，服务器是服务提供方。</li>
<li>服务器总是处于运行状态，并等待客户的服务请求。</li>
</ul>
</li>
<li>对等（Peer-to-Peer，P2P）方式
<ul>
<li>在 P2P 方式中，没有固定的服务请求者和服务提供者，分布在网络边缘各端系统中的应用进程是对等的，被称为对等方。对等方相互之间直接通信，每个对等方既是服务的请求者，又是服务的提供者。</li>
<li>P2P 方式的最突出特性之一就是它的可扩展性。因为系统每增加一个对等方，不仅增加的是服务的请求者，同时也增加了服务的提供者，系统性能不会因规模的增大而降低。</li>
<li>P2P 方式具有成本上的优势，因为它通常不需要庞大的服务器设置和服务器带宽。为了降低成本，服务提供商对于将 P2P 方式用于应用的兴趣越来越大。</li>
</ul>
</li>
</ul>
<h3 id="dhcp-协议"><a class="anchor" href="#dhcp-协议">#</a> DHCP 协议</h3>
<p>动态主机配置协议 DHCP 可为计算机自动配置网络参数，使得计算机 “即插即联网”（Plug-and-Play Networking）</p>
<p><img loading="lazy" data-src="https://blog.ivansnow02.xyz/blog-img/images/computer-network/53cc9d76d3d565e80f09a066a62c364682e94a052c15e4c78c8d24632cbf6776.png" alt="图 37"></p>
<h3 id="域名系统-dns"><a class="anchor" href="#域名系统-dns">#</a> 域名系统 DNS</h3>
<h4 id="dns-的基本概念"><a class="anchor" href="#dns-的基本概念">#</a> DNS 的基本概念</h4>
<ul>
<li>因特网采用层次树状结构的域名结构。</li>
<li>域名的结构由若干个分量组成，各分量之间用 “点” 隔开，分别代表不同级别的域名。
<ul>
<li>每一级的域名都由英文字母和数字组成，不超过 63 个字符，不区分大小写字母。</li>
<li>级别最低的域名写在最左边，而级别最高的顶级域名写在最右边。</li>
<li>完整的域名不超过 255 个字符。</li>
</ul>
</li>
</ul>
<h4 id="dns-的工作原理"><a class="anchor" href="#dns-的工作原理">#</a> DNS 的工作原理</h4>
<h5 id="递归查询"><a class="anchor" href="#递归查询">#</a> 递归查询</h5>
<p><img loading="lazy" data-src="https://blog.ivansnow02.xyz/blog-img/images/computer-network/03a18ab50943d1d84b0a9e29c2b5fd96cdaf2eac9833a7f9eb349635a59bb665.png" alt="图 38"></p>
<p>通常，主机向本地域名服务器查询时使用。<br>
若不知道，就以 DNS 客户的身份，向其他根域名服务器继续发出查询请求报文。</p>
<h5 id="迭代查询"><a class="anchor" href="#迭代查询">#</a> 迭代查询</h5>
<p><img loading="lazy" data-src="https://blog.ivansnow02.xyz/blog-img/images/computer-network/3a5507dc842d0957201e3afc68ac2455e248a97dda613b593b35371fcd9fab23.png" alt="图 39"></p>
<p>本地域名服务器向根域名服务器查询时使用。<br>
要么给出所要查询的 IP 地址，要么告诉下一个要查询的域名服务器的 IP 地址。<br>
本地域名服务器继续后续查询。</p>
<h5 id="dns-的高速缓存"><a class="anchor" href="#dns-的高速缓存">#</a> DNS 的高速缓存</h5>
<p>为了提高 DNS 的查询效率，并减轻根域名服务器的负荷和减少因特网上的 DNS 查询报文数量，在域名服务器中广泛地使用了高速缓存。高速缓存用来存放最近查询过的域名以及从何处获得域名映射信息的记录。由于域名到 IP 地址的映射关系并不是永久不变，为保持高速缓存中的内容正确，域名服务器应为每项内容设置计时器并删除超过合理时间的项（例如，每个项目只存放两天）。</p>
<p>不但在本地域名服务器中需要高速缓存，在用户主机中也很需要。许多用户主机在启动时从本地域名服务器下载域名和 IP 地址的全部数据库，维护存放自己最近使用的域名的高速缓存，并且只在从缓存中找不到域名时才向域名服务器查询。同理，主机也需要保持高速缓存中内容的正确性。</p>
<h3 id="ftp-协议"><a class="anchor" href="#ftp-协议">#</a> FTP 协议</h3>
<p>FTP 提供交互式的访问，允许客户指明文件的类型与格式（如指明是否使用 ASCII 码），并允许文件具有存取权限（如访问文件的用户必须经过授权，并输入有效的口令）。<br>
FTP 屏蔽了各计算机系统的细节，因而适合于在异构网络中任意计算机之间传送文件。</p>
<h4 id="ftp-的工作原理"><a class="anchor" href="#ftp-的工作原理">#</a> FTP 的工作原理</h4>
<h5 id="主动模式"><a class="anchor" href="#主动模式">#</a> 主动模式</h5>
<p><img loading="lazy" data-src="https://blog.ivansnow02.xyz/blog-img/images/computer-network/b820f4715b090b1f123d20ae72c3ba78c1d0a8abf597f8e7e7f20538ad6d2d23.png" alt="图 40"></p>
<p>有数据传送时，FTP 客户通过命令通道告知 FTP 服务器来与自己的另一个临时端口号建立 TCP 连接，以建立数据通道。</p>
<ul>
<li>控制连接在整个会话期间一直保持打开，用于传送 FTP 相关控制命令。</li>
<li>数据连接用于文件传输，在每次文件传输时才建立，传输结束就关闭。</li>
</ul>
<h5 id="被动模式"><a class="anchor" href="#被动模式">#</a> 被动模式</h5>
<p><img loading="lazy" data-src="https://blog.ivansnow02.xyz/blog-img/images/computer-network/27f16dfb1f0a6832682fec95413348dffe0ec95aaa210968d744c78f019e3120.png" alt="图 41"></p>
<p>有数据传送时，FTP 客户通过命令通道告知 FTP 服务器开启某个临时端口被动等待连接，以建立数据通道。</p>
<h4 id="tftp-协议"><a class="anchor" href="#tftp-协议">#</a> TFTP 协议</h4>
<ul>
<li>小且易于实现的文件传送协议。</li>
<li>TFTP 使用客户服务器方式和使用 <strong>UDP</strong> 数据报，因此 TFTP 需要有自己的差错改正措施。</li>
<li>TFTP 只支持文件传输而不支持交互。</li>
<li>TFTP 没有一个庞大的命令集，没有列目录的功能，也不能对用户进行身份鉴别。</li>
</ul>
<h3 id="电子邮件"><a class="anchor" href="#电子邮件">#</a> 电子邮件</h3>
<h4 id="电子邮件系统的组成"><a class="anchor" href="#电子邮件系统的组成">#</a> 电子邮件系统的组成</h4>
<ul>
<li>用户代理（User Agent，UA）：用户使用的邮件客户端。</li>
<li>邮件服务器（Mail Server）：邮件服务器是邮件系统的核心部分，它负责接收、存储、转发和发送邮件。</li>
<li>电子邮件所需的协议：SMTP、POP3、IMAP</li>
</ul>
<p><img loading="lazy" data-src="https://blog.ivansnow02.xyz/blog-img/images/computer-network/9e6ab52e1f8ab2a5aa1ef95ba97ff538e44723c43cb371df41a8090e7cc1a029.png" alt="图 42"></p>
<h4 id="smtp-协议"><a class="anchor" href="#smtp-协议">#</a> SMTP 协议</h4>
<p><img loading="lazy" data-src="https://blog.ivansnow02.xyz/blog-img/images/computer-network/48657efb7c5cfa0a6d581074c316f6c259e5851aec3d0e22a648665c05e58a1b.png" alt="图 43"></p>
<ul>
<li>SMTP 是一个简单的文本协议，它使用 7 位 ASCII 码传输。</li>
<li>SMTP 使用 TCP 连接，端口号为 25。</li>
</ul>
<h4 id="电子邮件的信息格式"><a class="anchor" href="#电子邮件的信息格式">#</a> 电子邮件的信息格式</h4>
<p>电子邮件的信息格式并不是由 SMTP 定义的。一个电子邮件有信封和内容两部分。而内容又由首部和主体两部分构成。</p>
<h4 id="多用途互联网邮件扩展mime"><a class="anchor" href="#多用途互联网邮件扩展mime">#</a> 多用途互联网邮件扩展（MIME）</h4>
<p>MIME 是一种多用途互联网邮件扩展，它允许邮件包含非 ASCII 码字符、多媒体内容、附件等。</p>
<p><img loading="lazy" data-src="https://blog.ivansnow02.xyz/blog-img/images/computer-network/c6a52335cdfeb301deafbf693e668ed52c5674dca1b4e2dcfb2d1d576cdf72e2.png" alt="图 44"></p>
<h4 id="邮件读取协议"><a class="anchor" href="#邮件读取协议">#</a> 邮件读取协议</h4>
<ul>
<li>POP3：邮局协议第 3 版（Post Office Protocol Version 3）端口号为 110
<ul>
<li>用户只能以下载并删除方式或下载并保留方式从邮件服务器下载邮件到用户方计算机。</li>
<li>不允许用户在邮件服务器上管理自己的邮件。（例如创建文件夹，对邮件进行分类管理等）。</li>
</ul>
</li>
<li>IMAP：互联网邮件访问协议（Internet Mail Access Protocol）端口号为 143
<ul>
<li>用户在自己的计算机上就可以操控邮件服务器中的邮箱，就像在本地操控一样，因此 IMAP 是一个<strong>联机协议</strong>。</li>
</ul>
</li>
</ul>
<h4 id="基于web的电子邮件"><a class="anchor" href="#基于web的电子邮件">#</a> 基于 Web 的电子邮件</h4>
<p>通过浏览器登录（提供用户名和口令）邮件服务器万维网网站就可以撰写、收发、阅读和管理电子邮件。这种工作模式与 IMAP 很类似，不同的是用户计算机无需安装专门的用户代理程序，只需要使用通用的万维网浏览器。</p>
<p><img loading="lazy" data-src="https://blog.ivansnow02.xyz/blog-img/images/computer-network/c4e1e6d25e838caee14e73432576cb78924e3baf3ba84d7bd0b779be60f4b850.png" alt="图 45"></p>
<h3 id="万维网"><a class="anchor" href="#万维网">#</a> 万维网</h3>
<h4 id="统一资源定位符-url"><a class="anchor" href="#统一资源定位符-url">#</a> 统一资源定位符 URL</h4>
<p>URL 是万维网上的资源的地址，它是用来指定万维网上的资源的标准格式。<br>
格式： <code>&lt;协议&gt;://&lt;主机&gt;:&lt;端口&gt;/&lt;路径&gt;</code></p>
<h4 id="http-协议"><a class="anchor" href="#http-协议">#</a> HTTP 协议</h4>
<p>HTTP/1.0 采用非持续连接方式。在该方式下，每次浏览器要请求一个文件都要与服务器建立 TCP 连接，当收到响应后就立即关闭连接。</p>
<ul>
<li>每请求一个文档就要有两倍的 RTT 的开销。若一个网页上有很多引用对象（例如图片等），那么请求每一个对象都需要花费 2RTT 的时间。</li>
<li>为了减小时延，浏览器通常会建立多个并行的 TCP 连接同时请求多个对象</li>
</ul>
<p><img loading="lazy" data-src="https://blog.ivansnow02.xyz/blog-img/images/computer-network/abe2f3d9bd5ee0a8a170d128bba5fb0684191a14cba072a7e9918eb15841fa84.png" alt="图 46"></p>
<p>HTTP/1.1 采用<strong>持续连接</strong>方式。在该方式下，万维网服务器在发送响应后仍然保持这条连接，使同一个客户（浏览器）和该服务器可以继续在这条连接上传送后续的 HTTP 请求报文和响应报文。这并不局限于传送同一个页面上引用的对象，而是只要这些文档都在同一个服务器上就行。为了进一步提高效率，HTTP/1.1 的持续连接还可以使用<strong>流水线</strong>方式工作，即浏览器在收到 HTTP 的响应报文之前就能够连续发送多个请求报文。这样的一个接一个的请求报文到达服务器后，服务器就发回一个接一个的响应报文。这样就节省了很多个 RTT 时间，使 TCP 连接中的空闲时间减少，提高了下载文档的效率。</p>
<h5 id="http-报文"><a class="anchor" href="#http-报文">#</a> HTTP 报文</h5>
<p>面向文本的，是 ASCII 码格式的。</p>
<p><img loading="lazy" data-src="https://blog.ivansnow02.xyz/blog-img/images/computer-network/54e3a06c93628b42d90e3a348d63acf10eac0270ac638c1470c91adc83c9e1de.png" alt="图 47"></p>
<p><img loading="lazy" data-src="https://blog.ivansnow02.xyz/blog-img/images/computer-network/ba794fdad40bf4aa1bc4e8a2e7333f4afd19a98d285a1a5b3cf5157e3a6beb76.png" alt="图 48"></p>
<h4 id="cookie"><a class="anchor" href="#cookie">#</a> Cookie</h4>
<p>Cookie 提供了一种机制使得万维网服务器能够 “记住” 用户，而无需用户主动提供用户标识信息。也就是说，Cookie 是一种对无状态的 HTTP 进行状态化的技术。</p>
<p><img loading="lazy" data-src="https://blog.ivansnow02.xyz/blog-img/images/computer-network/f1a3ef758103d4b04fdbc6442c3e6b43d00fef7754e83a2cfee44607bc49ea3d.png" alt="图 49"><br>
<img loading="lazy" data-src="https://blog.ivansnow02.xyz/blog-img/images/computer-network/36d134c51c110172d9a97b5186b73538c420239b7c28638550c98f446cf311e7.png" alt="图 50"></p>
<h4 id="web-缓存与代理服务器"><a class="anchor" href="#web-缓存与代理服务器">#</a> Web 缓存与代理服务器</h4>
<p>Web 缓存把最近的一些请求和响应暂存在本地磁盘中。当新请求到达时，若发现这个请求与暂时存放的请求相同，就返回暂存的响应，而不需要按 URL 的地址再次去因特网访问该资源。<br>
万维网缓存又称为 Web 缓存（Web Cache），可位于客户机，也可位于中间系统上，位于中间系统上的 Web 缓存又称为代理服务器（Proxy Server）。</p>
<div class="tags"><a href="/tags/computer-science/" rel="tag"><i class="ic i-tag"></i>computer science</a><a href="/tags/learning/" rel="tag"><i class="ic i-tag"></i>learning</a></div></div><footer><div class="meta"><span class="icon"><i class="ic i-eye"></i></span><span>此文章已被阅读次数:</span><span class="waline-pageview-count" id="twikoo_visitors" data-path="/computer-network/">正在加载...</span><span class="item"><span class="icon"><i class="ic i-calendar-check"></i></span><span class="text">更新于</span><time title="修改时间：2024-07-09 21:20:09" itemprop="dateModified" datetime="2024-07-09T21:20:09+08:00">2024-07-09</time></span></div><div id="copyright"><ul><li class="author"><strong>本文作者：</strong>Ivan Snow<i class="ic i-at"><em>@</em></i>Snow's Blog</li><li class="link"><strong>本文链接：</strong><a href="https://blog.ivansnow02.xyz/computer-network/" title="计算机网络">https://blog.ivansnow02.xyz/computer-network/</a></li><li class="license"><strong>版权声明：</strong>本站所有文章除特别声明外，均采用 <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh"><i class="ic i-creative-commons"><em>(CC)</em></i>BY-NC-SA</a> 许可协议。转载请注明出处！</li></ul></div></footer></article></div><div class="post-nav"><div class="item left"><a href="/Mao/" rel="prev" itemprop="url" title="毛概题目" style="background-image: linear-gradient(to bottom right, #afbfb6, #f5d4da);"><span class="type">上一篇</span><span class="category"><i class="ic i-flag"></i>trash</span><h3>毛概题目</h3></a></div><div class="item right"><a href="/ai-fundamental/" rel="next" itemprop="url" title="人工智能基础" style="background-image: linear-gradient(to bottom right, #e995af, #848add);"><span class="type">下一篇</span><span class="category"><i class="ic i-flag"></i>computer science</span><h3>人工智能基础</h3></a></div></div><div class="wrap" id="comments"></div></div><div id="sidebar"><div class="inner"><div class="panels"><div class="inner"><div class="contents panel pjax" data-title="文章目录"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%AA%E8%AE%BA"><span class="toc-number">1.</span> <span class="toc-text"> 绪论</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9A%E4%B9%89"><span class="toc-number">1.1.</span> <span class="toc-text"> 计算机网络定义</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%92%E8%81%94%E7%BD%91%E7%9A%84%E7%BB%84%E6%88%90"><span class="toc-number">1.2.</span> <span class="toc-text"> 互联网的组成</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BE%B9%E7%BC%98%E9%83%A8%E5%88%86"><span class="toc-number">1.2.1.</span> <span class="toc-text"> 边缘部分</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AE%A2%E6%88%B7%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%A8%A1%E5%BC%8F"><span class="toc-number">1.2.1.1.</span> <span class="toc-text"> 客户 / 服务器模式</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AF%B9%E7%AD%89%E8%BF%9E%E6%8E%A5"><span class="toc-number">1.2.1.2.</span> <span class="toc-text"> 对等连接</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A0%B8%E5%BF%83%E9%83%A8%E5%88%86"><span class="toc-number">1.2.2.</span> <span class="toc-text"> 核心部分</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%94%B5%E8%B7%AF%E4%BA%A4%E6%8D%A2%E7%9A%84%E7%89%B9%E7%82%B9"><span class="toc-number">1.2.2.1.</span> <span class="toc-text"> 电路交换的特点</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%8A%A5%E6%96%87%E4%BA%A4%E6%8D%A2%E7%9A%84%E7%89%B9%E7%82%B9"><span class="toc-number">1.2.2.2.</span> <span class="toc-text"> 报文交换的特点</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%88%86%E7%BB%84%E4%BA%A4%E6%8D%A2%E7%9A%84%E7%89%B9%E7%82%B9"><span class="toc-number">1.2.2.3.</span> <span class="toc-text"> 分组交换的特点</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%9A%84%E5%88%86%E7%B1%BB"><span class="toc-number">1.3.</span> <span class="toc-text"> 计算机网络的分类</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8C%89%E7%BD%91%E7%BB%9C%E7%9A%84%E4%BD%9C%E7%94%A8%E8%8C%83%E5%9B%B4%E5%88%86%E7%B1%BB"><span class="toc-number">1.3.1.</span> <span class="toc-text"> 按网络的作用范围分类</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8C%89%E7%BD%91%E7%BB%9C%E7%9A%84%E4%BD%BF%E7%94%A8%E8%80%85%E5%88%86%E7%B1%BB"><span class="toc-number">1.3.2.</span> <span class="toc-text"> 按网络的使用者分类</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%9A%84%E6%80%A7%E8%83%BD"><span class="toc-number">1.4.</span> <span class="toc-text"> 计算机网络的性能</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%80%9F%E7%8E%87"><span class="toc-number">1.4.1.</span> <span class="toc-text"> 速率</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B8%A6%E5%AE%BD"><span class="toc-number">1.4.2.</span> <span class="toc-text"> 带宽</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%90%9E%E5%90%90%E9%87%8F"><span class="toc-number">1.4.3.</span> <span class="toc-text"> 吞吐量</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%97%B6%E5%BB%B6"><span class="toc-number">1.4.4.</span> <span class="toc-text"> 时延</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%97%B6%E5%BB%B6%E5%B8%A6%E5%AE%BD%E7%A7%AF"><span class="toc-number">1.4.5.</span> <span class="toc-text"> 时延带宽积</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BE%80%E8%BF%94%E6%97%B6%E9%97%B4rtt"><span class="toc-number">1.4.6.</span> <span class="toc-text"> 往返时间 RTT</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%A9%E7%94%A8%E7%8E%87"><span class="toc-number">1.4.7.</span> <span class="toc-text"> 利用率</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%9A%84%E9%9D%9E%E6%80%A7%E8%83%BD%E6%8C%87%E6%A0%87"><span class="toc-number">1.4.8.</span> <span class="toc-text"> 计算机网络的非性能指标</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%9A%84%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84"><span class="toc-number">1.5.</span> <span class="toc-text"> 计算机网络的体系结构</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8D%8F%E8%AE%AE%E4%B8%8E%E5%88%92%E5%88%86%E5%B1%82%E6%AC%A1"><span class="toc-number">1.5.1.</span> <span class="toc-text"> 协议与划分层次</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE%E7%9A%84%E7%BB%84%E6%88%90%E8%A6%81%E7%B4%A0"><span class="toc-number">1.5.1.1.</span> <span class="toc-text"> 网络协议的组成要素</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8E%A5%E5%8F%A3"><span class="toc-number">1.5.2.</span> <span class="toc-text"> 接口</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#osi%E5%8F%82%E8%80%83%E6%A8%A1%E5%9E%8B%E5%92%8Ctcpip%E5%8F%82%E8%80%83%E6%A8%A1%E5%9E%8B"><span class="toc-number">1.5.3.</span> <span class="toc-text"> OSI 参考模型和 TCP/IP 参考模型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%86%E5%B1%82%E7%9A%84%E5%A5%BD%E5%A4%84"><span class="toc-number">1.5.4.</span> <span class="toc-text"> 分层的好处</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%89%A9%E7%90%86%E5%B1%82"><span class="toc-number">2.</span> <span class="toc-text"> 物理层</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%89%A9%E7%90%86%E5%B1%82%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="toc-number">2.1.</span> <span class="toc-text"> 物理层的基本概念</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%89%A9%E7%90%86%E5%B1%82%E8%A6%81%E8%A7%A3%E5%86%B3%E5%93%AA%E4%BA%9B%E9%97%AE%E9%A2%98"><span class="toc-number">2.1.1.</span> <span class="toc-text"> 物理层要解决哪些问题</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%89%A9%E7%90%86%E5%B1%82%E7%9A%84%E4%B8%BB%E8%A6%81%E7%89%B9%E7%82%B9"><span class="toc-number">2.1.2.</span> <span class="toc-text"> 物理层的主要特点</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%89%A9%E7%90%86%E5%B1%82%E7%9A%84%E4%B8%BB%E8%A6%81%E4%BB%BB%E5%8A%A1"><span class="toc-number">2.1.3.</span> <span class="toc-text"> 物理层的主要任务</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E9%80%9A%E4%BF%A1%E7%9A%84%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86"><span class="toc-number">2.2.</span> <span class="toc-text"> 数据通信的基础知识</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E9%80%9A%E4%BF%A1%E7%B3%BB%E7%BB%9F%E7%9A%84%E6%A8%A1%E5%9E%8B"><span class="toc-number">2.2.1.</span> <span class="toc-text"> 数据通信系统的模型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E6%9C%AF%E8%AF%AD"><span class="toc-number">2.2.2.</span> <span class="toc-text"> 常用术语</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BF%A1%E9%81%93%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="toc-number">2.2.3.</span> <span class="toc-text"> 信道的基本概念</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%80%9A%E4%BF%A1%E5%8F%8C%E6%96%B9%E7%9A%84%E4%BA%A4%E4%BA%92%E6%96%B9%E5%BC%8F"><span class="toc-number">2.2.3.1.</span> <span class="toc-text"> 通信双方的交互方式</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%9F%BA%E5%B8%A6%E4%BF%A1%E5%8F%B7%E7%9A%84%E8%B0%83%E5%88%B6"><span class="toc-number">2.2.3.2.</span> <span class="toc-text"> 基带信号的调制</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%9F%BA%E5%B8%A6%E8%B0%83%E5%88%B6%E7%BC%96%E7%A0%81"><span class="toc-number">2.2.3.2.1.</span> <span class="toc-text"> 基带调制（编码）</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%B8%A6%E9%80%9A%E8%B0%83%E5%88%B6"><span class="toc-number">2.2.3.2.2.</span> <span class="toc-text"> 带通调制</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BF%A1%E9%81%93%E7%9A%84%E6%9E%81%E9%99%90%E5%AE%B9%E9%87%8F"><span class="toc-number">2.2.4.</span> <span class="toc-text"> 信道的极限容量</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%BD%B1%E5%93%8D%E5%9B%A0%E7%B4%A0"><span class="toc-number">2.2.4.1.</span> <span class="toc-text"> 影响因素</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BF%A1%E9%81%93%E7%9A%84%E6%9E%81%E9%99%90%E5%AE%B9%E9%87%8F%E5%B8%A6%E5%AE%BD"><span class="toc-number">2.2.4.2.</span> <span class="toc-text"> 信道的极限容量 —— 带宽</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%A5%88%E6%B0%8F%E5%87%86%E5%88%99"><span class="toc-number">2.2.4.3.</span> <span class="toc-text"> 奈氏准则</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BF%A1%E9%81%93%E7%9A%84%E6%9E%81%E9%99%90%E5%AE%B9%E9%87%8F%E4%BF%A1%E5%99%AA%E6%AF%94"><span class="toc-number">2.2.4.4.</span> <span class="toc-text"> 信道的极限容量 —— 信噪比</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%A6%99%E5%86%9C%E5%AE%9A%E7%90%86"><span class="toc-number">2.2.4.5.</span> <span class="toc-text"> 香农定理</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%89%A9%E7%90%86%E5%B1%82%E4%B8%8B%E9%9D%A2%E7%9A%84%E4%BC%A0%E8%BE%93%E5%AA%92%E4%BD%93"><span class="toc-number">2.3.</span> <span class="toc-text"> 物理层下面的传输媒体</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AF%BC%E5%BC%95%E5%9E%8B%E4%BC%A0%E8%BE%93%E5%AA%92%E4%BD%93"><span class="toc-number">2.3.1.</span> <span class="toc-text"> 导引型传输媒体</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%9D%9E%E5%AF%BC%E5%BC%95%E5%9E%8B%E4%BC%A0%E8%BE%93%E5%AA%92%E4%BD%93"><span class="toc-number">2.3.2.</span> <span class="toc-text"> 非导引型传输媒体</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BF%A1%E9%81%93%E5%A4%8D%E7%94%A8%E6%8A%80%E6%9C%AF"><span class="toc-number">2.4.</span> <span class="toc-text"> 信道复用技术</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E7%9A%84%E4%BF%A1%E9%81%93%E5%A4%8D%E7%94%A8%E6%8A%80%E6%9C%AF"><span class="toc-number">2.4.1.</span> <span class="toc-text"> 常用的信道复用技术</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%A2%91%E5%88%86%E5%A4%8D%E7%94%A8fdm"><span class="toc-number">2.4.1.1.</span> <span class="toc-text"> 频分复用（FDM）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%97%B6%E5%88%86%E5%A4%8D%E7%94%A8tdm"><span class="toc-number">2.4.1.2.</span> <span class="toc-text"> 时分复用（TDM）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%B3%A2%E5%88%86%E5%A4%8D%E7%94%A8wdm"><span class="toc-number">2.4.1.3.</span> <span class="toc-text"> 波分复用（WDM）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%A0%81%E5%88%86%E5%A4%8D%E7%94%A8cdm"><span class="toc-number">2.4.1.4.</span> <span class="toc-text"> 码分复用（CDM）</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82"><span class="toc-number">3.</span> <span class="toc-text"> 数据链路层</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%89%E4%B8%AA%E5%9F%BA%E6%9C%AC%E9%97%AE%E9%A2%98"><span class="toc-number">3.1.</span> <span class="toc-text"> 三个基本问题</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B0%81%E8%A3%85%E6%88%90%E5%B8%A7"><span class="toc-number">3.1.1.</span> <span class="toc-text"> 封装成帧</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%80%8F%E6%98%8E%E4%BC%A0%E8%BE%93"><span class="toc-number">3.1.2.</span> <span class="toc-text"> 透明传输</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B7%AE%E9%94%99%E6%A3%80%E6%B5%8B"><span class="toc-number">3.1.3.</span> <span class="toc-text"> 差错检测</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%BE%AA%E7%8E%AF%E5%86%97%E4%BD%99%E6%A3%80%E6%B5%8B-crc"><span class="toc-number">3.1.3.1.</span> <span class="toc-text"> 循环冗余检测 CRC</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%82%B9%E5%AF%B9%E7%82%B9%E5%8D%8F%E8%AE%AE-ppp"><span class="toc-number">3.2.</span> <span class="toc-text"> 点对点协议 PPP</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#ppp%E5%B8%A7%E7%9A%84%E6%A0%BC%E5%BC%8F"><span class="toc-number">3.2.1.</span> <span class="toc-text"> PPP 帧的格式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ppp%E5%B8%A7%E7%9A%84%E9%80%8F%E6%98%8E%E4%BC%A0%E8%BE%93"><span class="toc-number">3.2.2.</span> <span class="toc-text"> PPP 帧的透明传输</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AD%97%E8%8A%82%E5%A1%AB%E5%85%85%E5%BC%82%E6%AD%A5%E4%BC%A0%E8%BE%93"><span class="toc-number">3.2.2.1.</span> <span class="toc-text"> 字节填充（异步传输）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%9B%B6%E6%AF%94%E7%89%B9%E5%A1%AB%E5%85%85%E5%90%8C%E6%AD%A5%E4%BC%A0%E8%BE%93"><span class="toc-number">3.2.2.2.</span> <span class="toc-text"> 零比特填充（同步传输）</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ppp%E5%B8%A7%E7%9A%84%E5%B7%A5%E4%BD%9C%E7%8A%B6%E6%80%81"><span class="toc-number">3.2.3.</span> <span class="toc-text"> PPP 帧的工作状态</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#csmacd%E5%8D%8F%E8%AE%AE"><span class="toc-number">3.3.</span> <span class="toc-text"> CSMA/CD 协议</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%89%E7%94%A8%E6%9C%9F"><span class="toc-number">3.3.1.</span> <span class="toc-text"> 争用期</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%8C%E8%BF%9B%E5%88%B6%E6%8C%87%E6%95%B0%E9%80%80%E9%81%BF%E7%AE%97%E6%B3%95"><span class="toc-number">3.3.2.</span> <span class="toc-text"> 二进制指数退避算法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BF%A1%E9%81%93%E5%88%A9%E7%94%A8%E7%8E%87"><span class="toc-number">3.3.3.</span> <span class="toc-text"> 信道利用率</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E9%9B%86%E7%BA%BF%E5%99%A8%E7%9A%84%E6%98%9F%E5%BD%A2%E6%8B%93%E6%89%91"><span class="toc-number">3.4.</span> <span class="toc-text"> 使用集线器的星形拓扑</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%98%9F%E5%BD%A2%E4%BB%A5%E5%A4%AA%E7%BD%91-10base-t"><span class="toc-number">3.4.1.</span> <span class="toc-text"> 星形以太网 10Base-T</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%9B%86%E7%BA%BF%E5%99%A8%E7%9A%84%E7%89%B9%E7%82%B9"><span class="toc-number">3.4.2.</span> <span class="toc-text"> 集线器的特点</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%A5%E5%A4%AA%E7%BD%91%E7%9A%84mac%E5%B1%82"><span class="toc-number">3.5.</span> <span class="toc-text"> 以太网的 MAC 层</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#mac%E5%B1%82%E7%9A%84%E7%A1%AC%E4%BB%B6%E5%9C%B0%E5%9D%80"><span class="toc-number">3.5.1.</span> <span class="toc-text"> MAC 层的硬件地址</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#ig%E4%BD%8D"><span class="toc-number">3.5.1.1.</span> <span class="toc-text"> I/G 位</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#gl%E4%BD%8D"><span class="toc-number">3.5.1.2.</span> <span class="toc-text"> G/L 位</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%80%82%E9%85%8D%E5%99%A8%E6%A3%80%E6%9F%A5"><span class="toc-number">3.5.1.3.</span> <span class="toc-text"> 适配器检查</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#mac%E5%B1%82%E7%9A%84%E5%B8%A7%E6%A0%BC%E5%BC%8F"><span class="toc-number">3.5.2.</span> <span class="toc-text"> MAC 层的帧格式</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BB%A5%E5%A4%AA%E7%BD%91v2%E5%B8%A7%E6%A0%BC%E5%BC%8F"><span class="toc-number">3.5.2.1.</span> <span class="toc-text"> 以太网 v2 帧格式</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%97%A0%E6%95%88%E5%B8%A7"><span class="toc-number">3.5.2.2.</span> <span class="toc-text"> 无效帧</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ieee-8023-%E5%92%8C%E4%BB%A5%E5%A4%AA%E7%BD%91v2%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">3.5.3.</span> <span class="toc-text"> IEEE 802.3 和以太网 v2 的区别</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8B%93%E5%B1%95%E7%9A%84%E4%BB%A5%E5%A4%AA%E7%BD%91"><span class="toc-number">3.6.</span> <span class="toc-text"> 拓展的以太网</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9C%A8%E7%89%A9%E7%90%86%E5%B1%82%E6%8B%93%E5%B1%95%E4%BB%A5%E5%A4%AA%E7%BD%91"><span class="toc-number">3.6.1.</span> <span class="toc-text"> 在物理层拓展以太网</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9C%A8%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%E6%8B%93%E5%B1%95%E4%BB%A5%E5%A4%AA%E7%BD%91"><span class="toc-number">3.6.2.</span> <span class="toc-text"> 在数据链路层拓展以太网</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%BD%91%E6%A1%A5"><span class="toc-number">3.6.2.1.</span> <span class="toc-text"> 网桥</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BA%A4%E6%8D%A2%E6%9C%BA"><span class="toc-number">3.6.2.2.</span> <span class="toc-text"> 交换机</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BB%A5%E5%A4%AA%E7%BD%91%E4%BA%A4%E6%8D%A2%E6%9C%BA%E7%9A%84%E8%87%AA%E5%AD%A6%E4%B9%A0%E6%9C%BA%E5%88%B6"><span class="toc-number">3.6.2.3.</span> <span class="toc-text"> 以太网交换机的自学习机制</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%99%9A%E6%8B%9F%E5%B1%80%E5%9F%9F%E7%BD%91-vlan"><span class="toc-number">3.7.</span> <span class="toc-text"> 虚拟局域网 VLAN</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#dot1q%E5%8D%8F%E8%AE%AE"><span class="toc-number">3.7.1.</span> <span class="toc-text"> Dot1q 协议</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E5%B1%82"><span class="toc-number">4.</span> <span class="toc-text"> 网络层</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BD%91%E9%99%85%E5%8D%8F%E8%AE%AE-ip"><span class="toc-number">4.1.</span> <span class="toc-text"> 网际协议 IP</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#ipv4-%E5%9C%B0%E5%9D%80"><span class="toc-number">4.1.1.</span> <span class="toc-text"> IPv4 地址</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#ipv4-%E5%9C%B0%E5%9D%80%E7%9A%84%E5%88%86%E7%B1%BB%E7%BC%96%E5%9D%80"><span class="toc-number">4.1.1.1.</span> <span class="toc-text"> IPv4 地址的分类编址</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AD%90%E7%BD%91%E5%88%92%E5%88%86"><span class="toc-number">4.1.1.2.</span> <span class="toc-text"> 子网划分</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%97%A0%E5%88%86%E7%B1%BB%E7%BC%96%E5%9D%80cidr"><span class="toc-number">4.1.1.3.</span> <span class="toc-text"> 无分类编址 CIDR</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9C%B0%E5%9D%80%E8%A7%A3%E6%9E%90%E5%8D%8F%E8%AE%AE-arp"><span class="toc-number">4.1.2.</span> <span class="toc-text"> 地址解析协议 ARP</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#arp-%E7%9A%84%E5%9B%9B%E7%A7%8D%E5%85%B8%E5%9E%8B%E6%83%85%E5%86%B5"><span class="toc-number">4.1.2.1.</span> <span class="toc-text"> ARP 的四种典型情况</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ip-%E6%95%B0%E6%8D%AE%E6%8A%A5%E7%9A%84%E6%A0%BC%E5%BC%8F"><span class="toc-number">4.1.3.</span> <span class="toc-text"> IP 数据报的格式</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%A6%96%E9%83%A8%E6%A3%80%E9%AA%8C%E5%92%8C%E8%AE%A1%E7%AE%97"><span class="toc-number">4.1.3.1.</span> <span class="toc-text"> 首部检验和计算</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%BB%98%E8%AE%A4%E8%B7%AF%E7%94%B1"><span class="toc-number">4.2.</span> <span class="toc-text"> 默认路由</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%92%E8%81%94%E7%BD%91%E7%9A%84%E8%B7%AF%E7%94%B1%E9%80%89%E6%8B%A9%E5%8D%8F%E8%AE%AE"><span class="toc-number">4.3.</span> <span class="toc-text"> 互联网的路由选择协议</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1%E9%80%89%E6%8B%A9%E5%8D%8F%E8%AE%AE%E7%9A%84%E7%89%B9%E7%82%B9"><span class="toc-number">4.3.1.</span> <span class="toc-text"> 路由选择协议的特点</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%87%AA%E6%B2%BB%E7%B3%BB%E7%BB%9F-as"><span class="toc-number">4.3.2.</span> <span class="toc-text"> 自治系统 AS</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1%E4%BF%A1%E6%81%AF%E5%8D%8F%E8%AE%AE-rip"><span class="toc-number">4.3.3.</span> <span class="toc-text"> 路由信息协议 RIP</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#rip-%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="toc-number">4.3.3.1.</span> <span class="toc-text"> RIP 基本概念</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#rip-%E7%89%B9%E7%82%B9"><span class="toc-number">4.3.3.2.</span> <span class="toc-text"> RIP 特点</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#rip-%E5%9F%BA%E6%9C%AC%E5%B7%A5%E4%BD%9C%E8%BF%87%E7%A8%8B"><span class="toc-number">4.3.3.3.</span> <span class="toc-text"> RIP 基本工作过程</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#rip-%E7%9A%84%E4%BC%98%E7%BC%BA%E7%82%B9"><span class="toc-number">4.3.3.4.</span> <span class="toc-text"> RIP 的优缺点</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#rip-%E6%8A%A5%E6%96%87%E6%A0%BC%E5%BC%8F"><span class="toc-number">4.3.3.5.</span> <span class="toc-text"> RIP 报文格式</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BC%80%E6%94%BE%E6%9C%80%E7%9F%AD%E8%B7%AF%E5%BE%84%E4%BC%98%E5%85%88%E5%8D%8F%E8%AE%AE-ospf"><span class="toc-number">4.3.4.</span> <span class="toc-text"> 开放最短路径优先协议 OSPF</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#ospf-%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="toc-number">4.3.4.1.</span> <span class="toc-text"> OSPF 基本概念</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#ospf-%E5%88%92%E5%88%86%E5%8C%BA%E5%9F%9F"><span class="toc-number">4.3.4.2.</span> <span class="toc-text"> OSPF 划分区域</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#ospf-%E5%88%86%E7%BB%84"><span class="toc-number">4.3.4.3.</span> <span class="toc-text"> OSPF 分组</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#ospf-%E7%9A%84%E4%BC%98%E7%BC%BA%E7%82%B9"><span class="toc-number">4.3.4.4.</span> <span class="toc-text"> OSPF 的优缺点</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BE%B9%E7%95%8C%E7%BD%91%E5%85%B3%E5%8D%8F%E8%AE%AE-bgp"><span class="toc-number">4.3.5.</span> <span class="toc-text"> 边界网关协议 BGP</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#bgp-%E5%8D%8F%E8%AE%AE%E7%9A%84%E7%89%B9%E7%82%B9"><span class="toc-number">4.3.5.1.</span> <span class="toc-text"> BGP 协议的特点</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BD%91%E9%99%85%E6%8E%A7%E5%88%B6%E6%8A%A5%E6%96%87%E5%8D%8F%E8%AE%AE-icmp"><span class="toc-number">4.4.</span> <span class="toc-text"> 网际控制报文协议 ICMP</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#icmp-%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="toc-number">4.4.1.</span> <span class="toc-text"> ICMP 的基本概念</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#icmp-%E6%8A%A5%E6%96%87%E6%A0%BC%E5%BC%8F"><span class="toc-number">4.4.2.</span> <span class="toc-text"> ICMP 报文格式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#icmp-%E6%8A%A5%E6%96%87%E7%A7%8D%E7%B1%BB"><span class="toc-number">4.4.3.</span> <span class="toc-text"> ICMP 报文种类</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%99%9A%E6%8B%9F%E4%B8%93%E7%94%A8%E7%BD%91-vpn%E5%92%8C%E7%BD%91%E7%BB%9C%E5%9C%B0%E5%9D%80%E8%BD%AC%E6%8D%A2-nat"><span class="toc-number">4.5.</span> <span class="toc-text"> 虚拟专用网 VPN 和网络地址转换 NAT</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#vpn"><span class="toc-number">4.5.1.</span> <span class="toc-text"> VPN</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%9C%AC%E5%9C%B0%E5%9C%B0%E5%9D%80%E4%B8%8E%E5%85%A8%E7%90%83%E5%9C%B0%E5%9D%80"><span class="toc-number">4.5.1.1.</span> <span class="toc-text"> 本地地址与全球地址</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#vpn-%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="toc-number">4.5.1.2.</span> <span class="toc-text"> VPN 的基本概念</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#nat"><span class="toc-number">4.5.2.</span> <span class="toc-text"> NAT</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#nat-%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="toc-number">4.5.2.1.</span> <span class="toc-text"> NAT 的基本概念</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E5%9C%B0%E5%9D%80%E8%BD%AC%E6%8D%A2%E7%9A%84%E8%BF%87%E7%A8%8B"><span class="toc-number">4.5.2.2.</span> <span class="toc-text"> 网络地址转换的过程</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#nat-%E7%9A%84%E7%89%B9%E7%82%B9"><span class="toc-number">4.5.2.3.</span> <span class="toc-text"> NAT 的特点</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E5%9C%B0%E5%9D%80%E4%B8%8E%E7%AB%AF%E5%8F%A3%E8%BD%AC%E6%8D%A2-napt"><span class="toc-number">4.5.2.4.</span> <span class="toc-text"> 网络地址与端口转换 NAPT</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ipv6"><span class="toc-number">4.6.</span> <span class="toc-text"> IPv6</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#ipv6-%E7%9A%84%E9%A6%96%E9%83%A8"><span class="toc-number">4.6.1.</span> <span class="toc-text"> IPv6 的首部</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#ipv6-%E5%9F%BA%E6%9C%AC%E9%A6%96%E9%83%A8"><span class="toc-number">4.6.1.1.</span> <span class="toc-text"> IPv6 基本首部</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#ipv6-%E7%9A%84%E6%89%A9%E5%B1%95%E9%A6%96%E9%83%A8"><span class="toc-number">4.6.1.2.</span> <span class="toc-text"> IPv6 的扩展首部</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ipv6-%E7%9A%84%E5%9C%B0%E5%9D%80"><span class="toc-number">4.6.2.</span> <span class="toc-text"> IPv6 的地址</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#ipv6-%E5%9C%B0%E5%9D%80%E7%9A%84%E5%88%86%E7%B1%BB"><span class="toc-number">4.6.2.1.</span> <span class="toc-text"> IPv6 地址的分类</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#ipv6-%E5%9C%B0%E5%9D%80%E7%9A%84%E8%A1%A8%E7%A4%BA"><span class="toc-number">4.6.2.2.</span> <span class="toc-text"> IPv6 地址的表示</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#ipv6-%E5%9C%B0%E5%9D%80%E7%9A%84%E7%B1%BB%E5%9E%8B"><span class="toc-number">4.6.2.3.</span> <span class="toc-text"> IPv6 地址的类型</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BB%8E-ipv4-%E5%88%B0-ipv6"><span class="toc-number">4.6.3.</span> <span class="toc-text"> 从 IPv4 到 IPv6</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%8F%8C%E5%8D%8F%E8%AE%AE%E6%A0%88"><span class="toc-number">4.6.3.1.</span> <span class="toc-text"> 双协议栈</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%9A%A7%E9%81%93%E6%8A%80%E6%9C%AF"><span class="toc-number">4.6.3.2.</span> <span class="toc-text"> 隧道技术</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BC%A0%E8%BE%93%E5%B1%82"><span class="toc-number">5.</span> <span class="toc-text"> 传输层</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BC%A0%E8%BE%93%E5%B1%82%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="toc-number">5.1.</span> <span class="toc-text"> 传输层的基本概念</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BC%A0%E8%BE%93%E5%B1%82%E7%9A%84%E4%B8%BB%E8%A6%81%E5%8A%9F%E8%83%BD"><span class="toc-number">5.1.1.</span> <span class="toc-text"> 传输层的主要功能</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BC%A0%E8%BE%93%E5%B1%82%E7%9A%84%E4%B8%A4%E4%B8%AA%E4%B8%BB%E8%A6%81%E5%8D%8F%E8%AE%AE"><span class="toc-number">5.1.2.</span> <span class="toc-text"> 传输层的两个主要协议</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#tcp"><span class="toc-number">5.1.2.1.</span> <span class="toc-text"> TCP</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#udp"><span class="toc-number">5.1.2.2.</span> <span class="toc-text"> UDP</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BC%A0%E8%BE%93%E5%B1%82%E7%9A%84%E7%AB%AF%E5%8F%A3"><span class="toc-number">5.1.3.</span> <span class="toc-text"> 传输层的端口</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%AB%AF%E5%8F%A3%E5%88%86%E7%B1%BB"><span class="toc-number">5.1.3.1.</span> <span class="toc-text"> 端口分类</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%9C%8D%E5%8A%A1%E5%92%8C%E7%AB%AF%E5%8F%A3%E7%9A%84%E5%85%B3%E7%B3%BB"><span class="toc-number">5.1.3.2.</span> <span class="toc-text"> 服务和端口的关系</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%91%E9%80%81%E6%96%B9%E7%9A%84%E5%A4%8D%E7%94%A8%E5%92%8C%E6%8E%A5%E6%94%B6%E6%96%B9%E7%9A%84%E5%88%86%E7%94%A8"><span class="toc-number">5.1.4.</span> <span class="toc-text"> 发送方的复用和接收方的分用</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%94%A8%E6%88%B7%E6%95%B0%E6%8D%AE%E6%8A%A5%E5%8D%8F%E8%AE%AE-udp"><span class="toc-number">5.2.</span> <span class="toc-text"> 用户数据报协议 UDP</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#udp-%E6%A6%82%E8%BF%B0"><span class="toc-number">5.2.1.</span> <span class="toc-text"> UDP 概述</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#udp-%E7%9A%84%E7%89%B9%E7%82%B9"><span class="toc-number">5.2.2.</span> <span class="toc-text"> UDP 的特点</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#udp-%E7%9A%84%E9%A6%96%E9%83%A8%E6%A0%BC%E5%BC%8F"><span class="toc-number">5.2.3.</span> <span class="toc-text"> UDP 的首部格式</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BC%A0%E8%BE%93%E6%8E%A7%E5%88%B6%E5%8D%8F%E8%AE%AE-tcp"><span class="toc-number">5.3.</span> <span class="toc-text"> 传输控制协议 TCP</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#tcp-%E7%9A%84%E7%89%B9%E7%82%B9"><span class="toc-number">5.3.1.</span> <span class="toc-text"> TCP 的特点</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#tcp-%E7%9A%84%E8%BF%9E%E6%8E%A5"><span class="toc-number">5.3.2.</span> <span class="toc-text"> TCP 的连接</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#tcp-%E7%9A%84%E9%A6%96%E9%83%A8%E6%A0%BC%E5%BC%8F"><span class="toc-number">5.3.2.1.</span> <span class="toc-text"> TCP 的首部格式</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%AF%E9%9D%A0%E4%BC%A0%E8%BE%93"><span class="toc-number">5.4.</span> <span class="toc-text"> 可靠传输</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%81%9C%E6%AD%A2%E7%AD%89%E5%BE%85%E5%8D%8F%E8%AE%AE"><span class="toc-number">5.4.1.</span> <span class="toc-text"> 停止等待协议</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%81%9C%E6%AD%A2%E7%AD%89%E5%BE%85%E5%8D%8F%E8%AE%AE%E7%9A%84%E4%BF%A1%E9%81%93%E5%88%A9%E7%94%A8%E7%8E%87"><span class="toc-number">5.4.1.1.</span> <span class="toc-text"> 停止等待协议的信道利用率</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9B%9E%E9%80%80n%E5%B8%A7%E5%8D%8F%E8%AE%AE"><span class="toc-number">5.4.2.</span> <span class="toc-text"> 回退 N 帧协议</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%80%89%E6%8B%A9%E9%87%8D%E4%BC%A0%E5%8D%8F%E8%AE%AE"><span class="toc-number">5.4.3.</span> <span class="toc-text"> 选择重传协议</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#tcp-%E7%9A%84%E8%BF%9E%E6%8E%A5%E7%AE%A1%E7%90%86"><span class="toc-number">5.5.</span> <span class="toc-text"> TCP 的连接管理</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#tcp-%E7%9A%84%E8%BF%9E%E6%8E%A5%E5%BB%BA%E7%AB%8B"><span class="toc-number">5.5.1.</span> <span class="toc-text"> TCP 的连接建立</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#tcp-%E7%9A%84%E8%BF%9E%E6%8E%A5%E9%87%8A%E6%94%BE"><span class="toc-number">5.5.2.</span> <span class="toc-text"> TCP 的连接释放</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#tcp-%E7%9A%84%E6%B5%81%E9%87%8F%E6%8E%A7%E5%88%B6"><span class="toc-number">5.6.</span> <span class="toc-text"> TCP 的流量控制</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#tcp-%E7%9A%84%E6%B5%81%E9%87%8F%E6%8E%A7%E5%88%B6%E5%8E%9F%E7%90%86"><span class="toc-number">5.6.1.</span> <span class="toc-text"> TCP 的流量控制原理</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#tcp-%E7%9A%84%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6"><span class="toc-number">5.7.</span> <span class="toc-text"> TCP 的拥塞控制</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B5%81%E9%87%8F%E6%8E%A7%E5%88%B6%E4%B8%8E%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">5.7.1.</span> <span class="toc-text"> 流量控制与拥塞控制的区别</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#tcp-%E7%9A%84%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%96%B9%E6%B3%95"><span class="toc-number">5.7.2.</span> <span class="toc-text"> TCP 的拥塞控制的基本方法</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%85%A2%E5%BC%80%E5%A7%8B%E7%AE%97%E6%B3%95"><span class="toc-number">5.7.2.1.</span> <span class="toc-text"> 慢开始算法</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%8B%A5%E5%A1%9E%E9%81%BF%E5%85%8D%E7%AE%97%E6%B3%95"><span class="toc-number">5.7.2.2.</span> <span class="toc-text"> 拥塞避免算法</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%BF%AB%E9%87%8D%E4%BC%A0%E7%AE%97%E6%B3%95"><span class="toc-number">5.7.2.3.</span> <span class="toc-text"> 快重传算法</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%BF%AB%E6%81%A2%E5%A4%8D%E7%AE%97%E6%B3%95"><span class="toc-number">5.7.2.4.</span> <span class="toc-text"> 快恢复算法</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#tcp-%E7%9A%84%E5%8F%AF%E9%9D%A0%E4%BC%A0%E8%BE%93"><span class="toc-number">5.8.</span> <span class="toc-text"> TCP 的可靠传输</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BB%A5%E5%AD%97%E8%8A%82%E4%B8%BA%E5%8D%95%E4%BD%8D%E7%9A%84%E6%BB%91%E5%8A%A8%E7%AA%97%E5%8F%A3"><span class="toc-number">5.8.1.</span> <span class="toc-text"> 以字节为单位的滑动窗口</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#tcp-%E8%B6%85%E6%97%B6%E9%87%8D%E4%BC%A0%E6%97%B6%E9%97%B4%E7%9A%84%E9%80%89%E6%8B%A9"><span class="toc-number">5.8.2.</span> <span class="toc-text"> TCP 超时重传时间的选择</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#tcp-%E7%9A%84%E9%80%89%E6%8B%A9%E7%A1%AE%E8%AE%A4"><span class="toc-number">5.8.3.</span> <span class="toc-text"> TCP 的选择确认</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BA%94%E7%94%A8%E5%B1%82"><span class="toc-number">6.</span> <span class="toc-text"> 应用层</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%A2%E6%88%B7-%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%92%8Cp2p"><span class="toc-number">6.1.</span> <span class="toc-text"> 客户 - 服务器和 P2P</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#dhcp-%E5%8D%8F%E8%AE%AE"><span class="toc-number">6.2.</span> <span class="toc-text"> DHCP 协议</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%9F%E5%90%8D%E7%B3%BB%E7%BB%9F-dns"><span class="toc-number">6.3.</span> <span class="toc-text"> 域名系统 DNS</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#dns-%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="toc-number">6.3.1.</span> <span class="toc-text"> DNS 的基本概念</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#dns-%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86"><span class="toc-number">6.3.2.</span> <span class="toc-text"> DNS 的工作原理</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%80%92%E5%BD%92%E6%9F%A5%E8%AF%A2"><span class="toc-number">6.3.2.1.</span> <span class="toc-text"> 递归查询</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%BF%AD%E4%BB%A3%E6%9F%A5%E8%AF%A2"><span class="toc-number">6.3.2.2.</span> <span class="toc-text"> 迭代查询</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#dns-%E7%9A%84%E9%AB%98%E9%80%9F%E7%BC%93%E5%AD%98"><span class="toc-number">6.3.2.3.</span> <span class="toc-text"> DNS 的高速缓存</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ftp-%E5%8D%8F%E8%AE%AE"><span class="toc-number">6.4.</span> <span class="toc-text"> FTP 协议</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#ftp-%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86"><span class="toc-number">6.4.1.</span> <span class="toc-text"> FTP 的工作原理</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%B8%BB%E5%8A%A8%E6%A8%A1%E5%BC%8F"><span class="toc-number">6.4.1.1.</span> <span class="toc-text"> 主动模式</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%A2%AB%E5%8A%A8%E6%A8%A1%E5%BC%8F"><span class="toc-number">6.4.1.2.</span> <span class="toc-text"> 被动模式</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#tftp-%E5%8D%8F%E8%AE%AE"><span class="toc-number">6.4.2.</span> <span class="toc-text"> TFTP 协议</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%94%B5%E5%AD%90%E9%82%AE%E4%BB%B6"><span class="toc-number">6.5.</span> <span class="toc-text"> 电子邮件</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%94%B5%E5%AD%90%E9%82%AE%E4%BB%B6%E7%B3%BB%E7%BB%9F%E7%9A%84%E7%BB%84%E6%88%90"><span class="toc-number">6.5.1.</span> <span class="toc-text"> 电子邮件系统的组成</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#smtp-%E5%8D%8F%E8%AE%AE"><span class="toc-number">6.5.2.</span> <span class="toc-text"> SMTP 协议</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%94%B5%E5%AD%90%E9%82%AE%E4%BB%B6%E7%9A%84%E4%BF%A1%E6%81%AF%E6%A0%BC%E5%BC%8F"><span class="toc-number">6.5.3.</span> <span class="toc-text"> 电子邮件的信息格式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A4%9A%E7%94%A8%E9%80%94%E4%BA%92%E8%81%94%E7%BD%91%E9%82%AE%E4%BB%B6%E6%89%A9%E5%B1%95mime"><span class="toc-number">6.5.4.</span> <span class="toc-text"> 多用途互联网邮件扩展（MIME）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%82%AE%E4%BB%B6%E8%AF%BB%E5%8F%96%E5%8D%8F%E8%AE%AE"><span class="toc-number">6.5.5.</span> <span class="toc-text"> 邮件读取协议</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9F%BA%E4%BA%8Eweb%E7%9A%84%E7%94%B5%E5%AD%90%E9%82%AE%E4%BB%B6"><span class="toc-number">6.5.6.</span> <span class="toc-text"> 基于 Web 的电子邮件</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%87%E7%BB%B4%E7%BD%91"><span class="toc-number">6.6.</span> <span class="toc-text"> 万维网</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BB%9F%E4%B8%80%E8%B5%84%E6%BA%90%E5%AE%9A%E4%BD%8D%E7%AC%A6-url"><span class="toc-number">6.6.1.</span> <span class="toc-text"> 统一资源定位符 URL</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#http-%E5%8D%8F%E8%AE%AE"><span class="toc-number">6.6.2.</span> <span class="toc-text"> HTTP 协议</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#http-%E6%8A%A5%E6%96%87"><span class="toc-number">6.6.2.1.</span> <span class="toc-text"> HTTP 报文</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#cookie"><span class="toc-number">6.6.3.</span> <span class="toc-text"> Cookie</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#web-%E7%BC%93%E5%AD%98%E4%B8%8E%E4%BB%A3%E7%90%86%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="toc-number">6.6.4.</span> <span class="toc-text"> Web 缓存与代理服务器</span></a></li></ol></li></ol></li></ol></div><div class="related panel pjax" data-title="系列文章"><ul><li><a href="/computer-organization/" rel="bookmark" title="计算机组成原理复习">计算机组成原理复习</a></li><li><a href="/ComputerSystem/" rel="bookmark" title="操作系统复习">操作系统复习</a></li><li><a href="/DataBaseLearning/" rel="bookmark" title="数据库系统概论概念整理">数据库系统概论概念整理</a></li><li><a href="/sql-lab/" rel="bookmark" title="SQL代码复习">SQL代码复习</a></li><li class="active"><a href="/computer-network/" rel="bookmark" title="计算机网络">计算机网络</a></li><li><a href="/ai-fundamental/" rel="bookmark" title="人工智能基础">人工智能基础</a></li><li><a href="/Compilers/" rel="bookmark" title="编译技术笔记">编译技术笔记</a></li></ul></div><div class="overview panel" data-title="站点概览"><div class="author" itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><img class="image" loading="lazy" decoding="async" itemprop="image" alt="Ivan Snow" src="/img/avatar.webp"><p class="name" itemprop="name">Ivan Snow</p><div class="description" itemprop="description">some notes about computer science</div></div><nav class="state"><div class="item posts"><a href="/archives/"><span class="count">47</span><span class="name">文章</span></a></div><div class="item categories"><a href="/categories/"><span class="count">15</span><span class="name">分类</span></a></div><div class="item tags"><a href="/tags/"><span class="count">22</span><span class="name">标签</span></a></div></nav><div class="social"><a target="_blank" rel="noopener" href="https://github.com/ivansnow02" class="item github" title="https://github.com/ivansnow02"><i class="ic i-github"></i></a><a href="mailto:eone2017@protonmail.com" class="item email" title="mailto:eone2017@protonmail.com"><i class="ic i-envelope"></i></a></div><div class="menu"><li class="item"><a href="/" rel="section"><i class="ic i-home"></i>首页</a></li><li class="item dropdown"><a href="#" onclick="return false;"><i class="ic i-user"></i>关于</a><ul class="submenu"><li class="item"><a href="/about/" rel="section"><i class="ic i-user"></i>关于本站</a></li></ul></li><li class="item dropdown"><a href="#" onclick="return false;"><i class="ic i-feather"></i>文章</a><ul class="submenu"><li class="item"><a href="/archives/" rel="section"><i class="ic i-list-alt"></i>归档</a></li><li class="item"><a href="/categories/" rel="section"><i class="ic i-th"></i>分类</a></li><li class="item"><a href="/tags/" rel="section"><i class="ic i-tags"></i>标签</a></li></ul></li><li class="item"><a href="/links/" rel="section"><i class="ic i-heart"></i>友链</a></li></div></div></div></div><ul id="quick"><li class="prev pjax"><a href="/ai-fundamental/" rel="prev" title="上一篇"><i class="ic i-chevron-left"></i></a></li><li class="up"><i class="ic i-arrow-up"></i></li><li class="down"><i class="ic i-arrow-down"></i></li><li class="next pjax"><a href="/Mao/" rel="next" title="下一篇"><i class="ic i-chevron-right"></i></a></li><li class="percent"></li></ul></div></div><div class="dimmer"></div></div></main><footer id="footer"><div class="inner"><div class="widgets"><div class="rpost pjax"><h2>随机文章</h2><ul><li class="item"><div class="breadcrumb"><a href="/categories/data-structure/" title="分类于data structure">data structure</a></div><span><a href="/SPT/">最短路径 Shortest Path</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/Redis/" title="分类于Redis">Redis</a></div><span><a href="/heimadianping/">Redis实战——黑马点评</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/coding/" title="分类于coding">coding</a></div><span><a href="/VIM%E7%9A%84%E5%AD%A6%E4%B9%A0/">VIM的学习</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="分类于computer science">computer science</a></div><span><a href="/DataBaseLearning/">数据库系统概论概念整理</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/English/" title="分类于English">English</a></div><span><a href="/TheFallingSoldier/">The Power of Robert Capa's The Falling Soldier</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/Redis/" title="分类于Redis">Redis</a></div><span><a href="/Redis-Learning-03-SpringDataRedis/">SpringDataRedis</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/Java/" title="分类于Java">Java</a></div><span><a href="/java-learning/">Java学习</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/data-structure/" title="分类于data structure">data structure</a></div><span><a href="/DataStructureTest02/">数据结构题目02</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="分类于computer science">computer science</a></div><span><a href="/computer-network/">计算机网络</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/English/" title="分类于English">English</a></div><span><a href="/healthy-lifestyle/">Why Students Should Be Encouraged To Lead A Healthy Lifestyle</a></span></li></ul></div><div class="rpost pjax"><h2>最新评论</h2><ul class="leancloud-recent-comment" id="new-comment"></ul></div></div><div class="status"><div class="copyright">© 2023 -<span itemprop="copyrightYear">2024</span><span class="with-love"><i class="ic i-sakura rotate"></i></span><span class="author" itemprop="copyrightHolder">Ivan Snow @ Code Blog</span></div><div class="count"><span class="post-meta-item-icon"><i class="ic i-chart-area"></i></span><span title="站点总字数">632k 字</span><span class="post-meta-divider"> | </span><span class="post-meta-item-icon"><i class="ic i-coffee"></i></span><span title="站点阅读时长">9:35</span></div><div class="powered-by">基于 <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a> &amp; Theme.<a target="_blank" rel="noopener" href="https://github.com/theme-shoka-x/hexo-theme-shokaX/">ShokaX</a></div></div><script src="https://unpkg.com/busuanzi@2.3.0/bsz.pure.mini.js"></script><div id="busuanzi-wrap"><span class="ic i-eye"></span><span id="busuanzi_container_site_pv">本站访问量 <span id="busuanzi_value_site_pv"></span> 次</span> | <span class="ic i-user"></span><span id="busuanzi_container_site_uv">本站访客量 <span id="busuanzi_value_site_uv"></span> 次</span></div></div></footer></div><script data-config="" type="text/javascript">var LOCAL = {
    ispost: true,
        path: `computer-network/`,
        favicon: {
        show: `（●´3｀●）やれやれだぜ`,
        hide: `(´Д｀)大変だ！`
    },
    search: {
        placeholder: "文章搜索",
        empty: "关于 「 ${query} 」，什么也没搜到",
        stats: "${time} ms 内找到 ${hits} 条结果"
    },
    copy_tex: true,
    katex: true,
    mermaid: false,
    audio: undefined,
    fancybox: true,
    nocopy: false,
    outime: true,
    template: `<div class="note warning"><p><span class="label warning">文章时效性提示</span><br>这是一篇发布于 {{publish}} 天前，最后一次更新在 {{updated}} 天前的文章，部分信息可能已经发生改变，请注意甄别。</p></div>`,
    quiz: {
        choice: `单选题`,
        multiple: `多选题`,
        true_false: `判断题`,
        essay: `问答题`,
        gap_fill: `填空题`,
        mistake: `错题备注`
    },
    ignores: [
        (uri) => uri.includes('#'),
        (uri) => new RegExp(LOCAL.path + '$').test(uri),
            []
    ]
};
</script><script src="undefined/undefined" crossorigin="anonymous" fetchpriority="high"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha384-ZvpUoO/+PpLXR1lu4jmpXWu80pZlYUAfxl5NsBMWOEPSjUn/6Z/hRTt8+pR6L4N2" crossorigin="anonymous" fetchpriority="high"></script><script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?version=4.8.0&amp;features=default,fetch" defer=""></script><script src="/js/siteInit.js?v=0.4.14" type="module" fetchpriority="high" defer=""></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
  <script>
    Prism.plugins.autoloader.languages_path = 'https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/';
  </script>
</body></html>