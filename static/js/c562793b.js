import{d as R,m as j,S as V,A as z,a2 as E,p as I,w as N,v as q,u as F,L as O,s as U,b as X,q as Y,r as T,a5 as D,X as G,y as J,c as g,a6 as K,Y as Q,_ as W,e as p,R as H,g as n,i as o,k as P,t as l,F as Z,j as x,C as L,H as M,l as tt,h as a,D as A,E as et,f as s}from"./120aa8f8.js";import{T as ot,u as st}from"./9aa0d897.js";import{C as nt}from"./d57a5994.js";import{P as at}from"./415fa29b.js";import"https://unpkg.com/@waline/client@v2/dist/waline.mjs";const it=R({name:"ARPost",components:{Sidebar:j,Toc:ot,Comment:nt,SubTitle:V,ArticleCard:z,Profile:E,SvgIcon:I,PostStats:at},setup(){const o=N(),a=q(),l=F(),i=O(),n=U(),s=X(),{t}=Y(),r=T(new D),p=T(!0),c=T(),{enabledCommentPlugin:e}=G(),{initializeLightBox:u}=st(),m=async()=>{var t,s;p.value=!0,r.value=new D,window.scrollTo({top:0});let e=String(n.params.slug);e=e.indexOf(",")?e.replace(/[,]+/g,"/"):e,await a.fetchPost(e).then(t=>{r.value=t,o.setTitle(r.value.title),i.setHeaderImage(t.cover),p.value=!1}),l.hexoConfig.writing.highlight.enable&&console.warn("[Aurora Config Error]: Please turn off [Hightlightjs]."),l.hexoConfig.writing.prismjs.enable&&console.warn("[Aurora Config Error]: Please turn off [prismjs]. "),await Q(),u(),(t=c.value)==null||t.getCommentCount(),(s=c.value)==null||s.getPostView()};J(()=>n.params,t=>{t.slug&&n.fullPath.indexOf("#")===-1&&m()});const h=t=>{t===""&&(t=window.location.href),window.location.href=t},d=t=>{s.push({name:"post-search",query:{tag:t}})},f=t=>{s.push({name:"post-search",query:{category:t}})};return{avatarClasses:g(()=>({"hover:opacity-50 cursor-pointer":!0,[l.themeConfig.theme.profile_shape]:!0})),isMobile:g(()=>i.isMobile),currentPath:g(()=>n.path),pluginConfigs:g(()=>l.themeConfig.plugins),enabledComment:g(()=>r.value.comments&&e.value.plugin!==""),postStatsRef:c,SvgTypes:K,commonStore:i,fetchData:m,handleAuthorClick:h,navigateToTag:d,navigateToCategory:f,loading:p,post:r,t:t}},mounted(){this.fetchData()},beforeUnmount(){this.commonStore.resetHeaderImage()}}),lt={class:"flex flex-col mt-20"},rt={class:"main-grid"},pt={class:"post-header"},ct={class:"post-labels"},ut={key:2},dt=["onClick"],ht=o("em",{class:"opacity-50"},"#",-1),mt={key:2},gt=o("b",{class:"opacity-50"},"#",-1),ft={key:0,class:"post-title text-white"},vt={class:"flex flex-row items-center justify-start mt-8 mb-4"},yt={key:0,class:"post-footer"},Ct=["alt"],wt={class:"text-white opacity-80"},bt={class:"opacity-70"},_t={key:1,class:"post-footer"},kt={class:"flex flex-row items-center"},St={class:"text-ob-dim mt-1"},Tt={class:"main-grid"},Pt=["innerHTML"],At={key:1,class:"bg-ob-deep-800 px-14 py-16 rounded-2xl shadow-xl block min-h-screen"},$t=o("br",null,null,-1),Bt=o("br",null,null,-1),Dt=o("br",null,null,-1),Ht={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols2 gap-6 mt-6"},Lt={key:0,class:"flex flex-col w-full h-full mr-0 lg:mr-4"},Mt={key:1,class:"flex flex-col w-full h-full"},Rt={key:2,id:"comments"};function jt(i,t,e,r,c,u){const g=p("ob-skeleton"),m=p("PostStats"),h=p("SubTitle"),d=p("ArticleCard"),f=p("Comment"),v=p("Profile"),y=p("Toc"),w=p("Sidebar"),b=H("lazy"),C=H("scroll-spy");return s(),n("div",lt,[o("div",rt,[o("div",pt,[o("span",ct,[i.loading?(s(),P(g,{key:0,tag:"b",height:"20px",width:"35px"})):!i.loading&&i.post.categories&&i.post.categories.length>0?(s(),n("b",{key:1,onClick:t[0]||(t[0]=t=>i.navigateToCategory(i.post.categories[0].slug))},[o("span",null,l(i.post.categories[0].name),1)])):(s(),n("b",ut,l(i.t("settings.default-category")),1)),o("ul",null,[i.loading?(s(),P(g,{key:0,count:2,tag:"li",height:"16px",width:"35px",class:"mr-2"})):!i.loading&&i.post.tags&&i.post.tags.length>0?(s(!0),n(Z,{key:1},x(i.post.tags,e=>(s(),n("li",{key:e.slug,onClick:t=>i.navigateToTag(e.slug)},[ht,L(" "+l(e.name),1)],8,dt))),128)):(s(),n("li",mt,[gt,L(" "+l(i.t("settings.default-tag")),1)]))])]),i.post.title?(s(),n("h1",ft,l(i.post.title),1)):(s(),P(g,{key:1,class:"post-title text-white uppercase",width:"100%",height:"clamp(1.2rem, calc(1rem + 3.5vw), 4rem)"})),o("div",vt,[i.post.author&&i.post.count_time.symbolsTime?(s(),n("div",yt,[M(o("img",{class:tt(i.avatarClasses),alt:`author-${i.post.author.name}`,onClick:t[1]||(t[1]=t=>i.handleAuthorClick(i.post.author.link))},null,10,Ct),[[b,i.post.author.avatar||""]]),o("span",wt,[o("strong",{class:"text-white pr-1.5 hover:opacity-50 cursor-pointer",onClick:t[2]||(t[2]=t=>i.handleAuthorClick(i.post.author.link))},l(i.post.author.name),1),o("span",bt,l(i.t("settings.shared-on"))+" "+l(i.t(i.post.date.month))+" "+l(i.post.date.day)+", "+l(i.post.date.year),1)])])):(s(),n("div",_t,[o("div",kt,[a(g,{class:"mr-2",height:"28px",width:"28px",circle:!0}),o("span",St,[a(g,{height:"20px",width:"150px"})])])])),a(m,{"post-word-count":i.post.count_time.symbolsCount,"post-time-count":i.post.count_time.symbolsTime,"post-title":i.post.title,"current-path":i.currentPath,"plugin-configs":i.pluginConfigs,comments:i.enabledComment,ref:"postStatsRef"},null,8,["post-word-count","post-time-count","post-title","current-path","plugin-configs","comments"])])])]),o("div",Tt,[o("div",null,[i.post.content?M((s(),n("div",{key:0,class:"post-html",innerHTML:i.post.content},null,8,Pt)),[[C,{sectionSelector:"h1, h2, h3, h4, h5, h6"}]]):(s(),n("div",At,[a(g,{tag:"div",count:1,height:"36px",width:"150px",class:"mb-6"}),$t,a(g,{tag:"div",count:35,height:"16px",width:"100px",class:"mr-2"}),Bt,Dt,a(g,{tag:"div",count:25,height:"16px",width:"100px",class:"mr-2"})])),o("div",Ht,[i.post.prev_post.title?(s(),n("div",Lt,[a(h,{title:"settings.paginator.prev",icon:"arrow-left-circle"}),a(d,{data:i.post.prev_post},null,8,["data"])])):A("",!0),i.post.next_post.title?(s(),n("div",Mt,[a(h,{title:"settings.paginator.next",side:i.isMobile?"left":"right",icon:"arrow-right-circle"},null,8,["side"]),a(d,{data:i.post.next_post},null,8,["data"])])):A("",!0)]),i.enabledComment&&i.post.title&&i.post.text&&i.post.uid?(s(),n("div",Rt,[a(f,{title:i.post.title,body:i.post.text,uid:i.post.uid},null,8,["title","body","uid"])])):A("",!0)]),o("div",null,[a(w,null,{default:et(()=>[a(v,{author:i.post.author.slug||""},null,8,["author"]),a(y,{toc:i.post.toc,comments:i.enabledComment},null,8,["toc","comments"])]),_:1})])])])}const qt=W(it,[["render",jt]]);export{qt as default};