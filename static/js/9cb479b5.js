import{d as P,S as I,u as D,a as E,r as y,b as L,o as N,c as v,_ as q,e as g,f as r,g as c,h as s,i as t,F as x,j as B,n as V,t as T,k as F,l as H,m as M,T as R,P as j,A as K,p as G,q as O,s as U,v as J,w as Q,x as W,y as X,z as Y,B as Z,C as k,D as w,E as $,G as ee,H as te,I as ae}from"./120aa8f8.js";import"https://unpkg.com/@waline/client@v2/dist/waline.mjs";const oe=P({name:"ObArticleBox",components:{SubTitle:I},props:{sidebarBox:{type:Boolean,default:!0},activeCategory:{type:String,default:""}},setup(e){const a=D(),t=E(),s=y(!0),l=L(),o=async()=>{await t.fetchCategories(),s.value=!1},r=e=>{l.push({name:"post-search",query:{category:e}})};return N(o),{loading:s,navigateToCategory:r,sidebarBoxClasses:v(()=>({"sidebar-box":e.sidebarBox})),categories:v(()=>t.categories),gradientBackground:e=>e?{background:a.themeConfig.theme.header_gradient_css,color:"#fff",opacity:1}:{}}}}),se={class:"flex justify-event flex-wrap gap-2 pt-2 cursor-pointer"},ne=["onClick"],re={class:"bg-ob-deep-900 text-ob text-center px-2 py-1 rounded-tr-md rounded-br-md text-sm opacity-70"};function le(l,e,a,o,i,n){const u=g("SubTitle"),d=g("ob-skeleton");return r(),c("div",{class:H(l.sidebarBoxClasses)},[s(u,{title:"titles.category_list",icon:"category"},null,8,["title"]),t("ul",se,[l.categories.length>0?(r(!0),c(x,{key:0},B(l.categories,a=>(r(),c("li",{class:"flex flex-row items-center hover:opacity-50",key:a.slug,onClick:e=>l.navigateToCategory(a.slug)},[t("span",{class:"bg-ob-deep-900 text-center px-3 py-1 rounded-tl-md rounded-bl-md text-sm",style:V(l.gradientBackground(a.slug===l.activeCategory))},T(a.name),5),t("b",re,T(a.count),1)],8,ne))),128)):(r(),F(d,{key:1,tag:"li",count:10,height:"20px",width:"3rem"}))])],2)}const ie=q(oe,[["render",le]]),ce=P({name:"ArResult",components:{Sidebar:M,TagBox:R,Paginator:j,ArticleCard:K,CategoryBox:ie,SvgIcon:G},setup(){const{t:e}=O(),t=U(),a=J(),s=Q(),l=y("search"),o=y(!1),r=y(new W),i=y({pageSize:12,pageTotal:0,page:1}),c="aurora-query-tag",g="aurora-query-category",n=y(),u=y(),d=()=>{n.value?p():u.value&&x(),window.scrollTo({top:0}),s.setTitle("search")},p=()=>{o.value=!1,a.fetchPostsByTag(n.value).then(e=>{o.value=!0,r.value=e,i.value.pageTotal=e.total})},x=()=>{o.value=!1,a.fetchPostsByCategory(u.value).then(e=>{o.value=!0,r.value=e,i.value.pageTotal=e.total})},m=()=>{u.value="",n.value="";const{tag:e,category:a}=t.query;a?u.value=a:e&&(n.value=e),(e||a)&&d()};return X(()=>t.query,()=>{m()}),Y(()=>{m()}),Z(()=>{localStorage.removeItem(c),localStorage.removeItem(g)}),{isLoading:v(()=>!o.value),isEmpty:v(()=>r.value.data.length===0&&o.value),categoryTitle:v(()=>u.value),tagTitle:v(()=>n.value),posts:r,pageType:l,pagination:i,pageChangeHandler:m,t:e}}}),ge={class:"flex flex-col mt-10"},ue={class:"post-header"},de={class:"flex flex-row gap-8"},pe={key:0,class:"post-title text-white uppercase"},ye={class:"opacity-60"},he={key:1,class:"post-title text-white uppercase"},fe={class:"opacity-60"},me={class:"main-grid"},ve={class:"relative"},_e={class:"post-html flex flex-col items-center"},Te={class:"flex flex-col relative"},be={class:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-8"},Ce={class:"sidebar-box flex flex-col gap-8"};function Se(e,a,l,o,i,n){const u=g("SvgIcon"),d=g("ArticleCard"),p=g("Paginator"),y=g("CategoryBox"),v=g("TagBox"),m=g("Sidebar");return r(),c("div",ge,[t("div",ue,[t("div",de,[e.categoryTitle?(r(),c("h1",pe,[t("span",ye,[s(u,{"icon-class":"category",stroke:"white"})]),k(" "+T(e.categoryTitle),1)])):w("",!0),e.tagTitle?(r(),c("h1",he,[t("span",fe,[s(u,{"icon-class":"tag",stroke:"white"})]),k(" "+T(e.tagTitle),1)])):w("",!0)])]),t("div",me,[t("div",ve,[s(ee,{name:"fade-slide-y",mode:"out-in"},{default:$(()=>[te(t("div",_e,[t("h1",null,T(e.t("settings.no-search-result")),1),s(u,{"icon-class":"empty-search",style:{"font-size":"35rem"}})],512),[[ae,e.isEmpty]])]),_:1}),t("div",Te,[t("ul",be,[e.isLoading||e.posts.data.length===0?(r(),c(x,{key:0},B(12,e=>t("li",{key:e},[s(d,{data:{}})])),64)):(r(!0),c(x,{key:1},B(e.posts.data,e=>(r(),c("li",{key:e.slug},[s(d,{data:e},null,8,["data"])]))),128))]),s(p,{pageSize:e.pagination.pageSize,pageTotal:e.pagination.pageTotal,page:e.pagination.page,onPageChange:e.pageChangeHandler},null,8,["pageSize","pageTotal","page","onPageChange"])])]),t("div",null,[s(m,null,{default:$(()=>[t("div",Ce,[s(y,{"sidebar-box":!1,"active-category":e.categoryTitle},null,8,["active-category"]),s(v,{"sidebar-box":!1,"active-tag":e.tagTitle},null,8,["active-tag"])])]),_:1})])])])}const ke=q(ce,[["render",Se]]);export{ke as default};